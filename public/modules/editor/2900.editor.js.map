{"version":3,"sources":["webpack:///./resources/modules/editor/src/js/classes/modules/SettingsChangeModule.js","webpack:///./resources/modules/editor/src/js/classes/modules/TemplateSettingsChangeModule.js","webpack:///./resources/modules/editor/src/js/classes/modules/TemplateDataStorage.js","webpack:///./resources/modules/editor/src/js/classes/Modules.js","webpack:///./resources/modules/editor/src/js/components/WidgetIcon.js","webpack:///./resources/modules/editor/src/js/components/WidgetsPanel.js","webpack:///./resources/modules/editor/src/js/components/SettingSection.js","webpack:///./resources/modules/editor/src/js/components/DynamicContent/DynamicContent.js","webpack:///./resources/modules/editor/src/js/components/PanelTabContent.js","webpack:///./resources/modules/editor/src/js/components/StateSection.js","webpack:///./resources/modules/editor/src/js/components/SettingsPanel.js","webpack:///./resources/modules/editor/src/js/components/EditorWindow.js","webpack:///./resources/modules/editor/src/js/components/HistoryPanel.js","webpack:///./resources/modules/editor/src/js/components/NavigationItem.js","webpack:///./resources/modules/editor/src/js/components/NavigationPanel.js","webpack:///./resources/modules/editor/src/js/components/CommonPanel.js","webpack:///./resources/modules/editor/src/js/components/GlobalColors.js","webpack:///./resources/modules/editor/src/js/components/UpdateButton.js","webpack:///./resources/modules/editor/src/js/classes/modules/AssetsBrowser.js","webpack:///./resources/modules/editor/src/js/components/ResponsiveDdFooter.js","webpack:///./resources/modules/editor/src/js/components/DialogTab.js","webpack:///./resources/modules/editor/src/js/components/DialogConditionsTab.js","webpack:///./resources/modules/editor/src/js/components/DialogTriggersTab.js","webpack:///./resources/modules/editor/src/js/components/DialogWindow.js","webpack:///./resources/modules/editor/src/Editor.js","webpack:///./node_modules/invert-color/lib/invert.min.js","webpack:///./node_modules/react-dnd/dist/esm/utils/js_utils.js","webpack:///./node_modules/react-dnd/dist/esm/decorators/disposables.js","webpack:///./node_modules/react-dnd/dist/esm/decorators/decorateHandler.js","webpack:///./node_modules/react-dnd/dist/esm/decorators/utils.js","webpack:///./node_modules/react-dnd/dist/esm/utils/isValidType.js","webpack:///./node_modules/react-dnd/dist/esm/decorators/createSourceFactory.js","webpack:///./node_modules/react-dnd/dist/esm/decorators/DragSource.js"],"names":["modules","elementsIds","element","RootElement","this","rootElement","getIds","setCurrentRootElement","toObject","data","getTemplateData","title","name","type","currentElement","store","setCurrentElement","BaseElement","elementId","stack","children","length","pop","id","push","elementName","newSection","Section","getId","newColumn","Column","newWidget","window","elementsManager","getElementClass","appendColumn","appendNewSection","changeTemplateStatus","CONSTANTS","getEditor","showSettingsPanel","appendWidget","BaseModule","editor","elementsFactory","ElementsFactory","saveImportModule","SaveImportModule","settingsChangeModule","SettingsChangeModule","templateSettingsChangeModule","TemplateSettingsChangeModule","templateDataStorage","TemplateDataStorage","load","WidgetIcon","props","state","onDragStart","bind","e","startDrag","dataTransfer","effectAllowed","setData","getName","className","draggable","React","getIconComponent","height","getTitle","Component","widgets","getWidgetsList","autoHide","autoHideTimeout","autoHideDuration","map","widget","key","ChevronIcon","SettingSection","open","hidden","toggle","currentElementName","getCurrentElement","currentTab","getCurrentTab","settingSection","undefined","dispatch","setActiveSection","checkSectionDisplay","sectionID","conditionsCallback","setState","conditions","_","toPairs","forEach","condition","controlId","comparedValue","negative","indexOf","replace","_value","getSettings","isArray","value","isString","isBoolean","activeSectionID","controllers","controls","hideOnEmail","getTemplateType","filter","controller","onClick","label","ControllerComponent","controllersManager","getController","connect","settingSectionMenu","controllerValue","DATA_TYPES_OPTIONS","MORPHS_TYPES_OPTIONS","array","DynamicContent","wrapperClickHandler","stopPropagation","typeChange","data_type","unset","setSettings","convertChange","convert_type","changeArgument","index","argument","resource","Resource","route","updateDynamicValue","setDynamicSetting","settingName","getDynamicSetting","prevProps","prevState","top","offsetTop","offsetHeight","left","classes","show","argument1","selectDataTypeProps","onChange","find","item","options","classNamePrefix","placeholder","noOptionsMessage","isClearable","convertsOptions","selectConvertTypeProps","join","style","getPositionProps","AltrpSelect","target","dynamicContentState","get","sections","section","idx","sectionId","StateSection","buttons","setCurrentState","button","currentState","ContentIcon","StyleIcon","AdvancedIcon","SettingsPanel","activeTab","setCurrentTab","getControls","pair","control","Controller","contentTabClasses","TAB_CONTENT","styleTabClasses","TAB_STYLE","advancedTabClasses","TAB_ADVANCED","setActiveTab","EditorWindow","width","currentScreen","historyStoreActive","src","historyStore","active","UserSvg","StartFilled","HistoryPanel","ActionsTabContent","RevisionTabContent","actionsTabClasses","revisionTabClasses","renderTabContent","controllerHistory","useSelector","history","current","handlerHistory","i","undo","redo","iconsManager","renderIcon","restoreItemClasses","arrayRevisions","setArrayRevisions","currentRevision","setCurrentRevision","oldRootElement","setOldRootElement","cloneDeep","getTemplateDataStorage","templateId","appStore","getState","templateData","getAll","reverse","fetchRevisions","parent","setActiveHistoryStore","handleSetCurrentRevision","parent_template","response","revisionRootElement","JSON","parse","parsedData","getFactory","parseData","replaceAll","showWidgetsPanel","addHistoryStoreItem","old","new","dateString","secondsAgo","Date","now","updated_at","Math","floor","date","toLocaleString","month","getDate","getHours","getMinutes","author","NavigationItem","isDragging","connectDragSource","text","opacity","cursor","DragSource","beginDrag","monitor","dragSource","NavigationPanel","template","parseTemplate","dragOver","isDrag","handleExpand","handleCollapse","showItem","deleteItem","storeListener","node","nodePath","currentTree","Tree","isExpanded","s","editorSetCurrentElementByID","newTemplate","getRootElement","currentTemplate","isEqual","elementID","confirm","preventDefault","deleteCurrentElementByID","newTree","removeElementFromArray","f","childNodes","expandable","isExpandable","depth","icon","hasCaret","overflow","contents","onNodeExpand","onNodeCollapse","onNodeDoubleClick","StyledWrapper","styled","Heading","MenuGroup","MenuItems","Item","showGlobalColorsPanel","showGlobalFontsPanel","Panel","GlobalColors","colorChange","rgba","rgb","r","g","b","a","hex","colors","currentColor","color","colorPickedHex","colorRGB","setColors","guid","debounceChangeColor","debounce","globalStyleResource","put","settings","then","res","child","recursiveWalkTree","nameChange","debounceChangeName","toggleColorPanel","addItem","colorPanelOpen","hasGlobal","updateAllGlobals","stringify","createGlobalColor","post","marginBottom","backgroundColor","invert","black","white","threshold","presetColors","padding","boxShadow","globalStyles","setGlobalColors","Chevron","TEMPLATE_TYPES_WITHOUT_CONDITIONS","UpdateButton","isShowed","saveTemplate","toggleModalWindow","buttonClasses","templateStatus","showTemplateConditions","template_type","showModal","status","Times","AssetsBrowser","tabClick","toggleBrowser","selectAsset","chooseAsset","tabs","svgAssets","assets","getAssets","selectedAsset","mediaAssets","videoAssets","mediaResource","svgResource","videoResource","nextContext","tab","resSvg","resMedia","console","log","document","addEventListener","event","currentTarget","dataset","assetname","assetsToggle","asset","onChoose","tabClasses","data-tab","AssetContent","assetProps","iconComponent","filename","url","assetType","data-assetname","video","fill","xmlns","d","assetsManagerSettings","ResponsiveDdFooter","screens","screen","setCurrentScreen","toggleOpen","desc","DialogConditionsTab","handleObjectTypeChange","conditionId","v","object_type","object_ids","handleIdsSelect","ids","handleChangeConditionType","condition_type","currentLogic","searchValue","pageOptions","reportsOptions","getTemplateId","close","randomNumber","random","forceUpdate","filteredData","test","findIndex","obj","include","exclude","logic_options","main_options","o","p","isMulti","closeMenuOnSelect","removeCondition","addCondition","updateConditions","DialogTriggersTab","onLoad","onScroll","scrollElement","afterInactivity","on_exit","inactivity","on_click","on_page_load","on_scroll","to_element","triggers","size","direction","checked","htmlFor","handleChangePage","min","step","handleCheck","max","defaultValue","updateTriggers","Logo","DialogWindow","handleClose","handleOpen","renderSwitch","Navigation","History","Preview","Settings","Dots","Hamburger","altrpEditor","activePanel","showDialogWindow","openPageSettings","openNavigratonPanel","showNavigationPanel","showHistoryPanel","showCommonPanel","onDragEnd","Modules","loaded","contextMenu","closeDynamicContent","draggableElement","elementDrag","stopDrag","initModules","currentUser","changeCurrentUser","AltrpMeta","setEditorMeta","settingsActive","navigationActive","templateClasses","getType","DndProvider","backend","HTML5Backend","onKeyDown","href","admin_logo","renderAsset","viewBox","module","exports","t","sqrt","n","slice","Error","parseInt","Array","u","Object","assign","pow","toString","asRGB","asRgbArray","defaultThreshold","asRgbObject","_typeof","Symbol","iterator","constructor","prototype","isFunction","input","noop","isPlainObject","isObjectLike","getPrototypeOf","proto","_classCallCheck","instance","Constructor","TypeError","_defineProperties","descriptor","enumerable","configurable","writable","defineProperty","_createClass","protoProps","staticProps","Disposable","action","isDisposed","Boolean","dispose","result","isDisposable","empty","CompositeDisposable","_len","arguments","disposables","_key","shouldDispose","splice","len","currentDisposables","_i","_i2","SerialDisposable","_arrayLikeToArray","arr","arr2","_setPrototypeOf","setPrototypeOf","__proto__","_possibleConstructorReturn","self","call","ReferenceError","_assertThisInitialized","_getPrototypeOf","decorateHandler","_ref","DecoratedComponent","createHandler","createMonitor","createConnector","registerHandler","containerDisplayName","collect","_options$arePropsEqua","arePropsEqual","Decorated","displayName","DragDropContainer","_React$Component","subClass","superClass","create","_inherits","Derived","hasNativeReflectConstruct","_super","Reflect","construct","sham","Proxy","_isNativeReflectConstruct","Super","NewTarget","apply","_this","decoratedRef","handleChange","nextState","getCurrentState","disposable","receiveProps","handlerId","nextProps","currentType","handler","receiveType","handlerMonitor","manager","handlerConnector","_registerHandler2","_arrayWithHoles","_arr","_n","_d","_e","_s","next","done","err","_iterableToArrayLimit","minLen","from","_unsupportedIterableToArray","_nonIterableRest","unregister","receiveHandlerId","unsubscribe","getMonitor","subscribeToStateChange","handlerIds","setDisposable","hooks","_this2","DndContext","_ref2","C","dragDropManager","receiveDragDropManager","requestAnimationFrame","_this2$handlerConnect","reconnect","ref","render","_item$$$typeof","$$typeof","isRefForwardingComponent","getBackend","concat","isValidType","allowArray","every","ALLOWED_SPEC_METHODS","REQUIRED_SPEC_METHODS","SourceImpl","spec","canDrag","globalMonitor","sourceId","getSourceId","currentRef","endDrag","createSourceFactory","keys","createSource","SourceConnector","DragSourceMonitorImpl"],"mappings":"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","file":"2900.editor.js","sourcesContent":["class SettingsChangeModule {\r\n\r\n}\r\nexport default SettingsChangeModule;","class TemplateSettingsChangeModule {\r\n\r\n}\r\nexport default TemplateSettingsChangeModule;","import RootElement from \"../elements/RootElement\";\r\nimport { getEditor, getTemplateId } from \"../../helpers\";\r\nimport CONSTANTS from \"../../consts\";\r\nimport BaseModule from \"./BaseModule\";\r\nimport store from \"../../store/store\";\r\nimport {\r\n  setCurrentElement,\r\n  SET_CURRENT_ELEMENT\r\n} from \"../../store/current-element/actions\";\r\nimport BaseElement from \"../elements/BaseElement\";\r\nimport Section from \"../elements/Section\";\r\nimport Column from \"../elements/Column\";\r\nimport { changeTemplateStatus } from \"../../store/template-status/actions\";\r\n\r\nclass TemplateDataStorage extends BaseModule {\r\n  constructor(modules) {\r\n    super(modules);\r\n    this.elementsIds = [];\r\n  }\r\n\r\n  replaceAll(element) {\r\n    if (!element instanceof RootElement) {\r\n      throw \"Expect Root Element as root element;)\";\r\n    }\r\n    this.rootElement = element;\r\n    this.elementsIds = element.getIds();\r\n    this.setCurrentRootElement();\r\n  }\r\n\r\n  getTemplateData() {\r\n    return this.rootElement.toObject();\r\n  }\r\n  getTemplateDataForSave() {\r\n    let data = {};\r\n\r\n    data.data = this.getTemplateData();\r\n    data.title = this.title || \"testtitle\";\r\n    data.name = this.name || \"testname\";\r\n    return data;\r\n  }\r\n\r\n  setTitle(title) {\r\n    this.title = title;\r\n  }\r\n\r\n  setName(name) {\r\n    this.name = name;\r\n  }\r\n  setType(type) {\r\n    this.type = type;\r\n  }\r\n\r\n  setCurrentRootElement() {\r\n    this.currentElement = this.rootElement;\r\n    store.dispatch(setCurrentElement(this.currentElement));\r\n    return this.currentElement;\r\n  }\r\n\r\n  setCurrentElement(element) {\r\n    if (!element instanceof BaseElement) {\r\n      throw \"Only Base Element Can Be Set as Default\";\r\n    }\r\n    this.currentElement = element;\r\n    store.dispatch(setCurrentElement(element));\r\n  }\r\n\r\n  getCurrentElement() {\r\n    if (!this.currentElement) {\r\n      return this.setCurrentRootElement();\r\n    }\r\n    return this.currentElement;\r\n  }\r\n\r\n  getElementById(elementId) {\r\n    let stack = [...this.rootElement.children];\r\n    let element;\r\n    while (!(stack.length === 0)) {\r\n      element = stack.pop();\r\n      if (element.id == elementId) return element;\r\n      stack.push(...element.children);\r\n    }\r\n  }\r\n\r\n  getRootElement() {\r\n    return this.rootElement;\r\n  }\r\n\r\n  addWidgetInSection(elementName) {\r\n    let newSection = new Section();\r\n    this.elementsIds.push(newSection.getId());\r\n\r\n    let newColumn = new Column();\r\n    this.elementsIds.push(newColumn.getId());\r\n\r\n    let newWidget = new (window.elementsManager.getElementClass(elementName))();\r\n    this.elementsIds.push(newWidget.getId());\r\n    if (elementName === \"section_widget\") {\r\n      newSection.appendColumn(newColumn);\r\n      this.rootElement.appendNewSection(newSection);\r\n      this.setCurrentElement(newSection);\r\n      store.dispatch(changeTemplateStatus(CONSTANTS.TEMPLATE_NEED_UPDATE));\r\n      getEditor().showSettingsPanel();\r\n      return;\r\n    }\r\n    newColumn.appendWidget(newWidget);\r\n    newSection.appendColumn(newColumn);\r\n    this.rootElement.appendNewSection(newSection);\r\n    this.setCurrentElement(newWidget);\r\n    store.dispatch(changeTemplateStatus(CONSTANTS.TEMPLATE_NEED_UPDATE));\r\n    getEditor().showSettingsPanel();\r\n  }\r\n}\r\n\r\nexport default TemplateDataStorage;\r\n","import ElementsFactory from './modules/ElementsFactory';\r\nimport SaveImportModule from \"./modules/SaveImportModule\";\r\nimport SettingsChangeModule from \"./modules/SettingsChangeModule\";\r\nimport TemplateSettingsChangeModule from \"./modules/TemplateSettingsChangeModule\";\r\nimport TemplateDataStorage from \"./modules/TemplateDataStorage\";\r\n\r\nclass Modules {\r\n  /**\r\n   * @param {Editor} editor\r\n   * */\r\n  constructor(editor){\r\n    this.elementsFactory = new ElementsFactory(this);\r\n    this.saveImportModule = new SaveImportModule(this);\r\n    window.saveImportModule = new SaveImportModule(this);\r\n    this.settingsChangeModule = new SettingsChangeModule(this);\r\n    this.templateSettingsChangeModule = new  TemplateSettingsChangeModule(this);\r\n    this.templateDataStorage = new TemplateDataStorage(this);\r\n  }\r\n  loaded(){\r\n    this.saveImportModule.load();\r\n  }\r\n}\r\nexport default Modules;","import React, {Component} from \"react\";\r\nimport BaseElement from \"../classes/elements/BaseElement\";\r\nimport store from '../store/store'\r\nimport {startDrag} from \"../store/element-drag/actions\";\r\n\r\nexport default class WidgetIcon  extends  Component{\r\n  constructor(props){\r\n    super(props);\r\n\r\n    this.state = {\r\n      element: this.props.element,\r\n    };\r\n    this.onDragStart = this.onDragStart.bind(this);\r\n  }\r\n  onDragStart(e){\r\n    store.dispatch(startDrag(null));\r\n    e.dataTransfer.effectAllowed = \"copy\";\r\n    e.dataTransfer.setData('text/plain', this.state.element.getName());\r\n  }\r\n  render() {\r\n    if (!this.state.element instanceof BaseElement) {\r\n      throw 'Widget Component must has Element in props';\r\n    }\r\n    return <div className='widget-icon' draggable=\"true\" onDragStart={this.onDragStart}>\r\n      {\r\n        React.createElement(this.state.element.getIconComponent(), {height: 35})\r\n      }\r\n      <div className=\"widget-icon__title\">\r\n        {this.state.element.getTitle()}\r\n      </div>\r\n    </div>\r\n  }\r\n}\r\n\r\n","import React, { Component } from \"react\";\r\nimport WidgetIcon from \"./WidgetIcon\";\r\nimport Scrollbars from \"react-custom-scrollbars\";\r\n\r\nclass WidgetsPanel extends Component {\r\n  constructor(props) {\r\n    super(props);\r\n    this.state = { widgets: window.elementsManager.getWidgetsList() };\r\n  }\r\n  render() {\r\n    return (\r\n      <div className=\"widget-panel-wrapper\">\r\n        <Scrollbars autoHide autoHideTimeout={500} autoHideDuration={200}>\r\n          <div className=\"widget-panel\">\r\n            {this.state.widgets.map(widget => {\r\n              return <WidgetIcon element={widget} key={widget.getName()} />;\r\n            })}\r\n          </div>\r\n        </Scrollbars>\r\n      </div>\r\n    );\r\n  }\r\n}\r\n\r\nexport default WidgetsPanel;\r\n","import React, { Component } from \"react\";\r\nimport ChevronIcon from '../../svgs/chevron.svg'\r\nimport { connect } from \"react-redux\";\r\nimport { getCurrentElement, getCurrentTab, getElementState } from \"../store/store\";\r\nimport { setActiveSection } from \"../store/setting-section/actions\";\r\nimport {getTemplateType} from \"../helpers\";\r\n\r\nclass SettingSection extends Component {\r\n  constructor(props) {\r\n    super(props);\r\n    this.state = {\r\n      open: false,\r\n      hidden: false,\r\n    };\r\n    this.toggle = this.toggle.bind(this);\r\n  };\r\n\r\n  componentDidMount() {\r\n\r\n    /**\r\n     *          ,\r\n     *   setActiveSection  0\r\n     */\r\n    let currentElementName = getCurrentElement().getName();\r\n    let currentTab = getCurrentTab();\r\n    if (! (this.props.settingSection[currentElementName]\r\n        && (this.props.settingSection[currentElementName][currentTab] !== undefined))) {\r\n      this.props.dispatch(setActiveSection(getCurrentElement().getName(), getCurrentTab(), 0));\r\n    }\r\n    this.checkSectionDisplay();\r\n  }\r\n\r\n  componentDidUpdate(){\r\n    this.checkSectionDisplay();\r\n  }\r\n\r\n  toggle() {\r\n    this.props.dispatch(setActiveSection(getCurrentElement().getName(), getCurrentTab(), this.props.sectionID));\r\n  };\r\n\r\n  /**\r\n   *   \r\n   * @return {undefined}\r\n   */\r\n  checkSectionDisplay(){\r\n\r\n    if(this.props.conditionsCallback){\r\n      let hidden = ! this.props.conditionsCallback();\r\n      if(this.state.hidden === hidden) {\r\n        return\r\n      }\r\n      this.setState(state => ({...state, hidden }));\r\n      return ;\r\n    }\r\n    if(! this.props.conditions){\r\n      return;\r\n    }\r\n    let hidden = false;\r\n\r\n    let conditionPairs = _.toPairs(this.props.conditions);\r\n    conditionPairs.forEach(condition => {\r\n      let [controlId, comparedValue] = condition;\r\n      let negative = controlId.indexOf(\"!\") >= 0;\r\n      controlId = controlId.replace(\"!\", \"\");\r\n      let _value = getCurrentElement().getSettings(controlId);\r\n      if (!_.isArray(_value)) {\r\n        _value = [_value];\r\n      } else if (_value.length === 0) {\r\n        hidden = true;\r\n      }\r\n      _value.forEach(value => {\r\n        if (hidden) {\r\n          return;\r\n        }\r\n        if (_.isString(comparedValue) || _.isBoolean(comparedValue)) {\r\n          hidden = value !== comparedValue ? !negative : negative;\r\n        }\r\n        if (_.isArray(comparedValue)) {\r\n          hidden = comparedValue.indexOf(value) === -1 ? !negative : negative;\r\n        }\r\n      });\r\n    });\r\n    if(this.state.hidden !== hidden){\r\n      this.setState(state => ({...state, hidden}));\r\n    }\r\n  }\r\n  render() {\r\n    if(this.state.hidden){\r\n      return null;\r\n    }\r\n    let currentElementName = getCurrentElement().getName();\r\n    let currentTab = getCurrentTab();\r\n    let activeSectionID = 0;\r\n    /**\r\n     *   undefined\r\n     */\r\n    if (this.props.settingSection[currentElementName]\r\n        && (this.props.settingSection[currentElementName][currentTab] !== undefined)) {\r\n      activeSectionID = this.props.settingSection[currentElementName][currentTab];\r\n    }\r\n    let controllers = this.props.controls || [];\r\n    if(this.props.hideOnEmail && getTemplateType() === 'email'){\r\n      return '';\r\n    }\r\n    controllers = controllers.filter(controller => {\r\n      return ! (controller.hideOnEmail && getTemplateType() === 'email');\r\n    });\r\n    return (\r\n      <div  className={\"settings-section \" + (this.props.sectionID === activeSectionID ? 'open' : '')}>\r\n        <div className=\"settings-section__title d-flex\" onClick={this.toggle}>\r\n          <div className=\"settings-section__icon d-flex \">\r\n            <ChevronIcon />\r\n          </div>\r\n          <div className=\"settings-section__label\">\r\n            {this.props.label}\r\n          </div>\r\n        </div>\r\n        <div className=\"controllers-wrapper\">\r\n          {\r\n            controllers.map((controller) => {\r\n              let ControllerComponent = window.controllersManager.getController(controller.type);\r\n              return React.createElement(ControllerComponent, { ...controller, key: controller.controlId });\r\n            })\r\n          }\r\n        </div>\r\n      </div>\r\n    )\r\n  }\r\n}\r\n\r\nconst mapStateToProps = (state) => {\r\n  return {\r\n    settingSection: state.settingSectionMenu,\r\n    controllerValue: state.controllerValue,\r\n  }\r\n};\r\n\r\n\r\nexport default connect(mapStateToProps, null)(SettingSection);\r\n","import React, {Component} from \"react\";\r\nimport ('./DynamicContent.scss');\r\nimport ('./../../../sass/altrp-menu.scss');\r\nimport {connect} from \"react-redux\";\r\nimport Resource from \"../../classes/Resource\";\r\nimport AltrpSelect from \"../../../../../admin/src/components/altrp-select/AltrpSelect\";\r\nimport CONSTANTS from \"../../consts\";\r\nimport {changeTemplateStatus} from \"../../store/template-status/actions\";\r\nimport store from \"../../store/store\";\r\n\r\nconst DATA_TYPES_OPTIONS = [\r\n  {\r\n    value: 'array',\r\n    label: 'Array'\r\n  },\r\n];\r\nconst MORPHS_TYPES_OPTIONS = {\r\n  /**\r\n   * @see {ArrayConverter}\r\n   * @link https://altrp.com/layouts/converters\r\n   */\r\n  array: [\r\n    {\r\n      /**\r\n       * @see {ArrayConverter#extract}\r\n       */\r\n      label: 'Extract',\r\n      value: 'extract',\r\n    },\r\n    {\r\n      /**\r\n       * @see {ArrayConverter#map}\r\n       */\r\n      label: 'Map',\r\n      value: 'map',\r\n    },\r\n  ],\r\n};\r\n/**\r\n *       \r\n */\r\nclass DynamicContent extends Component {\r\n  constructor(props) {\r\n    super(props);\r\n    this.state = {\r\n      value: {},\r\n      };\r\n    this.resource = new Resource({route: '/admin/ajax/models_with_fields_options'});\r\n  }\r\n\r\n  componentDidMount(){\r\n    this.updateDynamicValue();\r\n  }\r\n\r\n  /**\r\n   *     \r\n   */\r\n  setSettings(){\r\n    store.dispatch(changeTemplateStatus(CONSTANTS.TEMPLATE_NEED_UPDATE));\r\n    this.props.currentElement.setDynamicSetting(this.props.settingName, this.state.value);\r\n  }\r\n  /**\r\n   *      \r\n   * @param e\r\n   */\r\n  wrapperClickHandler = (e)=>{\r\n    e.stopPropagation();\r\n  };\r\n  /**\r\n   *         (this.props.currentElement)\r\n   */\r\n  updateDynamicValue(){\r\n    if(! this.props.settingName || ! this.props.currentElement){\r\n      return;\r\n    }\r\n    let value = this.props.currentElement.getDynamicSetting(this.props.settingName);\r\n    if(! value){\r\n      value = {};\r\n    }\r\n    this.setState(state => ({...state, value}));\r\n  }\r\n\r\n  componentDidUpdate(prevProps, prevState){\r\n    if(this.props.currentElement !== prevProps.currentElement){\r\n      this.updateDynamicValue();\r\n    }\r\n    if(this.props.settingName !== prevProps.settingName){\r\n      this.updateDynamicValue();\r\n    }\r\n  }\r\n  getPositionProps(){\r\n    let element = this.props.element;\r\n    if(! element){\r\n      return{top:0, left:7};\r\n    }\r\n    return{\r\n      top: element.offsetTop + element.offsetHeight + 2,\r\n      left:7\r\n    };\r\n  }\r\n\r\n  /**\r\n   *   \r\n   * @param {{}} e\r\n   */\r\n  typeChange = (e) => {\r\n    let value = {...this.state.value};\r\n    if(! e){\r\n      _.unset(value, 'data_type')\r\n    } else {\r\n      value.data_type = e.value;\r\n    }\r\n    _.unset(value, 'convert_type');\r\n    this.setState(state => ({...state, value}), this.setSettings);\r\n  };\r\n  /**\r\n   *   \r\n   * @param {{}} e\r\n   */\r\n  convertChange = (e) => {\r\n    let value = {...this.state.value};\r\n    if(! e){\r\n      _.unset(value, 'convert_type')\r\n    } else {\r\n      value.convert_type = e.value;\r\n    }\r\n    this.setState(state => ({...state, value}), this.setSettings);\r\n  };\r\n  /**\r\n   *  \r\n   * @param {number} index\r\n   * @param {string} argument\r\n   */\r\n  changeArgument = (index, argument) => {\r\n    let value = {...this.state.value};\r\n    if(! argument){\r\n      _.unset(value, `argument${index || 1}`)\r\n    } else {\r\n      value[`argument${index || 1}`] = argument;\r\n    }\r\n    this.setState(state => ({...state, value}), this.setSettings);\r\n  };\r\n\r\n  render() {\r\n    let classes = ['altrp-dynamic-content'];\r\n    if(this.props.show){\r\n      classes.push('altrp-dynamic-content_show')\r\n    }\r\n    const {data_type, convert_type, argument1} = this.state.value;\r\n\r\n    let selectDataTypeProps = {\r\n      onChange: this.typeChange,\r\n      value: _.find(DATA_TYPES_OPTIONS, item => item.value === data_type) || null,\r\n      options: DATA_TYPES_OPTIONS,\r\n      classNamePrefix: 'dynamic-select',\r\n      placeholder: 'Choose Data Type',\r\n      noOptionsMessage: () => \"no found\",\r\n      isClearable: true,\r\n    };\r\n    let convertsOptions = MORPHS_TYPES_OPTIONS[data_type] || [];\r\n    let selectConvertTypeProps = {\r\n      onChange: this.convertChange,\r\n      value: _.find(convertsOptions, item => item.value === convert_type) || null,\r\n      options: convertsOptions,\r\n      classNamePrefix: 'dynamic-select',\r\n      placeholder: 'Choose Data Type',\r\n      noOptionsMessage: () => \"no found\",\r\n      isClearable: true,\r\n    };\r\n    return <div className={classes.join(' ')}  style={this.getPositionProps()} onClick={this.wrapperClickHandler}>\r\n    <div className=\"controller-container controller-container_select2\">\r\n      <div className=\"control-select2-header\">\r\n        <div className=\"control-select2__label\">Select Type</div>\r\n      </div>\r\n      <div className=\"control-container_select2-wrapper\">\r\n        <AltrpSelect isClearable={true} {...selectDataTypeProps} />\r\n      </div>\r\n    </div>\r\n      {convertsOptions.length ? <div className=\"controller-container controller-container_select2\">\r\n        <div className=\"control-select2-header\">\r\n          <div className=\"control-select2__label\">Data Converts</div>\r\n        </div>\r\n        <div className=\"control-container_select2-wrapper\">\r\n          <AltrpSelect isClearable={true} {...selectConvertTypeProps} />\r\n        </div>\r\n      </div> : null}\r\n      {data_type && <div className=\"controller-container controller-container_textarea\">\r\n        <div className=\"controller-container__label\">\r\n          Argument  1\r\n        </div>\r\n        <textarea className=\"controller-container__textarea\"\r\n                  value={argument1 || ''}\r\n                  onChange={(e) => {this.changeArgument(1, e.target.value)}} />\r\n      </div>}\r\n    </div>\r\n  }\r\n}\r\n\r\nfunction mapStateToProps(state) {\r\n  return {\r\n    ...state.dynamicContentState,\r\n    settingName: _.get(state.dynamicContentState, 'params.settingName'),\r\n    currentElement: state.currentElement.currentElement\r\n  };\r\n}\r\n\r\nexport default connect(mapStateToProps)(DynamicContent);\r\n","import React, { Component } from \"react\";\r\nimport SettingSection from \"./SettingSection\";\r\nimport { Scrollbars } from \"react-custom-scrollbars\";\r\nimport DynamicContent from \"./DynamicContent/DynamicContent\";\r\n\r\nclass PanelTabContent extends Component {\r\n\r\n  render() {\r\n    let sections = this.props.sections || [];\r\n    return <div className=\"settings-controllers\">\r\n      <Scrollbars\r\n        autoHide\r\n        autoHideTimeout={500}\r\n        autoHideDuration={200}\r\n      >\r\n        <div id=\"settingsControllers\">\r\n          {\r\n            sections.map((section, idx) => {\r\n              return React.createElement(SettingSection, {\r\n                ...section,\r\n                key: section.sectionId,\r\n                sectionID: idx,\r\n              });\r\n            }\r\n            )\r\n          }\r\n          <DynamicContent />\r\n        </div>\r\n      </Scrollbars>\r\n    </div>\r\n  }\r\n}\r\n\r\nexport default PanelTabContent\r\n","import React, { Component } from \"react\";\r\nimport ('../../sass/state-section.scss');\r\nimport { connect } from \"react-redux\";\r\nimport { setCurrentState } from \"../store/state-section/actions\";\r\nimport { getElementState, getCurrentTab } from \"../store/store\";\r\n\r\nclass StateSection extends Component {\r\n\r\n  constructor(props) {\r\n    super(props);\r\n    this.state = {\r\n      buttons: [\r\n        { title: \"N\", value: \"\" },\r\n        { title: \"H\", value: \":hover\" },\r\n        { title: \"A\", value: \".active\" },\r\n        { title: \"F\", value: \":focus\" },\r\n        { title: \"E\", value: \".state-error\" },\r\n        { title: \"D\", value: \".state-disabled\" },\r\n      ]\r\n    }\r\n  }\r\n\r\n  componentWillUnmount() {\r\n    this.props.dispatch(setCurrentState(\"N\", \"\"));\r\n  }\r\n\r\n  setCurrentState(button) {\r\n    this.props.dispatch(setCurrentState(button.title, button.value));\r\n  }\r\n\r\n  render() {\r\n    return (\r\n      <div className=\"state-section\">\r\n        {\r\n          this.state.buttons.map((button, index) => {\r\n            return <button\r\n              key={index}\r\n              className={\"state-section__button \" + (this.props.currentState.title === button.title ? \"state-section__button_active\" : \"\")}\r\n              onClick={() => this.setCurrentState(button)}\r\n            >{button.title}</button>\r\n          })\r\n        }\r\n      </div>\r\n    )\r\n  }\r\n};\r\n\r\nconst mapStateToProps = (state) => {\r\n  return {\r\n    currentState: state.currentState\r\n  }\r\n}\r\n\r\nexport default connect(mapStateToProps, null)(StateSection);\r\n","import React, { Component } from \"react\";\r\nimport { connect } from \"react-redux\";\r\nimport ContentIcon from \"../../svgs/content.svg\";\r\nimport StyleIcon from \"../../svgs/style.svg\";\r\nimport AdvancedIcon from \"../../svgs/advanced.svg\";\r\nimport {\r\n  TAB_ADVANCED,\r\n  TAB_CONTENT,\r\n  TAB_STYLE\r\n} from \"../classes/modules/ControllersManager\";\r\nimport PanelTabContent from \"./PanelTabContent\";\r\nimport DynamicContent from \"./DynamicContent/DynamicContent\";\r\nimport Controller from \"../classes/Controller\";\r\nimport { setCurrentTab } from \"../store/active-settings-tab/actions\";\r\nimport { getCurrentTab, getElementState } from \"../store/store\";\r\nimport StateSection from \"./StateSection\";\r\nimport { setCurrentState } from \"../store/state-section/actions\";\r\n\r\nclass SettingsPanel extends Component {\r\n  constructor(props) {\r\n    super(props);\r\n    this.state = {\r\n      activeTab: \"content\"\r\n    };\r\n  }\r\n\r\n  /**\r\n   *   \r\n   * @param activeTab\r\n   */\r\n  setActiveTab(activeTab) {\r\n    this.setState({\r\n      ...this.state,\r\n      activeTab\r\n    });\r\n    this.props.setCurrentTab(activeTab);\r\n  }\r\n\r\n  componentDidMount() {\r\n    this.props.setCurrentTab(this.state.activeTab);\r\n  }\r\n\r\n  render() {\r\n    let controllersManager = window.controllersManager;\r\n    let sections = [];\r\n    if (this.props.currentElement.getName) {\r\n      let allControllersPairs = _.toPairs(\r\n        controllersManager.getControls(this.props.currentElement.getName())\r\n      );\r\n      allControllersPairs.forEach(pair => {\r\n        pair[1].forEach(section => {\r\n          section.controls = section.controls.map(control => {\r\n            return {\r\n              ...control,\r\n              controller: new Controller(control)\r\n            };\r\n          });\r\n        });\r\n        if (pair[0] === this.state.activeTab) {\r\n          sections = [...pair[1]];\r\n        }\r\n      });\r\n    }\r\n\r\n    let contentTabClasses =\r\n      \"panel-tab d-flex \" +\r\n      (this.state.activeTab === TAB_CONTENT ? \"active\" : \"\");\r\n    let styleTabClasses =\r\n      \"panel-tab d-flex \" +\r\n      (this.state.activeTab === TAB_STYLE ? \"active\" : \"\");\r\n    let advancedTabClasses =\r\n      \"panel-tab d-flex \" +\r\n      (this.state.activeTab === TAB_ADVANCED ? \"active\" : \"\");\r\n    return (\r\n      <div className=\"panel settings-panel d-flex\">\r\n        <div className=\"panel-tabs d-flex\">\r\n          <button\r\n            className={contentTabClasses}\r\n            onClick={() => this.setActiveTab(TAB_CONTENT)}\r\n          >\r\n            <span className=\"panel-tab__icon\">\r\n              <ContentIcon />\r\n            </span>\r\n            <span className=\"panel-tab__text\">Content</span>\r\n          </button>\r\n          <button\r\n            className={styleTabClasses}\r\n            onClick={() => this.setActiveTab(TAB_STYLE)}\r\n          >\r\n            <span className=\"panel-tab__icon\">\r\n              <StyleIcon />\r\n            </span>\r\n            <span className=\"panel-tab__text\">Style</span>\r\n          </button>\r\n          <button\r\n            className={advancedTabClasses}\r\n            onClick={() => this.setActiveTab(TAB_ADVANCED)}\r\n          >\r\n            <span className=\"panel-tab__icon\">\r\n              <AdvancedIcon />\r\n            </span>\r\n            <span className=\"panel-tab__text\">Advanced</span>\r\n          </button>\r\n        </div>\r\n        {this.state.activeTab === \"style\" && <StateSection />}\r\n        <PanelTabContent sections={sections} />\r\n      </div>\r\n    );\r\n  }\r\n}\r\n\r\nfunction mapStateToProps(state) {\r\n  return {\r\n    currentElement: state.currentElement.currentElement,\r\n    currentState: state.currentState\r\n  };\r\n}\r\n\r\nexport default connect(mapStateToProps, { setCurrentTab, setCurrentState })(\r\n  SettingsPanel\r\n);\r\n","import React, { Component } from \"react\";\r\nimport { connect } from \"react-redux\";\r\n\r\nclass EditorWindow extends Component {\r\n\r\n  constructor(props) {\r\n    super(props);\r\n    this.state = {\r\n    };\r\n  }\r\n\r\n  render() {\r\n    return <div style={{ width: this.props.currentScreen.width, height: this.props.currentScreen.height }} className={\"editor-window\"} id=\"editorWindow\">\r\n      {!this.props.historyStoreActive && <div className=\"blocking-layer\" />}\r\n      <iframe src=\"/admin/editor-content\" id=\"editorContent\" width=\"100%\" />\r\n    </div>\r\n  }\r\n}\r\n\r\nfunction mapStateToProps(state) {\r\n  return {\r\n    currentScreen: state.currentScreen,\r\n    historyStoreActive: state.historyStore.active\r\n  }\r\n}\r\n\r\n\r\nexport default connect(mapStateToProps)(EditorWindow)","import React, { Component } from \"react\";\r\nimport { useSelector } from \"react-redux\";\r\nimport { iconsManager } from \"../../../../front-app/src/js/helpers\";\r\nimport { getEditor, getTemplateDataStorage, getFactory } from \"../helpers\";\r\nimport Resource from \"../classes/Resource\";\r\nimport {\r\n  setActiveHistoryStore,\r\n  addHistoryStoreItem\r\n} from \"../store/history-store/actions\";\r\n\r\nimport UserSvg from \"../../../../admin/src/svgs/user.svg\";\r\nimport StartFilled from \"../../../../admin/src/svgs/start-filled.svg\";\r\nimport Scrollbars from \"react-custom-scrollbars\";\r\nimport { changeTemplateStatus } from \"../store/template-status/actions\";\r\nimport CONSTANTS from \"../consts\";\r\n\r\nclass HistoryPanel extends Component {\r\n  constructor(props) {\r\n    super(props);\r\n    this.state = {\r\n      activeTab: \"actions\"\r\n    };\r\n  }\r\n\r\n  setActiveTab(activeTab) {\r\n    return () => {\r\n      this.setState(state => ({\r\n        ...state,\r\n        activeTab\r\n      }));\r\n    };\r\n  }\r\n\r\n  renderTabContent() {\r\n    switch (this.state.activeTab) {\r\n      case \"actions\":\r\n        return <ActionsTabContent />;\r\n      case \"revision\":\r\n        return <RevisionTabContent />;\r\n      default:\r\n        return \"\";\r\n    }\r\n  }\r\n\r\n  render() {\r\n    let actionsTabClasses =\r\n      \"history-panel__tab \" +\r\n      (this.state.activeTab === \"actions\" ? \"history-panel__tab--active\" : \"\");\r\n    let revisionTabClasses =\r\n      \"history-panel__tab \" +\r\n      (this.state.activeTab === \"revision\" ? \"history-panel__tab--active\" : \"\");\r\n\r\n    return (\r\n      <div className=\"history-panel\">\r\n        <div className=\"history-panel__tabs\">\r\n          <button\r\n            onClick={this.setActiveTab(\"actions\")}\r\n            className={actionsTabClasses}\r\n          >\r\n            <span>ACTIONS</span>\r\n          </button>\r\n          <button\r\n            onClick={this.setActiveTab(\"revision\")}\r\n            className={revisionTabClasses}\r\n          >\r\n            <span>REVISION</span>\r\n          </button>\r\n        </div>\r\n        <div className=\"history-panel__tab-content\">\r\n          {this.renderTabContent()}\r\n        </div>\r\n      </div>\r\n    );\r\n  }\r\n}\r\n\r\nconst ActionsTabContent = () => {\r\n  const controllerHistory = window.controllerHistory;\r\n  const historyStore = useSelector(state => state.historyStore.history);\r\n  const current = useSelector(state => state.historyStore.current);\r\n\r\n  const handlerHistory = index => {\r\n    return () => {\r\n      if (current > index) {\r\n        for (let i = 0; i < current - index; i++) {\r\n          controllerHistory.undo();\r\n        }\r\n      } else if (current < index) {\r\n        for (let i = 0; i < index - current; i++) {\r\n          controllerHistory.redo();\r\n        }\r\n      }\r\n    };\r\n  };\r\n\r\n  return (\r\n    <div className=\"history-panel__content\">\r\n      <Scrollbars autoHide autoHideTimeout={500} autoHideDuration={200}>\r\n        <div\r\n          key={-1}\r\n          className={\r\n            current === -1\r\n              ? \"history-panel__restore-item history-panel__restore-item--active\"\r\n              : \"history-panel__restore-item\"\r\n          }\r\n          onClick={handlerHistory(-1)}\r\n        >\r\n          <span className=\"history-panel__restore-item-title\">start edit</span>\r\n          {current === -1\r\n            ? iconsManager().renderIcon(\"check\", {\r\n                style: { width: 20, height: 20 },\r\n                className: \"history-panel__restore-item-icon\"\r\n              })\r\n            : \"\"}\r\n        </div>\r\n        {historyStore.map((item, index) => {\r\n          let title = \"\";\r\n          if (item.data && item.data.element) {\r\n            title = item.data.element.getTitle();\r\n          }\r\n\r\n          let type = \"\";\r\n          switch (item.type) {\r\n            case \"ADD\":\r\n              type = \"Added\";\r\n              break;\r\n            case \"EDIT\":\r\n              type = \"Edited\";\r\n              break;\r\n            case \"DELETE\":\r\n              type = \"Removed\";\r\n              break;\r\n            case \"REVISION\":\r\n              title = \"Revision\";\r\n              break;\r\n          }\r\n\r\n          let restoreItemClasses = \"history-panel__restore-item \";\r\n          if (current === index) {\r\n            restoreItemClasses += \"history-panel__restore-item--active \";\r\n          }\r\n\r\n          return (\r\n            <div\r\n              key={index}\r\n              className={restoreItemClasses}\r\n              onClick={handlerHistory(index)}\r\n            >\r\n              <span className=\"history-panel__restore-item-title\">{title}</span>\r\n              <span className=\"history-panel__restore-item-type\">{type}</span>\r\n              {current === index\r\n                ? iconsManager().renderIcon(\"check\", {\r\n                    style: { width: 20, height: 20 },\r\n                    className: \"history-panel__restore-item-icon\"\r\n                  })\r\n                : \"\"}\r\n            </div>\r\n          );\r\n        })}\r\n        <div className=\"history-panel__actions-tab-subscribe\">\r\n          Switch to Revisions tab for older version\r\n        </div>\r\n      </Scrollbars>\r\n    </div>\r\n  );\r\n};\r\n\r\nconst RevisionTabContent = () => {\r\n  const [arrayRevisions, setArrayRevisions] = React.useState([]);\r\n  const [currentRevision, setCurrentRevision] = React.useState(-1);\r\n  const [oldRootElement, setOldRootElement] = React.useState();\r\n\r\n  React.useEffect(() => {\r\n    setOldRootElement(_.cloneDeep(getTemplateDataStorage().rootElement));\r\n    let templateId = appStore.getState().templateData.id;\r\n\r\n    const fetchRevisions = async () => {\r\n      let arrayRevisions = await new Resource({\r\n        route: `/admin/ajax/templates/${templateId}/reviews`\r\n      }).getAll();\r\n      setArrayRevisions(arrayRevisions.reverse());\r\n    };\r\n    fetchRevisions(0);\r\n    window.parent.appStore.dispatch(setActiveHistoryStore(false));\r\n    return () => {\r\n      window.parent.appStore.dispatch(setActiveHistoryStore(true));\r\n    };\r\n  }, []);\r\n\r\n  const handleClickDiscard = () => {\r\n    getTemplateDataStorage().replaceAll(oldRootElement);\r\n    getEditor().showWidgetsPanel();\r\n  };\r\n\r\n  const handleClickApply = () => {\r\n    window.parent.appStore.dispatch(\r\n      addHistoryStoreItem(\"REVISION\", {\r\n        old: oldRootElement,\r\n        new: _.cloneDeep(getTemplateDataStorage().rootElement)\r\n      })\r\n    );\r\n    \r\n    window.parent.appStore.dispatch(changeTemplateStatus(CONSTANTS.TEMPLATE_NEED_UPDATE));\r\n    getEditor().showWidgetsPanel();\r\n  };\r\n\r\n  const handleSetCurrentRevision = (index, item) => async () => {\r\n    setCurrentRevision(index);\r\n    let response = await new Resource({\r\n      route: `/admin/ajax/templates/${item.parent_template}/reviews/${item.id}`\r\n    }).getAll();\r\n    let revisionRootElement = JSON.parse(response.data[0].data);\r\n\r\n    let parsedData = getFactory().parseData(revisionRootElement);\r\n    getTemplateDataStorage().replaceAll(parsedData);\r\n  };\r\n  return (\r\n    <React.Fragment>\r\n      <div className=\"history-panel__revision-actions\">\r\n        <div className=\"history-panel__discard\" onClick={handleClickDiscard}>\r\n          {iconsManager().renderIcon(\"deleteOne\", {\r\n            style: { width: 14, height: 14 },\r\n            className: \"history-panel__discard-icon\"\r\n          })}\r\n          DISCARD\r\n        </div>\r\n        <div className=\"history-panel__apply\" onClick={handleClickApply}>\r\n          APPLY\r\n        </div>\r\n      </div>\r\n      <div className=\"history-panel__title\">Revisions</div>\r\n      <div className=\"history-panel__content history-panel__content--revision\">\r\n        <Scrollbars autoHide autoHideTimeout={500} autoHideDuration={200}>\r\n          {arrayRevisions.map((item, index) => {\r\n            let secondsAgo = (Date.now() - Date.parse(item.updated_at)) / 1000;\r\n            let dateString;\r\n            if (secondsAgo < 100) {\r\n              dateString = `${secondsAgo} seconds ago`;\r\n            } else if (secondsAgo < 6000) {\r\n              dateString = `${Math.floor(secondsAgo / 100)} minutes ago`;\r\n            } else if (secondsAgo < 144000) {\r\n              dateString = `${Math.floor(secondsAgo / 6000)} hours ago`;\r\n            } else if (secondsAgo < 4320000) {\r\n              dateString = `${Math.floor(secondsAgo / 144000)} days ago`;\r\n            } else if (secondsAgo < 51840000) {\r\n              dateString = `${Math.floor(secondsAgo / 4320000)} months ago`;\r\n            } else {\r\n              dateString = `${Math.floor(secondsAgo / 51840000)} years ago`;\r\n            }\r\n            let date = new Date(item.updated_at);\r\n            dateString += ` (${date.toLocaleString(\"en\", {\r\n              month: \"short\"\r\n            })} ${date.getDate()} @ ${date.getHours()}:${\r\n              date.getMinutes() > 9\r\n                ? date.getMinutes()\r\n                : `0${date.getMinutes()}`\r\n            })`;\r\n            return (\r\n              <div\r\n                className={\r\n                  index === currentRevision\r\n                    ? \"history-panel__card-revision history-panel__card-revision--active\"\r\n                    : \"history-panel__card-revision\"\r\n                }\r\n                onClick={handleSetCurrentRevision(index, item)}\r\n                key={index}\r\n              >\r\n                <UserSvg className=\"history-panel__card-avatar\" />\r\n                <div className=\"history-panel__card-content\">\r\n                  <div className=\"history-panel__card-time\">{dateString}</div>\r\n                  <div className=\"history-panel__card-author\">\r\n                    Revision by {item.author}\r\n                  </div>\r\n                </div>\r\n                {index === currentRevision && (\r\n                  <StartFilled className=\"history-panel__card-icon\" />\r\n                )}\r\n              </div>\r\n            );\r\n          })}\r\n        </Scrollbars>\r\n      </div>\r\n    </React.Fragment>\r\n  );\r\n};\r\n\r\nexport default HistoryPanel;\r\n","import React, { Component } from \"react\";\r\n\r\nimport { DragSource } from \"react-dnd\";\r\n/**\r\n * Implements the drag source contract.\r\n */\r\nconst cardSource = {\r\n  beginDrag(props) {\r\n    return {\r\n      text: props.text\r\n    };\r\n  }\r\n};\r\n/**\r\n * Specifies the props to inject into your component.\r\n */\r\nfunction collect(connect, monitor) {\r\n  return {\r\n    connectDragSource: connect.dragSource(),\r\n    isDragging: monitor.isDragging()\r\n  };\r\n}\r\nclass NavigationItem extends Component {\r\n  render() {\r\n    const { isDragging, connectDragSource, text, key } = this.props;\r\n    return connectDragSource(\r\n      <div\r\n        key={key}\r\n        style={{ opacity: isDragging ? 0.5 : 1, cursor: \"pointer\" }}\r\n      >\r\n        {text}\r\n      </div>\r\n    );\r\n  }\r\n}\r\n\r\nexport default DragSource(\"CARD\", cardSource, collect)(NavigationItem);\r\n","import React, { Component } from \"react\";\r\nimport { Tree, Icon } from \"@blueprintjs/core\";\r\nimport { connect } from \"react-redux\";\r\nimport NavigationItem from \"./NavigationItem\";\r\nimport {\r\n  editorSetCurrentElementByID,\r\n  deleteCurrentElementByID,\r\n  getEditor\r\n} from \"../helpers\";\r\nimport BaseElement from \"../classes/elements/BaseElement\";\r\nimport store from \"../store/store\";\r\n\r\nconst mapStateToProps = state => {\r\n  return {\r\n    templateData: getEditor().modules.templateDataStorage.getRootElement()\r\n  };\r\n};\r\n\r\nfunction isExpandable(name) {\r\n  switch (name) {\r\n    case \"root-element\":\r\n      return true;\r\n    case \"section\":\r\n      return true;\r\n    case \"section_widget\":\r\n      return true;\r\n    case \"column\":\r\n      return true;\r\n    default:\r\n      return false;\r\n  }\r\n}\r\nclass NavigationPanel extends Component {\r\n  constructor(props) {\r\n    super(props);\r\n    let template = [this.parseTemplate(props.templateData)];\r\n    this.state = {\r\n      template: template,\r\n      dragOver: false,\r\n      isDrag: false\r\n    };\r\n    this.handleExpand = this.handleExpand.bind(this);\r\n    this.handleCollapse = this.handleCollapse.bind(this);\r\n    this.showItem = this.showItem.bind(this);\r\n    this.deleteItem = this.deleteItem.bind(this);\r\n    store.subscribe(this.storeListener.bind(this));\r\n  }\r\n\r\n  handleExpand(node, nodePath) {\r\n    let currentTree = _.cloneDeep(this.state.template);\r\n    let currentNode = Tree.nodeFromPath(nodePath, currentTree);\r\n    currentNode.isExpanded = true;\r\n    this.setState(s => ({ ...s, template: currentTree }));\r\n  }\r\n\r\n  handleCollapse(node, nodePath) {\r\n    let currentTree = _.cloneDeep(this.state.template);\r\n    let currentNode = Tree.nodeFromPath(nodePath, currentTree);\r\n    currentNode.isExpanded = false;\r\n    this.setState(s => ({ ...s, template: currentTree }));\r\n  }\r\n\r\n  showItem(node, nodePath) {\r\n    editorSetCurrentElementByID(node.id);\r\n    getEditor().showSettingsPanel();\r\n  }\r\n\r\n  storeListener() {\r\n    const newTemplate = [\r\n      this.parseTemplate(\r\n        getEditor().modules.templateDataStorage.getRootElement()\r\n      )\r\n    ];\r\n    const currentTemplate = _.cloneDeep(this.state.template, []);\r\n    if (!_.isEqual(newTemplate, currentTemplate)) {\r\n      this.setState(s => ({ ...s, template: newTemplate }));\r\n    }\r\n  }\r\n\r\n  deleteItem(e, elementID) {\r\n    const confirm = window.confirm(\"Are you shure?\");\r\n    e.preventDefault();\r\n    if (confirm) {\r\n      const success = deleteCurrentElementByID(elementID);\r\n      if (success) {\r\n        let currentTree = _.cloneDeep(this.state.template);\r\n        let newTree = this.removeElementFromArray(currentTree, elementID);\r\n        this.setState(s => ({ ...s, template: newTree }));\r\n      }\r\n    }\r\n  }\r\n\r\n  removeElementFromArray(template, elementID) {\r\n    return template.filter(function f(item) {\r\n      if (item.childNodes.length > 0) {\r\n        return (item.childNodes = item.childNodes.filter(f)).length;\r\n      } else if (item.id === elementID) return false;\r\n      else return true;\r\n    });\r\n  }\r\n\r\n  /**\r\n   *\r\n   * @param {BaseElement} template\r\n   */\r\n  parseTemplate(template) {\r\n    const expandable = isExpandable(template.getName());\r\n    return {\r\n      label: (\r\n        <NavigationItem\r\n          key={template.id}\r\n          text={template.getName()}\r\n          id={template.id}\r\n        ></NavigationItem>\r\n      ),\r\n      depth: 2,\r\n      name: template.getName(),\r\n      icon: expandable && \"folder-close\",\r\n      childNodes: template.children.map((item, index) =>\r\n        this.parseTemplate(item)\r\n      ),\r\n      hasCaret: expandable,\r\n      key: template.id,\r\n      isExpanded: expandable,\r\n      id: template.id,\r\n      onClick: (node, e) => this.showItem(e, node.id),\r\n      [parent != null && \"parent\"]: parent,\r\n      secondaryLabel: template.name !== \"root-element\" && (\r\n        <div>\r\n          <Icon\r\n            icon=\"trash\"\r\n            style={{ cursor: \"pointer\" }}\r\n            onClick={e => this.deleteItem(e, template.id)}\r\n          />\r\n        </div>\r\n      )\r\n    };\r\n  }\r\n\r\n  render() {\r\n    return (\r\n      <div style={{ overflow: \"auto\" }}>\r\n        <Tree\r\n          contents={this.state.template}\r\n          onNodeExpand={this.handleExpand}\r\n          onNodeCollapse={this.handleCollapse}\r\n          onNodeDoubleClick={this.showItem}\r\n        />\r\n      </div>\r\n    );\r\n  }\r\n}\r\n\r\nexport default connect(mapStateToProps)(NavigationPanel);\r\n","import React, { Component } from \"react\";\r\nimport styled from \"styled-components\";\r\n\r\nconst StyledWrapper = styled.div`\r\n  padding: 25px 15px 0;\r\n  width: 100%;\r\n  overflow: auto;\r\n`;\r\n\r\nconst Heading = styled.p`\r\n  text-transform: uppercase;\r\n  font-size: 11px;\r\n`;\r\n\r\nconst MenuGroup = styled.div``;\r\n\r\nconst MenuItems = styled.div`\r\n  margin: 15px 0 25px;\r\n  -webkit-border-radius: 5px;\r\n  border-radius: 5px;\r\n  overflow: hidden;\r\n`;\r\n\r\nconst Item = styled.div`\r\n  display: table;\r\n  width: 100%;\r\n  height: 40px;\r\n  cursor: pointer;\r\n  margin-bottom: 1px;\r\n  padding: 10px;\r\n  background-color: #fff;\r\n`;\r\n\r\nclass CommonPanel extends Component {\r\n  render() {\r\n    return (\r\n      <StyledWrapper>\r\n        <MenuGroup>\r\n          <Heading>Design System</Heading>\r\n          <MenuItems>\r\n            <Item onClick={this.props.showGlobalColorsPanel}>\r\n              Global Colors\r\n            </Item>\r\n            <Item onClick={this.props.showGlobalFontsPanel}>Global Fonts</Item>\r\n          </MenuItems>\r\n        </MenuGroup>\r\n      </StyledWrapper>\r\n    );\r\n  }\r\n}\r\nexport default CommonPanel;\r\n","import React, { Component } from \"react\";\r\nimport styled from \"styled-components\";\r\nimport {\r\n  ControlGroup,\r\n  InputGroup,\r\n  Button,\r\n  Divider,\r\n  Icon\r\n} from \"@blueprintjs/core\";\r\nimport { SketchPicker } from \"react-color\";\r\nimport invert from \"invert-color\";\r\nimport Resource from \"../classes/Resource\";\r\nimport { connect } from \"react-redux\";\r\nimport { setGlobalColors } from \"../store/altrp-global-colors/actions\";\r\nimport { createGlobalColor, getTemplateDataStorage } from \"../helpers\";\r\nimport BaseElement from \"../classes/elements/BaseElement\";\r\n\r\nconst Panel = styled.div`\r\n  background-color: #fff;\r\n  padding: 25px 15px;\r\n  width: 100%;\r\n  margin: 20px 0;\r\n  overflow: auto;\r\n`;\r\n\r\nconst mapStateToProps = state => ({\r\n  colors: state.globalStyles.colors\r\n});\r\n\r\nconst mapDispatchToProps = dispatch => ({\r\n  setColors: colors => dispatch(setGlobalColors(colors))\r\n});\r\n\r\nclass GlobalColors extends Component {\r\n  constructor(props) {\r\n    super(props);\r\n    this.state = {\r\n      colors: props.colors\r\n    };\r\n    this.toggleColorPanel = this.toggleColorPanel.bind(this);\r\n    this.colorChange = this.colorChange.bind(this);\r\n    this.nameChange = this.nameChange.bind(this);\r\n    this.addItem = this.addItem.bind(this);\r\n    this.deleteItem = this.deleteItem.bind(this);\r\n    this.debounceChangeColor = this.debounceChangeColor.bind(this);\r\n    this.debounceChangeName = this.debounceChangeName.bind(this);\r\n    this.globalStyleResource = new Resource({\r\n      route: \"/admin/ajax/global_template_styles\"\r\n    });\r\n  }\r\n\r\n  toggleColorPanel(id) {\r\n    const colors = _.cloneDeep(this.state.colors, []);\r\n    let color = _.find(colors, color => color.id === id);\r\n    color.colorPanelOpen = !color.colorPanelOpen;\r\n    this.setState(s => ({ ...s, colors: colors }));\r\n  }\r\n\r\n  colorChange = (value, id) => {\r\n    const rgba = `rgba(${value.rgb.r}, ${value.rgb.g}, ${value.rgb.b}, ${value.rgb.a})`;\r\n    const hex = value.hex;\r\n    const rgb = value.rgb;\r\n    const colors = _.cloneDeep(this.state.colors, []);\r\n    let currentColor = _.find(colors, color => color.id === id);\r\n    currentColor.color = rgba;\r\n    currentColor.colorPickedHex = hex;\r\n    currentColor.colorRGB = rgb;\r\n    this.setState(\r\n      s => ({ ...s, colors: colors }),\r\n      () => this.props.setColors(colors)\r\n    );\r\n    const data = {\r\n      color: rgba,\r\n      colorPickedHex: hex,\r\n      colorRGB: rgb,\r\n      guid: currentColor.guid\r\n    };\r\n    this.debounceChangeColor(data, id);\r\n  };\r\n\r\n  debounceChangeColor = _.debounce((color, id) => {\r\n    this.globalStyleResource\r\n      .put(id, {\r\n        settings: { ...color },\r\n        type: \"color\"\r\n      })\r\n      .then(res => {\r\n        getTemplateDataStorage()\r\n          .getRootElement()\r\n          .children.forEach(child => {\r\n            this.recursiveWalkTree(child, color.guid, color);\r\n          });\r\n      });\r\n  }, 50);\r\n\r\n  /**\r\n   *\r\n   * @param {BaseElement} template\r\n   * @param {String} guid\r\n   * @param {*} color\r\n   */\r\n  recursiveWalkTree(template, guid, color) {\r\n    template.children?.forEach(\r\n      /**\r\n       * @param {BaseElement} child\r\n       */\r\n      child => {\r\n        if (child.hasGlobal(guid)) {\r\n          child.updateAllGlobals(guid, color);\r\n        }\r\n        child.children.length > 0 &&\r\n          this.recursiveWalkTree(child.children, guid, color);\r\n      }\r\n    );\r\n  }\r\n\r\n  nameChange = (value, id) => {\r\n    if (value.length === 0) throw \"Value cannot be empty\";\r\n    const colors = _.cloneDeep(this.state.colors, []);\r\n    let color = _.find(colors, color => color.id === id);\r\n    color.name = value;\r\n    this.setState(\r\n      s => ({ ...s, colors: colors }),\r\n      () => this.props.setColors(colors)\r\n    );\r\n    this.debounceChangeName(value, id);\r\n  };\r\n\r\n  debounceChangeName = _.debounce((value, id) => {\r\n    this.globalStyleResource.put(id, {\r\n      settings: { name: value },\r\n      type: \"color\"\r\n    });\r\n  }, 150);\r\n\r\n  addItem(e) {\r\n    const color = {};\r\n    color.settings = JSON.stringify(createGlobalColor());\r\n    color.type = \"color\";\r\n    this.globalStyleResource.post(color).then(response => {\r\n      const colors = [\r\n        ...this.state.colors,\r\n        {\r\n          id: response.id,\r\n          guid: response.guid,\r\n          ...response.settings\r\n        }\r\n      ];\r\n      this.setState(\r\n        s => ({ ...s, colors: colors }),\r\n        () => this.props.setColors(colors)\r\n      );\r\n    });\r\n  }\r\n\r\n  deleteItem(id) {\r\n    const confirm = window.confirm(\"Are you shure?\");\r\n    if (confirm) {\r\n      let colors = _.cloneDeep(this.state.colors, []);\r\n      colors = colors.filter(item => item.id !== id);\r\n      this.setState(\r\n        s => ({ ...s, colors: colors }),\r\n        () => this.props.setColors(colors)\r\n      );\r\n      this.globalStyleResource.delete(id);\r\n    }\r\n  }\r\n\r\n  render() {\r\n    return (\r\n      <Panel>\r\n        {this.state.colors.length > 0 ? (\r\n          this.state.colors.map(item => {\r\n            return (\r\n              <>\r\n                <ControlGroup\r\n                  key={item.id}\r\n                  style={{\r\n                    marginBottom: \"10px\"\r\n                  }}\r\n                >\r\n                  <InputGroup\r\n                    style={{\r\n                      width: \"140px\"\r\n                    }}\r\n                    onChange={e => this.nameChange(e.target.value, item.id)}\r\n                    value={item.name}\r\n                  ></InputGroup>\r\n\r\n                  <Button onClick={e => this.deleteItem(item.id)}>\r\n                    <Icon icon=\"trash\"></Icon>\r\n                  </Button>\r\n                  <Button\r\n                    onClick={e => this.toggleColorPanel(item.id)}\r\n                    style={{\r\n                      backgroundColor: item.color,\r\n                      width: \"70px\",\r\n                      color: invert(item.colorPickedHex, {\r\n                        black: \"#000000\",\r\n                        white: \"#FFFFFF\",\r\n                        threshold: 0.45\r\n                      })\r\n                    }}\r\n                  >\r\n                    {item.colorPickedHex}\r\n                  </Button>\r\n                </ControlGroup>\r\n                <div\r\n                  className={!item.colorPanelOpen ? \" control-color-hide\" : \"\"}\r\n                >\r\n                  <SketchPicker\r\n                    presetColors={[]}\r\n                    color={item.color}\r\n                    onChange={color => this.colorChange(color, item.id)}\r\n                    style={{\r\n                      padding: 0,\r\n                      boxShadow: \"none\"\r\n                    }}\r\n                  ></SketchPicker>\r\n                </div>\r\n              </>\r\n            );\r\n          })\r\n        ) : (\r\n          <div>Color list empty</div>\r\n        )}\r\n        <Divider></Divider>\r\n        <Button style={{ width: \"100%\" }} onClick={this.addItem}>\r\n          Add Item\r\n        </Button>\r\n      </Panel>\r\n    );\r\n  }\r\n}\r\nexport default connect(mapStateToProps, mapDispatchToProps)(GlobalColors);\r\n","import Chevron from \"../../svgs/chevron.svg\";\r\nimport React, { Component } from \"react\";\r\nimport { connect } from \"react-redux\";\r\nimport { getEditor } from \"../helpers\";\r\nimport CONSTANTS from \"../consts\";\r\nconst TEMPLATE_TYPES_WITHOUT_CONDITIONS = [\r\n  'email',\r\n];\r\nclass UpdateButton extends Component {\r\n  constructor(props) {\r\n    super(props);\r\n    this.state = {\r\n      isShowed: false\r\n    };\r\n    this.saveTemplate = this.saveTemplate.bind(this);\r\n  }\r\n  saveTemplate(e) {\r\n    getEditor().modules.saveImportModule.saveTemplate();\r\n  }\r\n  showModal() {\r\n    this.props.toggleModalWindow();\r\n  }\r\n\r\n  render() {\r\n    let buttonClasses = \"btn font_montserrat font_500 btn_grey\";\r\n    switch (this.props.templateStatus) {\r\n      case CONSTANTS.TEMPLATE_UPDATED:\r\n        {\r\n          buttonClasses += \" btn_disabled \";\r\n        }\r\n        break;\r\n      case CONSTANTS.TEMPLATE_NEED_UPDATE:\r\n        {\r\n          buttonClasses += \" btn_active \";\r\n        }\r\n        break;\r\n    }\r\n    let showTemplateConditions = true;\r\n    if(this.props.templateData.template_type\r\n        && (TEMPLATE_TYPES_WITHOUT_CONDITIONS.indexOf(this.props.templateData.template_type) >= 0)){\r\n      showTemplateConditions = false;\r\n    }\r\n    return (\r\n      <div className={\"control-group d-flex \" + (showTemplateConditions ? '' : 'control-group_single')}>\r\n        <button className={buttonClasses} onClick={this.saveTemplate}>\r\n          UPDATE\r\n        </button>\r\n        {showTemplateConditions && <button onClick={() => this.showModal()} className=\"btn btn_grey\">\r\n          <Chevron className=\"icon\" />\r\n        </button>}\r\n      </div>\r\n    );\r\n  }\r\n}\r\n\r\nfunction mapStateToProps(state) {\r\n  return {\r\n    templateStatus: state.templateStatus.status,\r\n    templateData: state.templateData,\r\n  };\r\n}\r\nexport default connect(mapStateToProps)(UpdateButton);\r\n","import React, {Component} from \"react\";\r\nimport { connect } from \"react-redux\";\r\nimport Times from \"../../../svgs/times.svg\";\r\nimport { assetsToggle } from \"../../store/assets-browser/actions\";\r\nimport Resource from \"../Resource\";\r\nimport '../../../sass/assets-browser.scss';\r\n\r\n\r\nclass AssetsBrowser extends Component {\r\n  constructor(props) {\r\n    super(props);\r\n    this.tabClick = this.tabClick.bind(this);\r\n    this.toggleBrowser = this.toggleBrowser.bind(this);\r\n    this.selectAsset = this.selectAsset.bind(this);\r\n    this.chooseAsset = this.chooseAsset.bind(this);\r\n    this.state = {\r\n      // activeTab: 'icons',\r\n      activeTab: \"media\",\r\n      tabs: [\r\n        // {\r\n        //   name: 'upload',\r\n        //   title: 'Upload Media File',\r\n        // },\r\n        {\r\n          name: \"icons\",\r\n          title: \"Icons Library\"\r\n        },\r\n        {\r\n          name: \"media\",\r\n          title: \"Media Library\"\r\n        },\r\n        {\r\n          name: \"video\", //TODO:       Media\r\n          title: \"Video Library\"\r\n        }\r\n      ],\r\n      svgAssets: [],\r\n      assets: this.getAssets(\"media\"),\r\n      // assets: this.getAssets('icons'),\r\n      selectedAsset: null,\r\n      mediaAssets: [],\r\n      videoAssets: []\r\n    };\r\n    this.mediaResource = new Resource({ route: \"/admin/ajax/media?type=image\" });\r\n    this.svgResource  =new Resource({ route: \"/admin/ajax/media?type=svg\" });\r\n    this.videoResource = new Resource({ route: \"/admin/ajax/media?type=media\" });\r\n  }\r\n\r\n  componentDidUpdate(prevProps, nextContext) {\r\n    if(this.props.tabs && prevProps.tabs !== this.props.tabs) {\r\n      let tabs = [...this.state.tabs];\r\n      let activeTab;\r\n      tabs = tabs.filter(tab=>{\r\n        if(this.props.tabs.indexOf(tab.name) !== -1 && ! activeTab){\r\n          activeTab = tab.name;\r\n        }\r\n        return this.props.tabs.indexOf(tab.name) !== -1;\r\n      });\r\n      if(! activeTab){\r\n        activeTab = 'media';\r\n      }\r\n      this.setState(state=>({...state, tabs, activeTab }), ()=>{this.setActiveTab(activeTab)})\r\n    }\r\n  }\r\n\r\n  async componentDidMount() {\r\n    try {\r\n      this.videoResource.getAll()\r\n        .then(videoAssets => this.setState({ videoAssets }));\r\n\r\n      let resSvg = await this.svgResource.getAll();\r\n      this.setState(state => {\r\n        return { ...state, svgAssets: resSvg };\r\n      });\r\n\r\n      let resMedia = await this.mediaResource.getAll();\r\n      this.setState(state => {\r\n        state = { ...state, mediaAssets: resMedia };\r\n        if (state.activeTab === \"media\") {\r\n          state.assets = resMedia;\r\n        }\r\n        return state;\r\n      });\r\n    } catch (error) {\r\n      console.log(\"error\", error);\r\n    }\r\n\r\n    document.addEventListener('keydown', (event) => {\r\n      if (event.key === \"Escape\") {\r\n          this.toggleBrowser();\r\n      }\r\n    });\r\n  }\r\n  getAssets(tab) {\r\n    if (! tab) {\r\n      tab = this.state.activeTab;\r\n    }\r\n\r\n    switch (tab) {\r\n      case \"icons\": {\r\n        return this.state.svgAssets\r\n        // return [ ...iconsManager().getIconsList(), ...this.state.svgAssets];\r\n      }\r\n      case \"media\": {\r\n        return this.state ? this.state.mediaAssets : [];\r\n      }\r\n    }\r\n    return [];\r\n  }\r\n\r\n  selectAsset(e) {\r\n    let selectedAsset = e.currentTarget.dataset.assetname;\r\n    this.setState(state => {\r\n      return { ...state, selectedAsset };\r\n    });\r\n  }\r\n\r\n  tabClick(e) {\r\n    this.setActiveTab(e.target.dataset.tab);\r\n  }\r\n\r\n  setActiveTab(tab) {\r\n    this.setState(state => {\r\n      return { ...state, activeTab: tab, assets: this.getAssets(tab) };\r\n    });\r\n  }\r\n\r\n  toggleBrowser() {\r\n    this.setState(state => {\r\n      return { ...state, selectedAsset: null };\r\n    });\r\n    this.props.dispatch(assetsToggle());\r\n  }\r\n\r\n  chooseAsset() {\r\n    let asset;\r\n    this.state.assets.forEach(item => {\r\n      if (item.name === this.state.selectedAsset) {\r\n        asset = item;\r\n      }\r\n    });\r\n    if (!asset) {\r\n      throw `Asset with name ${this.state.selectedAsset} not found in Assets Browser (${this.state.activeTab})!`;\r\n    }\r\n    this.props.onChoose(asset);\r\n    this.setState(state => {\r\n      return { ...state, selectedAsset: null };\r\n    });\r\n    this.props.dispatch(assetsToggle());\r\n  }\r\n\r\n  render() {\r\n    const { videoAssets, activeTab } = this.state;\r\n    let classes = \"assets-browser\";\r\n    if (this.props.active) {\r\n      classes += \" assets-browser_active\";\r\n    }\r\n    let buttonClasses = \"btn\";\r\n    if (!this.state.selectedAsset) {\r\n      buttonClasses += \" btn_disabled\";\r\n    } else {\r\n      buttonClasses += \" btn_success\";\r\n    }\r\n    if(! this.props.active){\r\n      return  '';\r\n    }\r\n    return (\r\n      <div className={classes}>\r\n        <div className=\"assets-browser__bg\" onClick={this.toggleBrowser} />\r\n        <div className=\"assets-browser-content\">\r\n          <div className=\"assets-browser-top\">\r\n            <div className=\"caption\">Append Media</div>\r\n            <button className=\"btn btn_bare assets-browser__close\" onClick={this.toggleBrowser} >\r\n              <Times className=\"icon\"/>\r\n            </button>\r\n            <div className=\"assets-browser-nav\">\r\n              {this.state.tabs.map(tab => {\r\n                let tabClasses = \"assets-browser__tab\";\r\n                if (this.state.activeTab === tab.name) {\r\n                  tabClasses += \" assets-browser__tab_active\";\r\n                }\r\n                return (\r\n                  <button\r\n                    className={tabClasses}\r\n                    onClick={this.tabClick}\r\n                    key={tab.name}\r\n                    data-tab={tab.name}\r\n                  >\r\n                    {tab.title}\r\n                  </button>\r\n                );\r\n              })}\r\n            </div>\r\n          </div>\r\n          {this.state.assets.length ? (\r\n            <div className=\"assets-browser-choose-frame\">\r\n              {this.state.assets.map(asset => {\r\n                let AssetContent;\r\n                let classes = \"asset-choose\";\r\n                let assetProps = {\r\n                  className: \"asset-choose__content\"\r\n                };\r\n                if (this.state.activeTab === \"icons\") {\r\n                  if(asset.iconComponent) {\r\n                    AssetContent = asset.iconComponent;\r\n                  } else {\r\n                    AssetContent = \"img\";\r\n                    asset.name = asset.filename;\r\n                    assetProps.src = asset.url;\r\n                  }\r\n\r\n                  classes += \" asset-choose_icon\";\r\n                  // assetProps.viewBox = '0 0 20 20';\r\n                  // assetProps.viewport = '0 0 10 10';\r\n                  assetProps.width = \"35\";\r\n                  assetProps.height = \"35\";\r\n                }\r\n                if (this.state.activeTab === \"media\") {\r\n                  AssetContent = \"img\";\r\n                  assetProps.src = asset.url;\r\n                  classes += \" asset-choose_media\";\r\n                  asset.name = asset.filename;\r\n                  asset.assetType = \"media\";\r\n                }\r\n                if (this.state.selectedAsset === asset.name) {\r\n                  classes += \" asset-choose_selected\";\r\n                }\r\n                return (\r\n                  <div\r\n                    className={classes}\r\n                    data-assetname={asset.name}\r\n                    key={asset.name}\r\n                    onClick={this.selectAsset}\r\n                  >\r\n                    <AssetContent {...assetProps} />\r\n                  </div>\r\n                );\r\n              })}\r\n            </div>\r\n          ) : (\r\n            \"\"\r\n          )}\r\n          {activeTab === 'video' && <div className=\"assets-browser-choose-frame\">\r\n            {videoAssets.map(video => <div className=\"assets-list__item item col-1\" onClick={this.selectAsset}>\r\n              <svg width=\"43\" height=\"56\" fill=\"none\" xmlns=\"http://www.w3.org/2000/svg\" className=\"item__icon-background\">\r\n                <path d=\"M30.485 0H1.463C.655 0 0 .655 0 1.926V55c0 .345.655 1 1.463 1h40.074c.808 0 1.463-.655 1.463-1V12.978c0-.696-.093-.92-.257-1.085L31.107.257A.884.884 0 0030.485 0z\" fill=\"#F7F8F9\"></path><path d=\"M31 .151V12h11.849L31 .151z\" fill=\"#E0E1E6\"></path><path d=\"M41.537 56H1.463A1.463 1.463 0 010 54.537V39h43v15.537c0 .808-.655 1.463-1.463 1.463z\" fill=\"#7CA727\"></path><path d=\"M18.262 52h-1.86v-6.07L13.96 52h-.806l-2.444-6.07V52H8.863v-8.67h2.587l2.106 5.238 2.106-5.239h2.6V52zM21.83 52h-1.846v-8.67h4.056c.91 0 1.62.268 2.132.805.52.529.78 1.192.78 1.99 0 .788-.26 1.45-.78 1.988-.52.537-1.23.806-2.132.806h-2.21V52zm1.963-4.706c.373 0 .676-.104.91-.312.243-.217.364-.503.364-.858s-.121-.637-.364-.845c-.234-.217-.537-.325-.91-.325H21.83v2.34h1.963zM33.556 52H31.71v-1.794h-4.147V48.75l3.445-5.42h2.548v5.251h1.118v1.625h-1.118V52zm-1.846-3.419v-3.614l-2.34 3.614h2.34z\" fill=\"#fff\"></path><path d=\"M16.923 28a.964.964 0 01-.444-.108.87.87 0 01-.479-.767v-12.25a.87.87 0 01.48-.768.972.972 0 01.94.03l10.153 6.124c.265.161.427.44.427.739 0 .3-.162.577-.427.738l-10.154 6.125a.968.968 0 01-.496.137zm.923-11.532v9.063L25.357 21l-7.51-4.532z\" fill=\"#D5D7DE\"></path><path d=\"M21 35c-7.72 0-14-6.28-14-14S13.28 7 21 7s14 6.28 14 14-6.28 14-14 14zm0-26.133C14.31 8.867 8.867 14.31 8.867 21c0 6.69 5.443 12.133 12.133 12.133 6.69 0 12.133-5.443 12.133-12.133 0-6.69-5.443-12.133-12.133-12.133z\" fill=\"#D5D7DE\"></path>\r\n              </svg>\r\n            </div>)}\r\n          </div>}\r\n          <div className=\"assets-browser-bottom\">\r\n            <button className={buttonClasses} onClick={this.chooseAsset}>\r\n              Choose\r\n            </button>\r\n          </div>\r\n        </div>\r\n      </div>\r\n    );\r\n  }\r\n}\r\n\r\nfunction mapStateToProps(state) {\r\n  return {\r\n    ...state.assetsManagerSettings\r\n  };\r\n}\r\n\r\nexport default connect(mapStateToProps)(AssetsBrowser);\r\n","import React, { Component } from 'react'\r\nimport { connect } from 'react-redux'\r\nimport { setCurrentScreen } from \"../store/responsive-switcher/actions\"\r\nimport { iconsManager } from \"../helpers\"\r\nimport CONSTANTS from '../consts'\r\n\r\nclass ResponsiveDdFooter extends Component {\r\n  constructor(props) {\r\n    super(props);\r\n    this.state = {\r\n      screens: CONSTANTS.SCREENS,\r\n      open: false,\r\n    }\r\n  };\r\n  toggleOpen() {\r\n    this.setState({\r\n      open: !this.state.open,\r\n    })\r\n  };\r\n  setCurrentScreen(screen) {\r\n    this.props.setCurrentScreen(screen);\r\n    this.setState({\r\n      open: !this.state.open,\r\n    })\r\n  }\r\n  render() {\r\n    return (\r\n      <div className=\"responsive-footer-wrapper\">\r\n        <span className={\"responsive-footer-title \" + (this.state.open ? 'responsive-footer-icon__close' : '')} onClick={() => this.toggleOpen()}>{iconsManager().renderIcon(this.props.currentScreen.icon)}</span>\r\n        <div className={\"responsive-footer-submenu \" + (this.state.open ? \"responsive-footer-submenu-open\" : '')} >\r\n          {\r\n            this.state.screens.map(screen => {\r\n              return <button\r\n                className={\"responsive-footer-submenu__item \" + (this.props.currentScreen.id === screen.id ? \"responsive-footer-submenu__item__active\" : '')}\r\n                onClick={() => this.setCurrentScreen(screen)}\r\n                title={screen.name}\r\n                key={screen.id}>\r\n                {iconsManager().renderIcon(screen.icon)}\r\n              </button>\r\n            })\r\n          }\r\n        </div>\r\n      </div>\r\n    )\r\n  };\r\n}\r\n\r\n\r\nfunction mapStateToProps(state) {\r\n  return {\r\n    currentScreen: state.currentScreen,\r\n  }\r\n}\r\n\r\nexport default connect(mapStateToProps, { setCurrentScreen })(ResponsiveDdFooter);\r\n","import React, { Component } from 'react';\r\nimport ('../../sass/dialog-content.scss');\r\nimport { iconsManager } from '../../../../front-app/src/js/helpers';\r\n\r\nclass DialogTab extends Component {\r\n  constructor(props) {\r\n    super(props)\r\n  }\r\n  render() {\r\n    return (\r\n      <div className={\"modal-tab-wrapper \" + (this.props.active ? 'modal-tab-wrapper-active' : '')}>\r\n        <div className=\"modal-tab__image\">\r\n          {\r\n            iconsManager().renderIcon(this.props.tab.icon)\r\n          }\r\n        </div>\r\n        <div className=\"modal-tab__content\">\r\n          <div className=\"modal-tab__title\">{this.props.tab.title}</div>\r\n          <div className=\"modal-tab__description\">{this.props.tab.desc}</div>\r\n        </div>\r\n      </div>\r\n    )\r\n  }\r\n}\r\n\r\nexport default DialogTab;","import React, { Component } from \"react\";\r\nimport (\"../../sass/dialog-content.scss\");\r\nimport { iconsManager } from \"../../../../front-app/src/js/helpers\";\r\nimport Select from \"react-select\";\r\nimport Resource from \"../classes/Resource\";\r\nimport { getEditor, getTemplateId } from \"../helpers\";\r\nimport AltrpSelect from \"../../../../admin/src/components/altrp-select/AltrpSelect\";\r\n\r\nexport default class DialogConditionsTab extends Component {\r\n  constructor(props) {\r\n    super(props);\r\n    this.state = {\r\n      value: [],\r\n      currentLogic: \"include\",\r\n      searchValue: \"\",\r\n      pageOptions: [],\r\n      reportsOptions: []\r\n    };\r\n    this.resource = new Resource({\r\n      route: `/admin/ajax/templates/${getTemplateId()}/conditions`\r\n    });\r\n  }\r\n\r\n  async componentDidMount() {\r\n    let conditions = await this.resource.getAll();\r\n    let pageOptions = await new Resource({\r\n      route: \"/admin/ajax/pages_options\"\r\n    }).getAll();\r\n    let reportsOptions = await new Resource({\r\n      route: \"/admin/ajax/reports_options\"\r\n    }).getAll();\r\n    this.setState({\r\n      value: conditions.data || [],\r\n      pageOptions,\r\n      reportsOptions\r\n      // value: []\r\n    });\r\n  }\r\n\r\n  /**\r\n   *    \r\n   * @param {boolean} close\r\n   * @return {Promise<void>}\r\n   */\r\n  async updateConditions(close = false) {\r\n    let res = await new Resource({\r\n      route: `/admin/ajax/templates/${getTemplateId()}/conditions`\r\n    }).put(\"\", { data: this.state.value });\r\n    if (close) {\r\n      getEditor().toggleModalWindow();\r\n    }\r\n  }\r\n\r\n  addCondition() {\r\n    let randomNumber = Math.floor(1 + Math.random() * (1000 - 1));\r\n    let value = _.cloneDeep(this.state.value);\r\n    value.push({\r\n      object_type: \"all_site\",\r\n      object_ids: [],\r\n      id: randomNumber,\r\n      condition_type: \"include\"\r\n    });\r\n    this.setState(state => ({\r\n      ...state,\r\n      value\r\n    }));\r\n    this.forceUpdate();\r\n  }\r\n\r\n  removeCondition(id) {\r\n    let filteredData = this.state.value.filter(data => data.id !== id);\r\n    this.setState({\r\n      value: filteredData\r\n    });\r\n  }\r\n\r\n  handleChange(e, test) {\r\n    if (e.value === \"include\") {\r\n      this.setState({\r\n        currentLogic: e.value\r\n      });\r\n      return;\r\n    } else if (e.value === \"exclude\") {\r\n      this.setState({\r\n        currentLogic: e.value\r\n      });\r\n      return;\r\n    }\r\n    if (this.state.currentLogic === \"include\") {\r\n      let data = [...this.state.value];\r\n      let index = data.findIndex(obj => obj.id === test.id);\r\n      data[index].include[0] = { ...data[index].include[0], [e.name]: e.value };\r\n      data[index].exclude = [];\r\n      this.setState({\r\n        value: data\r\n      });\r\n    } else if (this.state.currentLogic === \"exclude\") {\r\n      let data = [...this.state.value];\r\n      let index = data.findIndex(obj => obj.id === test.id);\r\n      data[index].exclude[0] = { ...data[index].exclude[0], [e.name]: e.value };\r\n      data[index].include = [];\r\n      this.setState({\r\n        value: data\r\n      });\r\n    }\r\n  }\r\n  /**\r\n   *  object_type  \r\n   * @param {object} e\r\n   * @param {integer} conditionId\r\n   */\r\n  handleObjectTypeChange = (e, conditionId) => {\r\n    let value = _.cloneDeep(this.state.value);\r\n    value.forEach(v => {\r\n      if (v.id === conditionId) {\r\n        v.object_type = e.value;\r\n        v.object_ids = [];\r\n      }\r\n    });\r\n    this.setState(state => ({\r\n      ...state,\r\n      value\r\n    }));\r\n  };\r\n  /**\r\n   *    \r\n   * @param {array} ids\r\n   * @param {integer} conditionId\r\n   */\r\n  handleIdsSelect = (ids, conditionId) => {\r\n    let value = _.cloneDeep(this.state.value);\r\n    value.forEach(v => {\r\n      if (v.id === conditionId && ids !== null) {\r\n        v.object_ids = ids.map(id => id.value);\r\n      }\r\n      if (v.id === conditionId && ids === null) {\r\n        v.object_ids = [];\r\n      }\r\n    });\r\n    this.setState(state => ({\r\n      ...state,\r\n      value\r\n    }));\r\n  };\r\n  /**\r\n   *    \r\n   * @param {array} e\r\n   * @param {integer} conditionId\r\n   */\r\n  handleChangeConditionType = (e, conditionId) => {\r\n    let value = _.cloneDeep(this.state.value);\r\n    value.forEach(v => {\r\n      if (v.id === conditionId) {\r\n        v.condition_type = e.value;\r\n      }\r\n    });\r\n    this.setState(state => ({\r\n      ...state,\r\n      value\r\n    }));\r\n  };\r\n  handleSelect(e) { }\r\n\r\n  render() {\r\n    const logic_options = [\r\n      { name: \"logic_type\", value: \"include\", label: \"Include\" },\r\n      { name: \"logic_type\", value: \"exclude\", label: \"Exclude\" }\r\n    ];\r\n    const main_options = [\r\n      { name: \"type\", value: \"all_site\", label: \"All Site\" },\r\n      { name: \"type\", value: \"page\", label: \"Page\" },\r\n      { name: \"type\", value: \"report\", label: \"Report\" },\r\n      { name: \"type\", value: \"404\", label: \"404 \" },\r\n      // { name: 'type', value: 'model', label: 'Model' },\r\n      // { name: 'type', value: 'not_authorized_page', label: 'Not Authorized' },\r\n      // { name: 'type', value: 'not_found_page', label: 'Not found: 404' },\r\n    ];\r\n    return (\r\n      <div className=\"modal-condition-tab\">\r\n        <div className=\"modal-condition-image\">\r\n          {iconsManager().renderIcon(\"conditions_tab\")}\r\n        </div>\r\n        <div className=\"modal-condition-title\">\r\n          Where Do You Want to Display Your Template?\r\n        </div>\r\n        <div className=\"modal-condition-text\">\r\n          Set the conditions that determine where your Template is used\r\n          throughout your site.\r\n          <br />\r\n          For example, choose 'Entire Site' to display the template across your\r\n          site.\r\n        </div>\r\n        <div className=\"modal-repeater-fields-wrapper\">\r\n          <div className=\"modal-repeater-fields\">\r\n            {this.state.value.map(test => {\r\n              return (\r\n                <div className=\"modal-repeater-field\" key={test.id}>\r\n                  <AltrpSelect\r\n                    onChange={e => this.handleChangeConditionType(e, test.id)}\r\n                    className=\"modal-repeater-field-c1\"\r\n                    options={logic_options}\r\n                    value={\r\n                      _.find(\r\n                        logic_options,\r\n                        o => o.value === test.condition_type\r\n                      ) || logic_options[0]\r\n                    }\r\n                  />\r\n                  <AltrpSelect\r\n                    onChange={value =>\r\n                      this.handleObjectTypeChange(value, test.id)\r\n                    }\r\n                    className=\"modal-repeater-field-c2\"\r\n                    options={main_options}\r\n                    value={\r\n                      _.find(main_options, o => o.value === test.object_type) ||\r\n                      main_options[0]\r\n                    }\r\n                  // defaultValue={main_options[0]}\r\n                  />\r\n                  {/*{*/}\r\n                  {/*(test.include[0]) &&*/}\r\n                  {/*(test.include[0].type === 'model'*/}\r\n                  {/*&&*/}\r\n                  {/*<Select*/}\r\n                  {/*onChange={(e) => this.handleChange(e, test)}*/}\r\n                  {/*className=\"modal-repeater-field-c3\"*/}\r\n                  {/*defaultValue={model_options[0]}*/}\r\n                  {/*options={model_options}*/}\r\n                  {/*/>)*/}\r\n                  {/*}*/}\r\n                  {/*{*/}\r\n                  {/*(test.exclude[0]) &&*/}\r\n                  {/*(test.exclude[0].type === 'model' &&*/}\r\n                  {/*<Select*/}\r\n                  {/*onChange={(e) => this.handleChange(e, test)}*/}\r\n                  {/*className=\"modal-repeater-field-c3\"*/}\r\n                  {/*defaultValue={model_options[0]}*/}\r\n                  {/*options={model_options}*/}\r\n                  {/*/>)*/}\r\n                  {/*}*/}\r\n                  {test.object_type === \"page\" && (\r\n                    <AltrpSelect\r\n                      // value={(test.object_ids || []).map(o=>this.state.pageOptions.find())}\r\n                      value={_.filter(\r\n                        this.state.pageOptions,\r\n                        p =>\r\n                          test.object_ids &&\r\n                          test.object_ids.indexOf(p.value) >= 0\r\n                      )}\r\n                      onChange={e => this.handleIdsSelect(e, test.id)}\r\n                      isMulti={true}\r\n                      closeMenuOnSelect={false}\r\n                      placeholder=\"Choose Pages\"\r\n                      options={this.state.pageOptions}\r\n                      className=\"modal-repeater-field-c3\"\r\n                    />\r\n                  )}\r\n\r\n                  {test.object_type === \"report\" && (\r\n                    <AltrpSelect\r\n                      // value={(test.object_ids || []).map(o=>this.state.pageOptions.find())}\r\n                      value={_.filter(\r\n                        this.state.reportsOptions,\r\n                        p =>\r\n                          test.object_ids &&\r\n                          test.object_ids.indexOf(p.value) >= 0\r\n                      )}\r\n                      onChange={e => this.handleIdsSelect(e, test.id)}\r\n                      isMulti={true}\r\n                      closeMenuOnSelect={false}\r\n                      placeholder=\"Choose Pages\"\r\n                      options={this.state.reportsOptions}\r\n                      className=\"modal-repeater-field-c3\"\r\n                    />\r\n                  )}\r\n                  <button\r\n                    onClick={() => this.removeCondition(test.id)}\r\n                    className=\"modal-repeater-tool-remove\"\r\n                  >\r\n                    X\r\n                  </button>\r\n                </div>\r\n              );\r\n            })}\r\n          </div>\r\n        </div>\r\n        <div className=\"modal-condition-button-wrapper\">\r\n          <button\r\n            onClick={() => this.addCondition()}\r\n            className=\"modal-condition-button\"\r\n          >\r\n            Add condition\r\n          </button>\r\n        </div>\r\n        <div className=\"modal-footer\">\r\n          <button\r\n            onClick={() => this.updateConditions(true)}\r\n            className=\"modal-footer__button modal-save\"\r\n          >\r\n            Save & close\r\n          </button>\r\n          <button\r\n            onClick={() => this.updateConditions()}\r\n            className=\"modal-footer__button modal-next\"\r\n          >\r\n            Next\r\n          </button>\r\n        </div>\r\n      </div>\r\n    );\r\n  }\r\n}\r\n","import React, { Component } from 'react';\r\nimport ('../../sass/dialog-content.scss');\r\nimport { iconsManager } from '../../../../front-app/src/js/helpers';\r\nimport { getTemplateId } from '../helpers';\r\nimport Resource from '../classes/Resource';\r\n\r\nexport default class DialogTriggersTab extends Component {\r\n  constructor(props) {\r\n    super(props)\r\n    this.state = {\r\n      value: {},\r\n      onLoad: false,\r\n      onScroll: false,\r\n      scrollElement: false,\r\n      onClick: false,\r\n      afterInactivity: false,\r\n      on_exit: false,\r\n    }\r\n    this.resource = new Resource({ route: `/admin/ajax/templates/${getTemplateId()}/settings` })\r\n  }\r\n\r\n  async updateTriggers() {\r\n    const { inactivity, on_click, on_exit, on_page_load, on_scroll, to_element } = this.state.value;\r\n    const { afterInactivity, onClick, onLoad, onScroll, scrollElement } = this.state;\r\n    const data = { \r\n      inactivity: afterInactivity && inactivity,\r\n      on_click: onClick && on_click,\r\n      on_exit,\r\n      on_page_load: onLoad && on_page_load,\r\n      on_scroll: onScroll && on_scroll,\r\n      to_element: scrollElement && to_element\r\n    }\r\n    let res = await this.resource.put('triggers', { data });\r\n    console.log(res);\r\n  }\r\n\r\n\r\n\r\n  /**   get request,    state.value */\r\n  async componentDidMount() {\r\n    let triggers = await this.resource.get('triggers')\r\n    this.setState({\r\n      value: triggers.data,\r\n    })\r\n  }\r\n\r\n  handleChangePage(e) {\r\n    if (e.target.name === 'direction') {\r\n      this.setState({\r\n        value: {\r\n          ...this.state.value,\r\n          on_scroll: {\r\n            ...this.state.value.on_scroll,\r\n            direction: e.target.value,\r\n          }\r\n        }\r\n      })\r\n      return;\r\n    } else if (e.target.name === 'size') {\r\n      this.setState({\r\n        value: {\r\n          ...this.state.value,\r\n          on_scroll: {\r\n            ...this.state.value.on_scroll,\r\n            size: e.target.value,\r\n          }\r\n        }\r\n      })\r\n      return;\r\n    }\r\n    this.setState({\r\n      value: {\r\n        ...this.state.value,\r\n        [e.target.name]: e.target.value\r\n      }\r\n    })\r\n  }\r\n\r\n  handleCheck(e) {\r\n    if (e.target.name === 'on_exit') {\r\n      this.setState({\r\n        [e.target.name]: e.target.checked,\r\n        value: {\r\n          ...this.state.value,\r\n          [e.target.name]: e.target.checked,\r\n        }\r\n      })\r\n    }\r\n    this.setState({\r\n      [e.target.name]: e.target.checked\r\n    })\r\n  }\r\n\r\n  render() {\r\n    return (\r\n      <div className=\"triggers-tab\">\r\n        <div className=\"triggers-wrapper\">\r\n          <div className=\"triggers-icon-wrapper\">\r\n            {\r\n              iconsManager().renderIcon('page_load')\r\n            }\r\n          </div>\r\n          <div className=\"triggers-title\">On Page Load</div>\r\n          <div className=\"triggers-control-content\">\r\n            {this.state.onLoad &&\r\n              <div className=\"triggers-control-field\">\r\n                <label htmlFor=\"triggers-control-field-pageLoad\">Within(sec)</label>\r\n                <div className=\"triggers-control-input-wrapper\">\r\n                  <input className=\"triggers-control-input\"\r\n                    id=\"triggers-control-field-pageLoad\"\r\n                    onChange={(e) => this.handleChangePage(e)} type=\"number\"\r\n                    min=\"0\"\r\n                    step=\"0.1\"\r\n                    value={this.state.on_page_load}\r\n                    name=\"on_page_load\"\r\n                  />\r\n                </div>\r\n              </div>\r\n            }\r\n          </div>\r\n          <div className=\"triggers-control-content-switch\">\r\n            <div className=\"toggle-switch\">\r\n              <input\r\n                type=\"checkbox\"\r\n                className=\"toggle-switch-checkbox\"\r\n                name=\"onLoad\"\r\n                checked={this.state[name]}\r\n                id=\"toggleSwitch\"\r\n                onChange={(e) => this.handleCheck(e)}\r\n              />\r\n              <label className=\"toggle-switch-label\" htmlFor=\"toggleSwitch\">\r\n                <span className=\"toggle-switch-inner\" />\r\n                <span className=\"toggle-switch-switch\" />\r\n              </label>\r\n            </div>\r\n          </div>\r\n        </div>\r\n        <div className=\"triggers-wrapper\">\r\n          <div className=\"triggers-icon-wrapper\">\r\n            {\r\n              iconsManager().renderIcon('scrolling')\r\n            }\r\n          </div>\r\n          <div className=\"triggers-title\">On Scroll</div>\r\n          <div className=\"triggers-control-content\">\r\n            {this.state.onScroll &&\r\n              <div className=\"triggers-control-field\">\r\n                <label htmlFor=\"triggers-control-field-inputSelect\">Direction</label>\r\n                <div className=\"triggers-control-input-wrapper\">\r\n                  <select\r\n                    name=\"direction\"\r\n                    onChange={(e) => this.handleChangePage(e)}\r\n                    id=\"triggers-control-field-inputSelect\">\r\n                    <option value=\"down\">Down</option>\r\n                    <option value=\"up\">Up</option>\r\n                  </select>\r\n                </div>\r\n              </div>\r\n            }\r\n          </div>\r\n          <div className=\"triggers-control-content\">\r\n            {\r\n              this.state.onScroll &&\r\n              <div className=\"triggers-control-field\">\r\n                <label htmlFor=\"triggers-control-field-inputNumber2\">Within(%)</label>\r\n                <div className=\"triggers-control-input-wrapper\">\r\n                  <input type=\"number\"\r\n                    min=\"1\"\r\n                    max=\"100\"\r\n                    id=\"triggers-control-field-inputNumber2\"\r\n                    name=\"size\"\r\n                    onChange={(e) => this.handleChangePage(e)}\r\n                  />\r\n                </div>\r\n              </div>\r\n            }\r\n          </div>\r\n          <div className=\"triggers-control-content-switch\">\r\n            <div className=\"toggle-switch\">\r\n              <input\r\n                type=\"checkbox\"\r\n                className=\"toggle-switch-checkbox\"\r\n                name=\"onScroll\"\r\n                checked={this.state[name]}\r\n                onClick={(e) => this.handleCheck(e)}\r\n                id=\"toggleSwitch2\"\r\n              />\r\n              <label className=\"toggle-switch-label\" htmlFor=\"toggleSwitch2\">\r\n                <span className=\"toggle-switch-inner\" />\r\n                <span className=\"toggle-switch-switch\" />\r\n              </label>\r\n            </div>\r\n          </div>\r\n        </div>\r\n        <div className=\"triggers-wrapper\">\r\n          <div className=\"triggers-icon-wrapper\">\r\n            {\r\n              iconsManager().renderIcon('scrolling_to')\r\n            }\r\n          </div>\r\n          <div className=\"triggers-title\">On Scroll To Element</div>\r\n          <div className=\"triggers-control-content\">\r\n            {\r\n              this.state.scrollElement &&\r\n              <div className=\"triggers-control-field\">\r\n                <label htmlFor=\"triggers-control-field-inputText\">Selector</label>\r\n                <div className=\"triggers-control-input-wrapper\">\r\n                  <input className=\"triggers-control-inputText\"\r\n                    id=\"triggers-control-field-Text\"\r\n                    type=\"text\"\r\n                    name=\"to_element\"\r\n                    placeholder=\".my class\"\r\n                    defaultValue=''\r\n                    onChange={(e) => this.handleChangePage(e)}\r\n                  />\r\n                </div>\r\n              </div>\r\n            }\r\n          </div>\r\n          <div className=\"triggers-control-content-switch\">\r\n            <div className=\"toggle-switch\">\r\n              <input\r\n                type=\"checkbox\"\r\n                className=\"toggle-switch-checkbox\"\r\n                checked={this.state[name]}\r\n                name=\"scrollElement\"\r\n                onClick={(e) => this.handleCheck(e)}\r\n                id=\"toggleSwitchText\"\r\n              />\r\n              <label className=\"toggle-switch-label\" htmlFor=\"toggleSwitchText\">\r\n                <span className=\"toggle-switch-inner\" />\r\n                <span className=\"toggle-switch-switch\" />\r\n              </label>\r\n            </div>\r\n          </div>\r\n        </div>\r\n        <div className=\"triggers-wrapper\">\r\n          <div className=\"triggers-icon-wrapper\">\r\n            {\r\n              iconsManager().renderIcon('click')\r\n            }\r\n          </div>\r\n          <div className=\"triggers-title\">On Click</div>\r\n          <div className=\"triggers-control-content\">\r\n            {\r\n              this.state.onClick &&\r\n              <div className=\"triggers-control-field\">\r\n                <label htmlFor=\"triggers-control-field-Clicks\">Clicks</label>\r\n                <div className=\"triggers-control-input-wrapper\">\r\n                  <input className=\"triggers-control-input\"\r\n                    id=\"triggers-control-field-Clicks\"\r\n                    type=\"number\"\r\n                    min=\"1\"\r\n                    name=\"on_click\"\r\n                    value={this.state.on_click}\r\n                    onChange={(e) => this.handleChangePage(e)}\r\n                  />\r\n                </div>\r\n              </div>\r\n            }\r\n          </div>\r\n          <div className=\"triggers-control-content-switch\">\r\n            <div className=\"toggle-switch\">\r\n              <input\r\n                type=\"checkbox\"\r\n                className=\"toggle-switch-checkbox\"\r\n                checked={this.state[name]}\r\n                name=\"onClick\"\r\n                onClick={(e) => this.handleCheck(e)}\r\n                id=\"toggleSwitchClicks\"\r\n              />\r\n              <label className=\"toggle-switch-label\" htmlFor=\"toggleSwitchClicks\">\r\n                <span className=\"toggle-switch-inner\" />\r\n                <span className=\"toggle-switch-switch\" />\r\n              </label>\r\n            </div>\r\n          </div>\r\n        </div>\r\n        <div className=\"triggers-wrapper\">\r\n          <div className=\"triggers-icon-wrapper\">\r\n            <div className=\"triggers-icon\">\r\n              {\r\n                iconsManager().renderIcon('inactivity')\r\n              }\r\n            </div>\r\n          </div>\r\n          <div className=\"triggers-title\">After Inactivity</div>\r\n          <div className=\"triggers-control-content\">\r\n            {this.state.afterInactivity &&\r\n              <div className=\"triggers-control-field\">\r\n                <label htmlFor=\"triggers-control-field-inactivity\">Within(sec)</label>\r\n                <div className=\"triggers-control-input-wrapper\">\r\n                  <input className=\"triggers-control-input\"\r\n                    id=\"triggers-control-field-inactivity\"\r\n                    type=\"number\"\r\n                    value={this.state.inactivity}\r\n                    min=\"1\"\r\n                    step=\"0.1\"\r\n                    name=\"inactivity\"\r\n                    onChange={(e) => this.handleChangePage(e)}\r\n                  />\r\n                </div>\r\n              </div>\r\n            }\r\n          </div>\r\n          <div className=\"triggers-control-content-switch\">\r\n            <div className=\"toggle-switch\">\r\n              <input\r\n                type=\"checkbox\"\r\n                className=\"toggle-switch-checkbox\"\r\n                checked={this.state[name]}\r\n                name=\"afterInactivity\"\r\n                onClick={(e) => this.handleCheck(e)}\r\n                id=\"toggleSwitchInactivity\"\r\n              />\r\n              <label className=\"toggle-switch-label\" htmlFor=\"toggleSwitchInactivity\">\r\n                <span className=\"toggle-switch-inner\" />\r\n                <span className=\"toggle-switch-switch\" />\r\n              </label>\r\n            </div>\r\n          </div>\r\n        </div>\r\n        <div className=\"triggers-wrapper\">\r\n          <div className=\"triggers-icon-wrapper\">\r\n            <div className=\"triggers-icon\">\r\n              {\r\n                iconsManager().renderIcon('exit_intent')\r\n              }\r\n            </div>\r\n          </div>\r\n          <div className=\"triggers-title\">On Page Exit Intent</div>\r\n          <div className=\"triggers-control-content-switch\">\r\n            <div className=\"toggle-switch\">\r\n              <input\r\n                type=\"checkbox\"\r\n                className=\"toggle-switch-checkbox\"\r\n                checked={this.state[name]}\r\n                name=\"on_exit\"\r\n                onClick={(e) => this.handleCheck(e)}\r\n                id=\"toggleSwitchIntent\"\r\n                onChange={(e) => this.setState({ on_exit: !this.state.on_exit })}\r\n              />\r\n              <label className=\"toggle-switch-label\" htmlFor=\"toggleSwitchIntent\">\r\n                <span className=\"toggle-switch-inner\" />\r\n                <span className=\"toggle-switch-switch\" />\r\n              </label>\r\n            </div>\r\n          </div>\r\n        </div>\r\n        <div className=\"modal-footer\">\r\n          <button onClick={() => this.updateTriggers()} className=\"modal-footer__button modal-save\">Save & close</button>\r\n          <button onClick={() => this.updateTriggers()} className=\"modal-footer__button modal-next\">Next</button>\r\n        </div>\r\n      </div>\r\n    )\r\n  }\r\n};\r\n","import React, { Component } from 'react';\r\nimport Logo from \"../../svgs/logo.svg\";\r\nimport ('../../sass/dialog-content.scss');\r\nimport DialogTab from './DialogTab';\r\nimport DialogConditionsTab from './DialogConditionsTab';\r\nimport DialogTriggersTab from './DialogTriggersTab';\r\nimport {connect} from 'react-redux';\r\n\r\nclass DialogWindow extends Component {\r\n  constructor(props) {\r\n    super(props);\r\n    let tabs = [\r\n      { icon: 'conditions_tab', title: 'Conditions', desc: 'Apply current template to these pages' },\r\n    ];\r\n    if(['popup'].indexOf(this.props.templateData.template_type) >= 0){\r\n      tabs = [\r\n        { icon: 'conditions_tab', title: 'Conditions', desc: 'Apply current template to these pages' },\r\n        { icon: 'triggers_tab', title: 'Triggers', desc: 'What action the user needs to do for the popup to open.' },\r\n        { icon: 'triggers_tab', title: 'Advanced Rules', desc: 'Requirements that have to be met for the popup to open.' },\r\n      ];\r\n    }\r\n    this.state = {\r\n      activeTab: 'Conditions',\r\n      tabs,\r\n      \r\n    }\r\n  }\r\n\r\n  handleOpen(title) {\r\n    this.setState({\r\n      activeTab: title,\r\n    })\r\n  };\r\n  \r\n  handleClose() {\r\n    this.props.toggleModalWindow()\r\n  };\r\n\r\n  renderSwitch(activeTab) {\r\n    switch (this.state.activeTab) {\r\n      case 'Conditions':\r\n        return <DialogConditionsTab />;\r\n      case 'Triggers':\r\n        return <DialogTriggersTab />;\r\n      case 'Advanced Rules':\r\n        return <div>ADVANCED</div>;\r\n      default:\r\n        return null;\r\n    }\r\n  }\r\n\r\n  // (this.state.activeTab === 'Conditions' && <DialogConditionsTab /> ||\r\n  //   this.state.activeTab === 'Triggers' && <div>Triggers</div> ||\r\n  //   this.state.activeTab === 'Advanced Rules' && <div>Advanced Rules</div>\r\n  // )\r\n\r\n  render() {\r\n    return (\r\n      <div className=\"modal-overlay\">\r\n        <div className=\"modal-window\">\r\n          <div className=\"modal-header\">\r\n            <Logo className=\"modal-header__logo\" />\r\n            <button onClick={() => this.handleClose()}>X</button>\r\n          </div>\r\n          <div className=\"modal-body\">\r\n            <div className=\"modal-body__tabs\">\r\n              {\r\n                this.state.tabs.map((tab, index) => {\r\n                  return <div key={tab.title} onClick={() => this.handleOpen(tab.title)}>\r\n                    <DialogTab active={this.state.activeTab === tab.title ? true : false} tab={tab} />\r\n                  </div>\r\n                })\r\n              }\r\n            </div>\r\n            <div className=\"modal-body__content\">\r\n              {this.renderSwitch(this.state.activeTab)}\r\n            </div>\r\n          </div>\r\n        </div>\r\n      </div>\r\n    )\r\n  }\r\n}\r\nfunction mapStateToProps(state) {\r\n  return {templateData: state.templateData};\r\n}\r\nexport default connect(mapStateToProps)(DialogWindow);","import \"./sass/editor-style.scss\";\r\nimport React, { Component } from \"react\";\r\nimport { connect } from \"react-redux\";\r\nimport { hot } from \"react-hot-loader\";\r\nimport { DndProvider } from \"react-dnd\";\r\nimport { HTML5Backend } from \"react-dnd-html5-backend\";\r\n\r\nimport Modules from \"./js/classes/Modules\";\r\nimport WidgetsPanel from \"./js/components/WidgetsPanel\";\r\nimport SettingsPanel from \"./js/components/SettingsPanel\";\r\nimport EditorWindow from \"./js/components/EditorWindow\";\r\nimport HistoryPanel from \"./js/components/HistoryPanel\";\r\nimport NavigationPanel from \"./js/components/NavigationPanel\";\r\nimport CommonPanel from \"./js/components/CommonPanel\";\r\nimport GlobalColors from \"./js/components/GlobalColors\";\r\nimport UpdateButton from \"./js/components/UpdateButton\";\r\nimport CONSTANTS from \"./js/consts\";\r\nimport { stopDrag } from \"./js/store/element-drag/actions\";\r\nimport AssetsBrowser from \"./js/classes/modules/AssetsBrowser\";\r\n\r\nimport store, {\r\n  getCurrentElement,\r\n  getCurrentScreen\r\n} from \"../src/js/store/store\";\r\n\r\nimport Logo from \"./svgs/logo.svg\";\r\nimport Navigation from \"./svgs/navigation.svg\";\r\nimport History from \"./svgs/history.svg\";\r\nimport Preview from \"./svgs/preview.svg\";\r\nimport Settings from \"./svgs/settings.svg\";\r\nimport Dots from \"./svgs/dots.svg\";\r\nimport Hamburger from \"./svgs/hamburger.svg\";\r\nimport { contextMenu } from \"react-contexify\";\r\nimport { closeDynamicContent } from \"./js/store/dynamic-content/actions\";\r\nimport ResponsiveDdFooter from \"./js/components/ResponsiveDdFooter\";\r\nimport DialogWindow from \"./js/components/DialogWindow\";\r\nimport { renderAsset } from \"../../front-app/src/js/helpers\";\r\nimport { changeCurrentUser } from \"../../front-app/src/js/store/current-user/actions\";\r\nimport Resource from \"./js/classes/Resource\";\r\nimport AltrpMeta from \"./js/classes/AltrpMeta\";\r\nimport { setEditorMeta } from \"./js/store/editor-metas/actions\";\r\nimport { setGlobalColors } from \"./js/store/altrp-global-colors/actions\";\r\n\r\n/**\r\n *   .<br/>\r\n * -.<br/>\r\n * ,      altrpEditor.\r\n *\r\n * */\r\nclass Editor extends Component {\r\n  /**\r\n   * @constructor\r\n   * */\r\n  constructor(props) {\r\n    super(props);\r\n    window.altrpEditor = this;\r\n    this.state = {\r\n      // activePanel: 'widgets',\r\n      activePanel: \"settings\",\r\n      templateStatus: CONSTANTS.TEMPLATE_UPDATED,\r\n      showDialogWindow: false\r\n    };\r\n    this.openPageSettings = this.openPageSettings.bind(this);\r\n    this.openNavigratonPanel = this.openNavigratonPanel.bind(this);\r\n    this.showSettingsPanel = this.showSettingsPanel.bind(this);\r\n    this.showNavigationPanel = this.showNavigationPanel.bind(this);\r\n    this.showHistoryPanel = this.showHistoryPanel.bind(this);\r\n    this.showWidgetsPanel = this.showWidgetsPanel.bind(this);\r\n    this.showCommonPanel = this.showCommonPanel.bind(this);\r\n    this.showGlobalColorsPanel = this.showGlobalColorsPanel.bind(this);\r\n    this.showGlobalFontsPanel = this.showGlobalFontsPanel.bind(this);\r\n    this.onDragEnd = this.onDragEnd.bind(this);\r\n    this.onClick = this.onClick.bind(this);\r\n    // store.subscribe(this.templateStatus.bind(this));\r\n  }\r\n  /**\r\n   *         \r\n   * */\r\n  // templateStatus() {\r\n  //   let templateStatus = store.getState().templateStatus.status;\r\n  //   if (templateStatus !== this.state.templateStatus) {\r\n  //     this.setState({ ...this.state, templateStatus });\r\n  //   }\r\n  // }\r\n\r\n  /**\r\n   *  \r\n   */\r\n\r\n  initModules() {\r\n    this.modules = new Modules(this);\r\n    this.modules.loaded();\r\n  }\r\n\r\n  /**\r\n   *     \r\n   */\r\n  showWidgetsPanel() {\r\n    this.setState({\r\n      ...this.state,\r\n      activePanel: \"widgets\"\r\n    });\r\n  }\r\n\r\n  /**\r\n   *  Dialog \r\n   */\r\n  toggleModalWindow() {\r\n    this.setState({\r\n      showDialogWindow: !this.state.showDialogWindow\r\n    });\r\n  }\r\n\r\n  /**\r\n   *      \r\n   */\r\n  showSettingsPanel() {\r\n    this.setState({\r\n      ...this.state,\r\n      activePanel: \"settings\"\r\n    });\r\n  }\r\n  /**\r\n   *     \r\n   */\r\n  showNavigationPanel() {\r\n    this.setState({\r\n      ...this.state,\r\n      activePanel: \"navigation\"\r\n    });\r\n  }\r\n\r\n  showHistoryPanel() {\r\n    this.setState({\r\n      ...this.state,\r\n      activePanel: \"history\"\r\n    });\r\n  }\r\n\r\n  showCommonPanel() {\r\n    this.setState({\r\n      ...this.state,\r\n      activePanel: \"common\"\r\n    });\r\n  }\r\n\r\n  showGlobalColorsPanel() {\r\n    this.setState({\r\n      ...this.state,\r\n      activePanel: \"global_colors\"\r\n    });\r\n  }\r\n\r\n  showGlobalFontsPanel() {\r\n    this.setState({\r\n      ...this.state,\r\n      activePanel: \"global_fonts\"\r\n    });\r\n  }\r\n\r\n  /**\r\n   *   \r\n   */\r\n  onClick() {\r\n    contextMenu.hideAll();\r\n    store.dispatch(closeDynamicContent());\r\n  }\r\n\r\n  /**\r\n   *       stopDrag  \r\n   * @see ElementWrapper.stopDrag\r\n   */\r\n  onDragEnd() {\r\n    let draggableElement = store.getState().elementDrag.element;\r\n    if (draggableElement && draggableElement.stopDrag) {\r\n      draggableElement.stopDrag();\r\n    }\r\n    store.dispatch(stopDrag());\r\n  }\r\n  /**\r\n   *    \r\n   * @see {@link SaveImportModule}\r\n   * */\r\n  endLoading() {\r\n    console.log(\"editor loaded\");\r\n  }\r\n\r\n  /**\r\n   *    \r\n   * @see {@link https://ru.reactjs.org/docs/react-component.html#componentdidmount}\r\n   * */\r\n  async componentDidMount() {\r\n    this.initModules();\r\n\r\n    let currentUser = await new Resource({\r\n      route: \"/ajax/current-user\"\r\n    }).getAll();\r\n    currentUser = currentUser.data;\r\n    appStore.dispatch(changeCurrentUser(currentUser));\r\n    const presetColors = await AltrpMeta.getMetaByName(\"preset_colors\");\r\n    appStore.dispatch(setEditorMeta(presetColors));\r\n    const globalStyles = await new Resource({\r\n      route: \"/admin/ajax/global_template_styles\"\r\n    }).getAll();\r\n    appStore.dispatch(\r\n      setGlobalColors(\r\n        globalStyles.color?.map(color => ({\r\n          id: color.id,\r\n          guid: color.guid,\r\n          ...color.settings\r\n        })) || []\r\n      )\r\n    );\r\n  }\r\n\r\n  /**\r\n   *        \r\n   */\r\n\r\n  openPageSettings() {\r\n    this.modules.templateDataStorage.setCurrentRootElement();\r\n    this.showSettingsPanel();\r\n  }\r\n\r\n  openNavigratonPanel() {\r\n    this.modules.templateDataStorage.setCurrentRootElement();\r\n    this.showNavigationPanel();\r\n  }\r\n\r\n  /**\r\n   *  \r\n   */\r\n  render() {\r\n    let settingsActive = \"\";\r\n    let navigationActive = \"\";\r\n    let templateClasses = `editor editor_${\r\n      store.getState().templateData.template_type\r\n    }`;\r\n    if (this.props.templateStatus === CONSTANTS.TEMPLATE_SAVING) {\r\n      templateClasses += \" editor_saving\";\r\n    }\r\n    if (\r\n      store.getState().currentElement.currentElement.getType &&\r\n      store.getState().currentElement.currentElement.getType() ===\r\n        \"root-element\" &&\r\n      this.state.activePanel === \"settings\"\r\n    ) {\r\n      settingsActive = \" active\";\r\n    }\r\n    if (\r\n      store.getState().currentElement.currentElement.getType &&\r\n      store.getState().currentElement.currentElement.getType() ===\r\n        \"root-element\" &&\r\n      this.state.activePanel === \"navigation\"\r\n    ) {\r\n      navigationActive = \" active\";\r\n    }\r\n    return (\r\n      <DndProvider backend={HTML5Backend}>\r\n        <div\r\n          className={templateClasses}\r\n          onClick={this.onClick}\r\n          onDragEnd={this.onDragEnd}\r\n          onKeyDown={this.onKeyDown}\r\n        >\r\n          <div className=\"left-panel\">\r\n            <div className=\"editor-top-panel\">\r\n              <button\r\n                className=\"btn btn_hamburger\"\r\n                onClick={this.showCommonPanel}\r\n              >\r\n                <Hamburger className=\"icon\" />\r\n              </button>\r\n              <a href=\"/admin/templates\" target=\"_blank\" className=\"logo\">\r\n                {window.admin_logo ? (\r\n                  renderAsset(window.admin_logo, { className: \"editor__logo\" })\r\n                ) : (\r\n                  <Logo viewBox=\"0 0 97 35\" className=\"editor__logo\" />\r\n                )}\r\n              </a>\r\n              <button className=\"btn btn_dots\" onClick={this.showWidgetsPanel}>\r\n                <Dots className=\"icon\" />\r\n              </button>\r\n            </div>\r\n            <div className=\"left-panel-main\">\r\n              {this.state.activePanel === \"widgets\" && <WidgetsPanel />}\r\n              {this.state.activePanel === \"settings\" && <SettingsPanel />}\r\n              {this.state.activePanel === \"history\" && <HistoryPanel />}\r\n              {this.state.activePanel === \"navigation\" && <NavigationPanel />}\r\n              {this.state.activePanel === \"common\" && (\r\n                <CommonPanel\r\n                  showGlobalColorsPanel={this.showGlobalColorsPanel}\r\n                  showGlobalFontsPanel={this.showGlobalFontsPanel}\r\n                />\r\n              )}\r\n              {this.state.activePanel === \"global_colors\" && <GlobalColors />}\r\n            </div>\r\n            <div className=\"editor-bottom-panel d-flex align-content-center justify-center\">\r\n              <button\r\n                className={\"btn btn_settings\" + settingsActive}\r\n                onClick={this.openPageSettings}\r\n              >\r\n                <Settings className=\"icon\" />\r\n              </button>\r\n              <button\r\n                className={\"btn btn_settings\" + navigationActive}\r\n                onClick={this.openNavigratonPanel}\r\n              >\r\n                <Navigation className=\"icon\" />\r\n              </button>\r\n              <button className=\"btn \" onClick={this.showHistoryPanel}>\r\n                <History className=\"icon\" />\r\n              </button>\r\n              <div className=\"btn \">\r\n                <ResponsiveDdFooter />\r\n              </div>\r\n              <button className=\"btn \">\r\n                <Preview className=\"icon\" />\r\n              </button>\r\n              <UpdateButton\r\n                onClick={() => this.toggleModalWindow()}\r\n                toggleModalWindow={() => this.toggleModalWindow()}\r\n              />\r\n            </div>\r\n          </div>\r\n          <div className=\"right-panel\">\r\n            {this.state.showDialogWindow && (\r\n              <DialogWindow\r\n                state={this.state.showDialogWindow}\r\n                toggleModalWindow={() => this.toggleModalWindow()}\r\n              />\r\n            )}\r\n            <EditorWindow />\r\n          </div>\r\n        </div>\r\n        <AssetsBrowser />\r\n\r\n      </DndProvider>\r\n    );\r\n  }\r\n}\r\n\r\nfunction mapStateToProps(state) {\r\n  return {\r\n    templateStatus: state.templateStatus.status\r\n  };\r\n}\r\n\r\n/**\r\n *     HMR <br/>\r\n *    \r\n * @member _export\r\n */\r\nlet _export;\r\nif (process.env.NODE_ENV === \"production\") {\r\n  _export = Editor;\r\n} else {\r\n  _export = hot(module)(connect(mapStateToProps)(Editor));\r\n}\r\n\r\nexport default _export;\r\n","/*! @license https://github.com/onury/invert-color */\n!function(r,n){\"object\"==typeof exports&&\"undefined\"!=typeof module?module.exports=n():\"function\"==typeof define&&define.amd?define(n):r.invert=n()}(this,function(){\"use strict\";var t=Math.sqrt(1.05*.05)-.05,n=/^(?:[0-9a-f]{3}){1,2}$/i,i={black:\"#000000\",white:\"#ffffff\",threshold:t};function o(r){if(\"#\"===r.slice(0,1)&&(r=r.slice(1)),!n.test(r))throw new Error('Invalid HEX color: \"'+r+'\"');return 3===r.length&&(r=r[0]+r[0]+r[1]+r[1]+r[2]+r[2]),[parseInt(r.slice(0,2),16),parseInt(r.slice(2,4),16),parseInt(r.slice(4,6),16)]}function f(r){if(!r)throw new Error(\"Invalid color value\");return Array.isArray(r)?r:\"string\"==typeof r?o(r):[r.r,r.g,r.b]}function u(r,n,t){var e=!0===n?i:Object.assign({},i,n);return function(r){var n,t,e=[];for(n=0;n<r.length;n++)t=r[n]/255,e[n]=t<=.03928?t/12.92:Math.pow((t+.055)/1.055,2.4);return.2126*e[0]+.7152*e[1]+.0722*e[2]}(r)>e.threshold?t?o(e.black):e.black:t?o(e.white):e.white}function r(r,n){return void 0===n&&(n=!1),r=f(r),n?u(r,n):\"#\"+r.map(function(r){return n=(255-r).toString(16),void 0===t&&(t=2),(new Array(t).join(\"0\")+n).slice(-t);var n,t}).join(\"\")}return function(r){function n(r,n){r=f(r);var t,e=n?u(r,n,!0):r.map(function(r){return 255-r});return{r:(t=e)[0],g:t[1],b:t[2]}}r.asRGB=n,r.asRgbArray=function(r,n){return r=f(r),n?u(r,n,!0):r.map(function(r){return 255-r})},r.defaultThreshold=t,r.asRgbObject=n}(r||(r={})),r});","function _typeof(obj) { \"@babel/helpers - typeof\"; if (typeof Symbol === \"function\" && typeof Symbol.iterator === \"symbol\") { _typeof = function _typeof(obj) { return typeof obj; }; } else { _typeof = function _typeof(obj) { return obj && typeof Symbol === \"function\" && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj; }; } return _typeof(obj); }\n\n// cheap lodash replacements\nexport function isFunction(input) {\n  return typeof input === 'function';\n}\nexport function noop() {// noop\n}\n\nfunction isObjectLike(input) {\n  return _typeof(input) === 'object' && input !== null;\n}\n\nexport function isPlainObject(input) {\n  if (!isObjectLike(input)) {\n    return false;\n  }\n\n  if (Object.getPrototypeOf(input) === null) {\n    return true;\n  }\n\n  var proto = input;\n\n  while (Object.getPrototypeOf(proto) !== null) {\n    proto = Object.getPrototypeOf(proto);\n  }\n\n  return Object.getPrototypeOf(input) === proto;\n}","function _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nfunction _defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } }\n\nfunction _createClass(Constructor, protoProps, staticProps) { if (protoProps) _defineProperties(Constructor.prototype, protoProps); if (staticProps) _defineProperties(Constructor, staticProps); return Constructor; }\n\nimport { isFunction, noop } from '../utils/js_utils';\n/**\n * Provides a set of static methods for creating Disposables.\n * @param {Function} action Action to run during the first call to dispose.\n * The action is guaranteed to be run at most once.\n */\n\nvar Disposable =\n/** @class */\nfunction () {\n  var Disposable = /*#__PURE__*/function () {\n    function Disposable(action) {\n      _classCallCheck(this, Disposable);\n\n      this.isDisposed = false;\n      this.action = isFunction(action) ? action : noop;\n    }\n    /**\n     * Validates whether the given object is a disposable\n     * @param {Object} Object to test whether it has a dispose method\n     * @returns {Boolean} true if a disposable object, else false.\n     */\n\n\n    _createClass(Disposable, [{\n      key: \"dispose\",\n\n      /** Performs the task of cleaning up resources. */\n      value: function dispose() {\n        if (!this.isDisposed) {\n          this.action();\n          this.isDisposed = true;\n        }\n      }\n    }], [{\n      key: \"isDisposable\",\n      value: function isDisposable(d) {\n        return Boolean(d && isFunction(d.dispose));\n      }\n    }, {\n      key: \"_fixup\",\n      value: function _fixup(result) {\n        return Disposable.isDisposable(result) ? result : Disposable.empty;\n      }\n      /**\n       * Creates a disposable object that invokes the specified action when disposed.\n       * @param {Function} dispose Action to run during the first call to dispose.\n       * The action is guaranteed to be run at most once.\n       * @return {Disposable} The disposable object that runs the given action upon disposal.\n       */\n\n    }, {\n      key: \"create\",\n      value: function create(action) {\n        return new Disposable(action);\n      }\n    }]);\n\n    return Disposable;\n  }();\n  /**\n   * Gets the disposable that does nothing when disposed.\n   */\n\n\n  Disposable.empty = {\n    dispose: noop\n  };\n  return Disposable;\n}();\n\nexport { Disposable };\n/**\n * Represents a group of disposable resources that are disposed together.\n * @constructor\n */\n\nexport var CompositeDisposable = /*#__PURE__*/function () {\n  function CompositeDisposable() {\n    _classCallCheck(this, CompositeDisposable);\n\n    this.isDisposed = false;\n\n    for (var _len = arguments.length, disposables = new Array(_len), _key = 0; _key < _len; _key++) {\n      disposables[_key] = arguments[_key];\n    }\n\n    this.disposables = disposables;\n  }\n  /**\n   * Adds a disposable to the CompositeDisposable or disposes the disposable if the CompositeDisposable is disposed.\n   * @param {Any} item Disposable to add.\n   */\n\n\n  _createClass(CompositeDisposable, [{\n    key: \"add\",\n    value: function add(item) {\n      if (this.isDisposed) {\n        item.dispose();\n      } else {\n        this.disposables.push(item);\n      }\n    }\n    /**\n     * Removes and disposes the first occurrence of a disposable from the CompositeDisposable.\n     * @param {Any} item Disposable to remove.\n     * @returns {Boolean} true if found; false otherwise.\n     */\n\n  }, {\n    key: \"remove\",\n    value: function remove(item) {\n      var shouldDispose = false;\n\n      if (!this.isDisposed) {\n        var idx = this.disposables.indexOf(item);\n\n        if (idx !== -1) {\n          shouldDispose = true;\n          this.disposables.splice(idx, 1);\n          item.dispose();\n        }\n      }\n\n      return shouldDispose;\n    }\n    /**\n     *  Disposes all disposables in the group and removes them from the group but\n     *  does not dispose the CompositeDisposable.\n     */\n\n  }, {\n    key: \"clear\",\n    value: function clear() {\n      if (!this.isDisposed) {\n        var len = this.disposables.length;\n        var currentDisposables = new Array(len);\n\n        for (var i = 0; i < len; i++) {\n          currentDisposables[i] = this.disposables[i];\n        }\n\n        this.disposables = [];\n\n        for (var _i = 0; _i < len; _i++) {\n          currentDisposables[_i].dispose();\n        }\n      }\n    }\n    /**\n     *  Disposes all disposables in the group and removes them from the group.\n     */\n\n  }, {\n    key: \"dispose\",\n    value: function dispose() {\n      if (!this.isDisposed) {\n        this.isDisposed = true;\n        var len = this.disposables.length;\n        var currentDisposables = new Array(len);\n\n        for (var i = 0; i < len; i++) {\n          currentDisposables[i] = this.disposables[i];\n        }\n\n        this.disposables = [];\n\n        for (var _i2 = 0; _i2 < len; _i2++) {\n          currentDisposables[_i2].dispose();\n        }\n      }\n    }\n  }]);\n\n  return CompositeDisposable;\n}();\n/**\n * Represents a disposable resource whose underlying disposable resource can\n * be replaced by another disposable resource, causing automatic disposal of\n * the previous underlying disposable resource.\n */\n\nexport var SerialDisposable = /*#__PURE__*/function () {\n  function SerialDisposable() {\n    _classCallCheck(this, SerialDisposable);\n\n    this.isDisposed = false;\n  }\n  /**\n   * Gets the underlying disposable.\n   * @returns {Any} the underlying disposable.\n   */\n\n\n  _createClass(SerialDisposable, [{\n    key: \"getDisposable\",\n    value: function getDisposable() {\n      return this.current;\n    }\n  }, {\n    key: \"setDisposable\",\n    value: function setDisposable(value) {\n      var shouldDispose = this.isDisposed;\n\n      if (!shouldDispose) {\n        var old = this.current;\n        this.current = value;\n\n        if (old) {\n          old.dispose();\n        }\n      }\n\n      if (shouldDispose && value) {\n        value.dispose();\n      }\n    }\n    /** Performs the task of cleaning up resources. */\n\n  }, {\n    key: \"dispose\",\n    value: function dispose() {\n      if (!this.isDisposed) {\n        this.isDisposed = true;\n        var old = this.current;\n        this.current = undefined;\n\n        if (old) {\n          old.dispose();\n        }\n      }\n    }\n  }]);\n\n  return SerialDisposable;\n}();","function _typeof(obj) { \"@babel/helpers - typeof\"; if (typeof Symbol === \"function\" && typeof Symbol.iterator === \"symbol\") { _typeof = function _typeof(obj) { return typeof obj; }; } else { _typeof = function _typeof(obj) { return obj && typeof Symbol === \"function\" && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj; }; } return _typeof(obj); }\n\nfunction _slicedToArray(arr, i) { return _arrayWithHoles(arr) || _iterableToArrayLimit(arr, i) || _unsupportedIterableToArray(arr, i) || _nonIterableRest(); }\n\nfunction _nonIterableRest() { throw new TypeError(\"Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.\"); }\n\nfunction _unsupportedIterableToArray(o, minLen) { if (!o) return; if (typeof o === \"string\") return _arrayLikeToArray(o, minLen); var n = Object.prototype.toString.call(o).slice(8, -1); if (n === \"Object\" && o.constructor) n = o.constructor.name; if (n === \"Map\" || n === \"Set\") return Array.from(o); if (n === \"Arguments\" || /^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)) return _arrayLikeToArray(o, minLen); }\n\nfunction _arrayLikeToArray(arr, len) { if (len == null || len > arr.length) len = arr.length; for (var i = 0, arr2 = new Array(len); i < len; i++) { arr2[i] = arr[i]; } return arr2; }\n\nfunction _iterableToArrayLimit(arr, i) { if (typeof Symbol === \"undefined\" || !(Symbol.iterator in Object(arr))) return; var _arr = []; var _n = true; var _d = false; var _e = undefined; try { for (var _i = arr[Symbol.iterator](), _s; !(_n = (_s = _i.next()).done); _n = true) { _arr.push(_s.value); if (i && _arr.length === i) break; } } catch (err) { _d = true; _e = err; } finally { try { if (!_n && _i[\"return\"] != null) _i[\"return\"](); } finally { if (_d) throw _e; } } return _arr; }\n\nfunction _arrayWithHoles(arr) { if (Array.isArray(arr)) return arr; }\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nfunction _defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } }\n\nfunction _createClass(Constructor, protoProps, staticProps) { if (protoProps) _defineProperties(Constructor.prototype, protoProps); if (staticProps) _defineProperties(Constructor, staticProps); return Constructor; }\n\nfunction _inherits(subClass, superClass) { if (typeof superClass !== \"function\" && superClass !== null) { throw new TypeError(\"Super expression must either be null or a function\"); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, writable: true, configurable: true } }); if (superClass) _setPrototypeOf(subClass, superClass); }\n\nfunction _setPrototypeOf(o, p) { _setPrototypeOf = Object.setPrototypeOf || function _setPrototypeOf(o, p) { o.__proto__ = p; return o; }; return _setPrototypeOf(o, p); }\n\nfunction _createSuper(Derived) { var hasNativeReflectConstruct = _isNativeReflectConstruct(); return function _createSuperInternal() { var Super = _getPrototypeOf(Derived), result; if (hasNativeReflectConstruct) { var NewTarget = _getPrototypeOf(this).constructor; result = Reflect.construct(Super, arguments, NewTarget); } else { result = Super.apply(this, arguments); } return _possibleConstructorReturn(this, result); }; }\n\nfunction _possibleConstructorReturn(self, call) { if (call && (_typeof(call) === \"object\" || typeof call === \"function\")) { return call; } return _assertThisInitialized(self); }\n\nfunction _assertThisInitialized(self) { if (self === void 0) { throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\"); } return self; }\n\nfunction _isNativeReflectConstruct() { if (typeof Reflect === \"undefined\" || !Reflect.construct) return false; if (Reflect.construct.sham) return false; if (typeof Proxy === \"function\") return true; try { Date.prototype.toString.call(Reflect.construct(Date, [], function () {})); return true; } catch (e) { return false; } }\n\nfunction _getPrototypeOf(o) { _getPrototypeOf = Object.setPrototypeOf ? Object.getPrototypeOf : function _getPrototypeOf(o) { return o.__proto__ || Object.getPrototypeOf(o); }; return _getPrototypeOf(o); }\n\nimport * as React from 'react';\nimport { shallowEqual } from '@react-dnd/shallowequal';\nimport { invariant } from '@react-dnd/invariant';\nimport hoistStatics from 'hoist-non-react-statics';\nimport { DndContext } from '../common/DndContext';\nimport { isPlainObject } from '../utils/js_utils';\nimport { Disposable, CompositeDisposable, SerialDisposable } from './disposables';\nimport { isRefable } from './utils';\nexport function decorateHandler(_ref) {\n  var DecoratedComponent = _ref.DecoratedComponent,\n      createHandler = _ref.createHandler,\n      createMonitor = _ref.createMonitor,\n      createConnector = _ref.createConnector,\n      registerHandler = _ref.registerHandler,\n      containerDisplayName = _ref.containerDisplayName,\n      getType = _ref.getType,\n      collect = _ref.collect,\n      options = _ref.options;\n  var _options$arePropsEqua = options.arePropsEqual,\n      arePropsEqual = _options$arePropsEqua === void 0 ? shallowEqual : _options$arePropsEqua;\n  var Decorated = DecoratedComponent;\n  var displayName = DecoratedComponent.displayName || DecoratedComponent.name || 'Component';\n\n  var DragDropContainer =\n  /** @class */\n  function () {\n    var DragDropContainer = /*#__PURE__*/function (_React$Component) {\n      _inherits(DragDropContainer, _React$Component);\n\n      var _super = _createSuper(DragDropContainer);\n\n      function DragDropContainer(props) {\n        var _this;\n\n        _classCallCheck(this, DragDropContainer);\n\n        _this = _super.call(this, props);\n        _this.decoratedRef = React.createRef();\n\n        _this.handleChange = function () {\n          var nextState = _this.getCurrentState();\n\n          if (!shallowEqual(nextState, _this.state)) {\n            _this.setState(nextState);\n          }\n        };\n\n        _this.disposable = new SerialDisposable();\n\n        _this.receiveProps(props);\n\n        _this.dispose();\n\n        return _this;\n      }\n\n      _createClass(DragDropContainer, [{\n        key: \"getHandlerId\",\n        value: function getHandlerId() {\n          return this.handlerId;\n        }\n      }, {\n        key: \"getDecoratedComponentInstance\",\n        value: function getDecoratedComponentInstance() {\n          invariant(this.decoratedRef.current, 'In order to access an instance of the decorated component, it must either be a class component or use React.forwardRef()');\n          return this.decoratedRef.current;\n        }\n      }, {\n        key: \"shouldComponentUpdate\",\n        value: function shouldComponentUpdate(nextProps, nextState) {\n          return !arePropsEqual(nextProps, this.props) || !shallowEqual(nextState, this.state);\n        }\n      }, {\n        key: \"componentDidMount\",\n        value: function componentDidMount() {\n          this.disposable = new SerialDisposable();\n          this.currentType = undefined;\n          this.receiveProps(this.props);\n          this.handleChange();\n        }\n      }, {\n        key: \"componentDidUpdate\",\n        value: function componentDidUpdate(prevProps) {\n          if (!arePropsEqual(this.props, prevProps)) {\n            this.receiveProps(this.props);\n            this.handleChange();\n          }\n        }\n      }, {\n        key: \"componentWillUnmount\",\n        value: function componentWillUnmount() {\n          this.dispose();\n        }\n      }, {\n        key: \"receiveProps\",\n        value: function receiveProps(props) {\n          if (!this.handler) {\n            return;\n          }\n\n          this.handler.receiveProps(props);\n          this.receiveType(getType(props));\n        }\n      }, {\n        key: \"receiveType\",\n        value: function receiveType(type) {\n          if (!this.handlerMonitor || !this.manager || !this.handlerConnector) {\n            return;\n          }\n\n          if (type === this.currentType) {\n            return;\n          }\n\n          this.currentType = type;\n\n          var _registerHandler = registerHandler(type, this.handler, this.manager),\n              _registerHandler2 = _slicedToArray(_registerHandler, 2),\n              handlerId = _registerHandler2[0],\n              unregister = _registerHandler2[1];\n\n          this.handlerId = handlerId;\n          this.handlerMonitor.receiveHandlerId(handlerId);\n          this.handlerConnector.receiveHandlerId(handlerId);\n          var globalMonitor = this.manager.getMonitor();\n          var unsubscribe = globalMonitor.subscribeToStateChange(this.handleChange, {\n            handlerIds: [handlerId]\n          });\n          this.disposable.setDisposable(new CompositeDisposable(new Disposable(unsubscribe), new Disposable(unregister)));\n        }\n      }, {\n        key: \"dispose\",\n        value: function dispose() {\n          this.disposable.dispose();\n\n          if (this.handlerConnector) {\n            this.handlerConnector.receiveHandlerId(null);\n          }\n        }\n      }, {\n        key: \"getCurrentState\",\n        value: function getCurrentState() {\n          if (!this.handlerConnector) {\n            return {};\n          }\n\n          var nextState = collect(this.handlerConnector.hooks, this.handlerMonitor, this.props);\n\n          if (process.env.NODE_ENV !== 'production') {\n            invariant(isPlainObject(nextState), 'Expected `collect` specified as the second argument to ' + '%s for %s to return a plain object of props to inject. ' + 'Instead, received %s.', containerDisplayName, displayName, nextState);\n          }\n\n          return nextState;\n        }\n      }, {\n        key: \"render\",\n        value: function render() {\n          var _this2 = this;\n\n          return React.createElement(DndContext.Consumer, null, function (_ref2) {\n            var dragDropManager = _ref2.dragDropManager;\n\n            _this2.receiveDragDropManager(dragDropManager);\n\n            if (typeof requestAnimationFrame !== 'undefined') {\n              requestAnimationFrame(function () {\n                var _this2$handlerConnect;\n\n                return (_this2$handlerConnect = _this2.handlerConnector) === null || _this2$handlerConnect === void 0 ? void 0 : _this2$handlerConnect.reconnect();\n              });\n            }\n\n            return React.createElement(Decorated, Object.assign({}, _this2.props, _this2.getCurrentState(), {\n              // NOTE: if Decorated is a Function Component, decoratedRef will not be populated unless it's a refforwarding component.\n              ref: isRefable(Decorated) ? _this2.decoratedRef : null\n            }));\n          });\n        }\n      }, {\n        key: \"receiveDragDropManager\",\n        value: function receiveDragDropManager(dragDropManager) {\n          if (this.manager !== undefined) {\n            return;\n          }\n\n          invariant(dragDropManager !== undefined, 'Could not find the drag and drop manager in the context of %s. ' + 'Make sure to render a DndProvider component in your top-level component. ' + 'Read more: http://react-dnd.github.io/react-dnd/docs/troubleshooting#could-not-find-the-drag-and-drop-manager-in-the-context', displayName, displayName);\n\n          if (dragDropManager === undefined) {\n            return;\n          }\n\n          this.manager = dragDropManager;\n          this.handlerMonitor = createMonitor(dragDropManager);\n          this.handlerConnector = createConnector(dragDropManager.getBackend());\n          this.handler = createHandler(this.handlerMonitor, this.decoratedRef);\n        }\n      }]);\n\n      return DragDropContainer;\n    }(React.Component);\n\n    DragDropContainer.DecoratedComponent = DecoratedComponent;\n    DragDropContainer.displayName = \"\".concat(containerDisplayName, \"(\").concat(displayName, \")\");\n    return DragDropContainer;\n  }();\n\n  return hoistStatics(DragDropContainer, DecoratedComponent);\n}","export function getDecoratedComponent(instanceRef) {\n  var currentRef = instanceRef.current;\n\n  if (currentRef == null) {\n    return null;\n  } else if (currentRef.decoratedRef) {\n    // go through the private field in decorateHandler to avoid the invariant hit\n    return currentRef.decoratedRef.current;\n  } else {\n    return currentRef;\n  }\n}\nexport function isClassComponent(Component) {\n  return Component && Component.prototype && typeof Component.prototype.render === 'function';\n}\nexport function isRefForwardingComponent(C) {\n  var _item$$$typeof;\n\n  var item = C;\n  return (item === null || item === void 0 ? void 0 : (_item$$$typeof = item.$$typeof) === null || _item$$$typeof === void 0 ? void 0 : _item$$$typeof.toString()) === 'Symbol(react.forward_ref)';\n}\nexport function isRefable(C) {\n  return isClassComponent(C) || isRefForwardingComponent(C);\n}\nexport function checkDecoratorArguments(functionName, signature) {\n  if (process.env.NODE_ENV !== 'production') {\n    for (var i = 0; i < (arguments.length <= 2 ? 0 : arguments.length - 2); i++) {\n      var arg = i + 2 < 2 || arguments.length <= i + 2 ? undefined : arguments[i + 2];\n\n      if (arg && arg.prototype && arg.prototype.render) {\n        // eslint-disable-next-line no-console\n        console.error('You seem to be applying the arguments in the wrong order. ' + \"It should be \".concat(functionName, \"(\").concat(signature, \")(Component), not the other way around. \") + 'Read more: http://react-dnd.github.io/react-dnd/docs/troubleshooting#you-seem-to-be-applying-the-arguments-in-the-wrong-order');\n        return;\n      }\n    }\n  }\n}","function _typeof(obj) { \"@babel/helpers - typeof\"; if (typeof Symbol === \"function\" && typeof Symbol.iterator === \"symbol\") { _typeof = function _typeof(obj) { return typeof obj; }; } else { _typeof = function _typeof(obj) { return obj && typeof Symbol === \"function\" && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj; }; } return _typeof(obj); }\n\nexport function isValidType(type, allowArray) {\n  return typeof type === 'string' || _typeof(type) === 'symbol' || !!allowArray && Array.isArray(type) && type.every(function (t) {\n    return isValidType(t, false);\n  });\n}","function _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nfunction _defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } }\n\nfunction _createClass(Constructor, protoProps, staticProps) { if (protoProps) _defineProperties(Constructor.prototype, protoProps); if (staticProps) _defineProperties(Constructor, staticProps); return Constructor; }\n\nimport { invariant } from '@react-dnd/invariant';\nimport { isPlainObject } from '../utils/js_utils';\nimport { getDecoratedComponent } from './utils';\nvar ALLOWED_SPEC_METHODS = ['canDrag', 'beginDrag', 'isDragging', 'endDrag'];\nvar REQUIRED_SPEC_METHODS = ['beginDrag'];\n\nvar SourceImpl = /*#__PURE__*/function () {\n  function SourceImpl(spec, monitor, ref) {\n    var _this = this;\n\n    _classCallCheck(this, SourceImpl);\n\n    this.props = null;\n\n    this.beginDrag = function () {\n      if (!_this.props) {\n        return;\n      }\n\n      var item = _this.spec.beginDrag(_this.props, _this.monitor, _this.ref.current);\n\n      if (process.env.NODE_ENV !== 'production') {\n        invariant(isPlainObject(item), 'beginDrag() must return a plain object that represents the dragged item. ' + 'Instead received %s. ' + 'Read more: http://react-dnd.github.io/react-dnd/docs/api/drag-source', item);\n      }\n\n      return item;\n    };\n\n    this.spec = spec;\n    this.monitor = monitor;\n    this.ref = ref;\n  }\n\n  _createClass(SourceImpl, [{\n    key: \"receiveProps\",\n    value: function receiveProps(props) {\n      this.props = props;\n    }\n  }, {\n    key: \"canDrag\",\n    value: function canDrag() {\n      if (!this.props) {\n        return false;\n      }\n\n      if (!this.spec.canDrag) {\n        return true;\n      }\n\n      return this.spec.canDrag(this.props, this.monitor);\n    }\n  }, {\n    key: \"isDragging\",\n    value: function isDragging(globalMonitor, sourceId) {\n      if (!this.props) {\n        return false;\n      }\n\n      if (!this.spec.isDragging) {\n        return sourceId === globalMonitor.getSourceId();\n      }\n\n      return this.spec.isDragging(this.props, this.monitor);\n    }\n  }, {\n    key: \"endDrag\",\n    value: function endDrag() {\n      if (!this.props) {\n        return;\n      }\n\n      if (!this.spec.endDrag) {\n        return;\n      }\n\n      this.spec.endDrag(this.props, this.monitor, getDecoratedComponent(this.ref));\n    }\n  }]);\n\n  return SourceImpl;\n}();\n\nexport function createSourceFactory(spec) {\n  Object.keys(spec).forEach(function (key) {\n    invariant(ALLOWED_SPEC_METHODS.indexOf(key) > -1, 'Expected the drag source specification to only have ' + 'some of the following keys: %s. ' + 'Instead received a specification with an unexpected \"%s\" key. ' + 'Read more: http://react-dnd.github.io/react-dnd/docs/api/drag-source', ALLOWED_SPEC_METHODS.join(', '), key);\n    invariant(typeof spec[key] === 'function', 'Expected %s in the drag source specification to be a function. ' + 'Instead received a specification with %s: %s. ' + 'Read more: http://react-dnd.github.io/react-dnd/docs/api/drag-source', key, key, spec[key]);\n  });\n  REQUIRED_SPEC_METHODS.forEach(function (key) {\n    invariant(typeof spec[key] === 'function', 'Expected %s in the drag source specification to be a function. ' + 'Instead received a specification with %s: %s. ' + 'Read more: http://react-dnd.github.io/react-dnd/docs/api/drag-source', key, key, spec[key]);\n  });\n  return function createSource(monitor, ref) {\n    return new SourceImpl(spec, monitor, ref);\n  };\n}","import { invariant } from '@react-dnd/invariant';\nimport { isPlainObject } from '../utils/js_utils';\nimport { checkDecoratorArguments } from './utils';\nimport { decorateHandler } from './decorateHandler';\nimport { registerSource } from '../common/registration';\nimport { DragSourceMonitorImpl } from '../common/DragSourceMonitorImpl';\nimport { SourceConnector } from '../common/SourceConnector';\nimport { isValidType } from '../utils/isValidType';\nimport { createSourceFactory } from './createSourceFactory';\n/**\n * Decorates a component as a dragsource\n * @param type The dragsource type\n * @param spec The drag source specification\n * @param collect The props collector function\n * @param options DnD options\n */\n\nexport function DragSource(type, spec, collect) {\n  var options = arguments.length > 3 && arguments[3] !== undefined ? arguments[3] : {};\n  checkDecoratorArguments('DragSource', 'type, spec, collect[, options]', type, spec, collect, options);\n  var getType = type;\n\n  if (typeof type !== 'function') {\n    invariant(isValidType(type), 'Expected \"type\" provided as the first argument to DragSource to be ' + 'a string, or a function that returns a string given the current props. ' + 'Instead, received %s. ' + 'Read more: http://react-dnd.github.io/react-dnd/docs/api/drag-source', type);\n\n    getType = function getType() {\n      return type;\n    };\n  }\n\n  invariant(isPlainObject(spec), 'Expected \"spec\" provided as the second argument to DragSource to be ' + 'a plain object. Instead, received %s. ' + 'Read more: http://react-dnd.github.io/react-dnd/docs/api/drag-source', spec);\n  var createSource = createSourceFactory(spec);\n  invariant(typeof collect === 'function', 'Expected \"collect\" provided as the third argument to DragSource to be ' + 'a function that returns a plain object of props to inject. ' + 'Instead, received %s. ' + 'Read more: http://react-dnd.github.io/react-dnd/docs/api/drag-source', collect);\n  invariant(isPlainObject(options), 'Expected \"options\" provided as the fourth argument to DragSource to be ' + 'a plain object when specified. ' + 'Instead, received %s. ' + 'Read more: http://react-dnd.github.io/react-dnd/docs/api/drag-source', collect);\n  return function decorateSource(DecoratedComponent) {\n    return decorateHandler({\n      containerDisplayName: 'DragSource',\n      createHandler: createSource,\n      registerHandler: registerSource,\n      createConnector: function createConnector(backend) {\n        return new SourceConnector(backend);\n      },\n      createMonitor: function createMonitor(manager) {\n        return new DragSourceMonitorImpl(manager);\n      },\n      DecoratedComponent: DecoratedComponent,\n      getType: getType,\n      collect: collect,\n      options: options\n    });\n  };\n}"],"sourceRoot":""}