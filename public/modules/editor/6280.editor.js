(self.webpackChunk=self.webpackChunk||[]).push([[6280],{96280:(t,e,r)=>{"use strict";r.r(e),r.d(e,{default:()=>H});var n=r(6610),s=r(5991),o=r(63349),i=r(10379),a=r(46070),p=r(77608),c=r(67294),u=r(96156),l=r(34699),d=r(73935),f=r(38240),h=r(82372),b=r(77421),m=r(36531),y=r(96333),g=r(62556);const w={name:"applyStyles",enabled:!0,phase:"write",fn:function(t){var e=t.state;Object.keys(e.elements).forEach((function(t){var r=e.styles[t]||{},n=e.attributes[t]||{},s=e.elements[t];(0,g.Re)(s)&&(0,y.Z)(s)&&(Object.assign(s.style,r),Object.keys(n).forEach((function(t){var e=n[t];!1===e?s.removeAttribute(t):s.setAttribute(t,!0===e?"":e)})))}))},effect:function(t){var e=t.state,r={popper:{position:e.options.strategy,left:"0",top:"0",margin:"0"},arrow:{position:"absolute"},reference:{}};return Object.assign(e.elements.popper.style,r.popper),e.styles=r,e.elements.arrow&&Object.assign(e.elements.arrow.style,r.arrow),function(){Object.keys(e.elements).forEach((function(t){var n=e.elements[t],s=e.attributes[t]||{},o=Object.keys(e.styles.hasOwnProperty(t)?e.styles[t]:r[t]).reduce((function(t,e){return t[e]="",t}),{});(0,g.Re)(n)&&(0,y.Z)(n)&&(Object.assign(n.style,o),Object.keys(s).forEach((function(t){n.removeAttribute(t)})))}))}},requires:["computeStyles"]};var v=r(82122),_=r(45228),O=r(43920),S=r(66896),k=r(19892),E=[h.Z,b.Z,m.Z,w,v.Z,_.Z,O.Z,S.Z,k.Z],Z=(0,f.kZ)({defaultModifiers:E}),j=r(69590),P=r.n(j),T=function(t){return t.reduce((function(t,e){var r=e[0],n=e[1];return t[r]=n,t}),{})},R="undefined"!=typeof window&&window.document&&window.document.createElement?c.useLayoutEffect:c.useEffect,z=[],M=r(35713),U=r(76450);function C(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),r.push.apply(r,n)}return r}function D(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?C(Object(r),!0).forEach((function(e){(0,u.Z)(t,e,r[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):C(Object(r)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}))}return t}function N(t){var e=(0,c.useRef)(),r=(0,c.useState)(t.settings.updateSettings||{}),n=(0,l.Z)(r,2),s=n[0],o=n[1],i=(0,c.useState)(!1),a=(0,l.Z)(i,2),p=a[0],u=a[1],f=(0,U.D9)(t.updateToken),h=document.body;t.editor||(h=(0,c.useMemo)((function(){return(0,M.isEditor)()?document.getElementById("editorContent").contentWindow.document.body:document.body})));var b=t.settings.placement,m=["bottom-start","bottom","bottom-end","top-start","top","top-end","left-start","left","left-end","right-start","right","right-end"];-1===m.indexOf(b)&&(console.log(b),b=m[0]);var y=function(t,e,r){void 0===r&&(r={});var n=c.useRef(null),s={onFirstUpdate:r.onFirstUpdate,placement:r.placement||"bottom",strategy:r.strategy||"absolute",modifiers:r.modifiers||z},o=c.useState({styles:{popper:{position:s.strategy,left:"0",top:"0"},arrow:{position:"absolute"}},attributes:{}}),i=o[0],a=o[1],p=c.useMemo((function(){return{name:"updateState",enabled:!0,phase:"write",fn:function(t){var e=t.state,r=Object.keys(e.elements);a({styles:T(r.map((function(t){return[t,e.styles[t]||{}]}))),attributes:T(r.map((function(t){return[t,e.attributes[t]]})))})},requires:["computeStyles"]}}),[]),u=c.useMemo((function(){var t={onFirstUpdate:s.onFirstUpdate,placement:s.placement,strategy:s.strategy,modifiers:[].concat(s.modifiers,[p,{name:"applyStyles",enabled:!1}])};return P()(n.current,t)?n.current||t:(n.current=t,t)}),[s.onFirstUpdate,s.placement,s.strategy,s.modifiers,p]),l=c.useRef();return R((function(){l.current&&l.current.setOptions(u)}),[u]),R((function(){if(null!=t&&null!=e){var n=(r.createPopper||Z)(t,e,u);return l.current=n,function(){n.destroy(),l.current=null}}}),[t,e,r.createPopper]),{state:l.current?l.current.state:null,styles:i.styles,attributes:i.attributes,update:l.current?l.current.update:null,forceUpdate:l.current?l.current.forceUpdate:null}}(t.target.current,e.current,{placement:b,modifiers:[{name:"offset",options:{offset:t.settings.offset}}]}),g=y.styles,w=y.attributes,v=y.forceUpdate,_=y.update;return(0,c.useEffect)((function(){t.updateToken!==f&&(v(),new Event("resize",{bubbles:!0,cancelable:!0}),(0,M.isEditor)()||console.log(),_()),0!==Object.keys(s).length&&JSON.stringify(s)!==JSON.stringify(t.settings.updateSettings)&&(o(t.settings.updateSettings),v()),!p&&t.target.current&&(console.log("aann"),u(!0))}),[t.children,b,t.target,t.updateToken]),t.portal?d.createPortal(c.cloneElement(t.children,D({ref:e,style:g.popper},w.popper)),h):c.cloneElement(t.children,D({ref:e,style:g.popper},w.popper))}var F=r(46251);const H=function(t){(0,i.Z)(l,t);var e,r,u=(e=l,r=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}(),function(){var t,n=(0,p.Z)(e);if(r){var s=(0,p.Z)(this).constructor;t=Reflect.construct(n,arguments,s)}else t=n.apply(this,arguments);return(0,a.Z)(this,t)});function l(t){var e;return(0,n.Z)(this,l),(e=u.call(this,t)).state={show:!1,updateToken:void 0},e.show=e.show.bind((0,o.Z)(e)),e.leaveHide=e.leaveHide.bind((0,o.Z)(e)),e.enterShow=e.enterShow.bind((0,o.Z)(e)),e.children=c.createRef(),e}return(0,s.Z)(l,[{key:"show",value:function(){var t=this;this.props.settings.show_delay_dropbar_options.size||this.props.settings.hide_delay_dropbar_options.size?this.state.show?setTimeout((function(){t.setState((function(t){return{show:!t.show}}))}),this.props.settings.hide_delay_dropbar_options.size):setTimeout((function(){t.setState((function(t){return{show:!t.show}}))}),this.props.settings.show_delay_dropbar_options.size):this.setState((function(t){return{show:!t.show}}))}},{key:"leaveHide",value:function(){var t=this;this.props.settings.hide_delay_dropbar_options.size?setTimeout((function(){t.setState({show:!1})}),this.props.settings.hide_delay_dropbar_options.size):this.setState({show:!1})}},{key:"enterShow",value:function(t){var e=this;t.currentTarget,this.props.showDelay.size&&!this.state.show?setTimeout((function(){e.setState({show:!0})}),this.props.showDelay.size):this.setState((function(t){return{show:!t.show}}))}},{key:"componentDidUpdate",value:function(t,e,r){this.state.show,e.show}},{key:"render",value:function(){var t=this,e=c.Children.only(this.props.children),r="altrp-dropbar-"+this.props.className,n=this.props.settings.type_dropbar_section||"text",s=this.props.getContent("content_dropbar_section");return c.createElement("div",{className:"altrp-dropbar altrp-dropbar-"+r},c.createElement("span",{className:"altrp-dropbar-children-wrapper "+r+"-wrapper",onMouseEnter:"hover"===this.props.settings.mode_dropbar_options?this.enterShow:null,onMouseLeave:"hover"===this.props.settings.mode_dropbar_options?this.leaveHide:null},c.cloneElement(e,{ref:this.children,onClick:"click"===this.props.settings.mode_dropbar_options?this.show:null}),c.createElement(N,{target:this.children,portal:!0,updateToken:this.state.updateToken,settings:{placement:this.props.settings.position_dropbar_options,offset:[0,this.props.settings.offset_dropbar_options.size],updateSettings:{width:this.props.settings.width_dropbar_options}}},c.createElement("div",{className:"altrp-dropbar-container "+" ".concat(this.props.elemenentId,"-altrp-dropbar ")+r+"-containter"+(this.state.show?" altrp-dropbar-container-show":" altrp-dropbar-container-hide")},"text"===n?c.createElement("div",{className:"altrp-dropbar-content "+r+"-content",dangerouslySetInnerHTML:{__html:s||""}}):c.createElement(F.Z,{onLoad:function(){t.setState({updateToken:Math.random()})},templateId:this.props.settings.template_dropbar_section,cardModel:this.props.element.getCurrentModel()})))))}}]),l}(c.Component)}}]);
//# sourceMappingURL=6280.editor.js.map