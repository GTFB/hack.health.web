{"version":3,"sources":["webpack:///./node_modules/@popperjs/core/lib/modifiers/applyStyles.js","webpack:///./node_modules/@popperjs/core/lib/popper.js","webpack:///./node_modules/react-popper/lib/esm/utils.js","webpack:///./node_modules/react-popper/lib/esm/usePopper.js","webpack:///./resources/modules/editor/src/js/components/altrp-popper/AltrpPopper.js","webpack:///./resources/modules/editor/src/js/components/altrp-dropbar/AltrpDropbar.js"],"names":["name","enabled","phase","fn","_ref","state","Object","keys","elements","forEach","style","styles","attributes","element","getNodeName","assign","value","removeAttribute","setAttribute","effect","_ref2","initialStyles","popper","position","options","strategy","left","top","margin","arrow","reference","hasOwnProperty","reduce","property","attribute","requires","defaultModifiers","eventListeners","popperOffsets","computeStyles","offset","flip","preventOverflow","hide","fromEntries","entries","acc","key","useIsomorphicLayoutEffect","window","document","createElement","EMPTY_MODIFIERS","AltrpPopper","props","object","useRef","useState","settings","updateSettings","setUpdateSettings","getTargetRef","setGetTargetRef","prevUpdateToken","usePrevious","updateToken","body","editor","useMemo","isEditor","getElementById","contentWindow","placement","variantPlace","indexOf","console","log","referenceElement","popperElement","prevOptions","optionsWithDefaults","onFirstUpdate","modifiers","_React$useState","setState","updateStateModifier","map","popperOptions","newOptions","concat","current","popperInstanceRef","setOptions","popperInstance","createPopper","destroy","update","forceUpdate","usePopper","target","useEffect","Event","bubbles","cancelable","length","JSON","stringify","children","portal","ReactDOM","React","ref","show","undefined","bind","leaveHide","enterShow","this","show_delay_dropbar_options","size","hide_delay_dropbar_options","setTimeout","e","currentTarget","showDelay","prevProps","prevState","snapshot","mainClass","className","type","type_dropbar_section","content_dropbar_section","getContent","onMouseEnter","mode_dropbar_options","onMouseLeave","onClick","position_dropbar_options","offset_dropbar_options","width","width_dropbar_options","elemenentId","dangerouslySetInnerHTML","__html","TemplateLoader","onLoad","Math","random","templateId","template_dropbar_section","cardModel","getCurrentModel","Component"],"mappings":"qSA4EA,SACEA,KAAM,cACNC,SAAS,EACTC,MAAO,QACPC,GA5EF,SAAqBC,GACnB,IAAIC,EAAQD,EAAKC,MACjBC,OAAOC,KAAKF,EAAMG,UAAUC,SAAQ,SAAUT,GAC5C,IAAIU,EAAQL,EAAMM,OAAOX,IAAS,GAC9BY,EAAaP,EAAMO,WAAWZ,IAAS,GACvCa,EAAUR,EAAMG,SAASR,IAExB,QAAca,KAAa,EAAAC,EAAA,GAAYD,KAO5CP,OAAOS,OAAOF,EAAQH,MAAOA,GAC7BJ,OAAOC,KAAKK,GAAYH,SAAQ,SAAUT,GACxC,IAAIgB,EAAQJ,EAAWZ,IAET,IAAVgB,EACFH,EAAQI,gBAAgBjB,GAExBa,EAAQK,aAAalB,GAAgB,IAAVgB,EAAiB,GAAKA,WAwDvDG,OAlDF,SAAgBC,GACd,IAAIf,EAAQe,EAAMf,MACdgB,EAAgB,CAClBC,OAAQ,CACNC,SAAUlB,EAAMmB,QAAQC,SACxBC,KAAM,IACNC,IAAK,IACLC,OAAQ,KAEVC,MAAO,CACLN,SAAU,YAEZO,UAAW,IASb,OAPAxB,OAAOS,OAAOV,EAAMG,SAASc,OAAOZ,MAAOW,EAAcC,QACzDjB,EAAMM,OAASU,EAEXhB,EAAMG,SAASqB,OACjBvB,OAAOS,OAAOV,EAAMG,SAASqB,MAAMnB,MAAOW,EAAcQ,OAGnD,WACLvB,OAAOC,KAAKF,EAAMG,UAAUC,SAAQ,SAAUT,GAC5C,IAAIa,EAAUR,EAAMG,SAASR,GACzBY,EAAaP,EAAMO,WAAWZ,IAAS,GAGvCU,EAFkBJ,OAAOC,KAAKF,EAAMM,OAAOoB,eAAe/B,GAAQK,EAAMM,OAAOX,GAAQqB,EAAcrB,IAE7EgC,QAAO,SAAUtB,EAAOuB,GAElD,OADAvB,EAAMuB,GAAY,GACXvB,IACN,KAEE,QAAcG,KAAa,EAAAC,EAAA,GAAYD,KAI5CP,OAAOS,OAAOF,EAAQH,MAAOA,GAC7BJ,OAAOC,KAAKK,GAAYH,SAAQ,SAAUyB,GACxCrB,EAAQI,gBAAgBiB,YAa9BC,SAAU,CAAC,kB,2DCxETC,EAAmB,CAACC,EAAA,EAAgBC,EAAA,EAAeC,EAAA,EAAe,EAAaC,EAAA,EAAQC,EAAA,EAAMC,EAAA,EAAiBb,EAAA,EAAOc,EAAA,GACrH,GAA4B,QAAgB,CAC9CP,iBAAkBA,I,oBC4BTQ,EAAc,SAAqBC,GAC5C,OAAOA,EAAQb,QAAO,SAAUc,EAAK1C,GACnC,IAAI2C,EAAM3C,EAAK,GACXY,EAAQZ,EAAK,GAEjB,OADA0C,EAAIC,GAAO/B,EACJ8B,IACN,KAMME,EAA8C,oBAAXC,QAA0BA,OAAOC,UAAYD,OAAOC,SAASC,cAAgB,kBAAwB,YChD/IC,EAAkB,G,2lBCEP,SAASC,EAAYC,GAClC,IAAMC,GAASC,cACf,GAA4CC,cAASH,EAAMI,SAASC,gBAAkB,IAAtF,eAAOA,EAAP,KAAuBC,EAAvB,KACA,GAAwCH,eAAS,GAAjD,eAAOI,EAAP,KAAqBC,EAArB,KACMC,GAAkBC,QAAYV,EAAMW,aAEtCC,EAAOhB,SAASgB,KAEhBZ,EAAMa,SACRD,GAAOE,cAAQ,WACb,OAAOC,gBACLnB,SAASoB,eAAe,iBAAiBC,cAAcrB,SAASgB,KAEhEhB,SAASgB,SAIf,IAAIM,EAAYlB,EAAMI,SAASc,UACzBC,EAAe,CACnB,eACA,SACA,aACA,YACA,MACA,UACA,aACA,OACA,WACA,cACA,QACA,cAGsC,IAArCA,EAAaC,QAAQF,KACtBG,QAAQC,IAAIJ,GACZA,EAAYC,EAAa,IAE3B,MDtCqB,SAAmBI,EAAkBC,EAAetD,QACzD,IAAZA,IACFA,EAAU,IAGZ,IAAIuD,EAAc,SAAa,MAC3BC,EAAsB,CACxBC,cAAezD,EAAQyD,cACvBT,UAAWhD,EAAQgD,WAAa,SAChC/C,SAAUD,EAAQC,UAAY,WAC9ByD,UAAW1D,EAAQ0D,WAAa9B,GAG9B+B,EAAkB,WAAe,CACnCxE,OAAQ,CACNW,OAAQ,CACNC,SAAUyD,EAAoBvD,SAC9BC,KAAM,IACNC,IAAK,KAEPE,MAAO,CACLN,SAAU,aAGdX,WAAY,KAEVP,EAAQ8E,EAAgB,GACxBC,EAAWD,EAAgB,GAE3BE,EAAsB,WAAc,WACtC,MAAO,CACLrF,KAAM,cACNC,SAAS,EACTC,MAAO,QACPC,GAAI,SAAYC,GACd,IAAIC,EAAQD,EAAKC,MACbG,EAAWF,OAAOC,KAAKF,EAAMG,UACjC4E,EAAS,CACPzE,OAAQiC,EAAYpC,EAAS8E,KAAI,SAAUzE,GACzC,MAAO,CAACA,EAASR,EAAMM,OAAOE,IAAY,QAE5CD,WAAYgC,EAAYpC,EAAS8E,KAAI,SAAUzE,GAC7C,MAAO,CAACA,EAASR,EAAMO,WAAWC,WAIxCsB,SAAU,CAAC,oBAEZ,IACCoD,EAAgB,WAAc,WAChC,IAAIC,EAAa,CACfP,cAAeD,EAAoBC,cACnCT,UAAWQ,EAAoBR,UAC/B/C,SAAUuD,EAAoBvD,SAC9ByD,UAAW,GAAGO,OAAOT,EAAoBE,UAAW,CAACG,EAAqB,CACxErF,KAAM,cACNC,SAAS,MAIb,OAAI,IAAQ8E,EAAYW,QAASF,GACxBT,EAAYW,SAAWF,GAE9BT,EAAYW,QAAUF,EACfA,KAER,CAACR,EAAoBC,cAAeD,EAAoBR,UAAWQ,EAAoBvD,SAAUuD,EAAoBE,UAAWG,IAC/HM,EAAoB,WAmBxB,OAlBA3C,GAA0B,WACpB2C,EAAkBD,SACpBC,EAAkBD,QAAQE,WAAWL,KAEtC,CAACA,IACJvC,GAA0B,WACxB,GAAwB,MAApB6B,GAA6C,MAAjBC,EAAhC,CAIA,IACIe,GADerE,EAAQsE,cAAgB,GACTjB,EAAkBC,EAAeS,GAEnE,OADAI,EAAkBD,QAAUG,EACrB,WACLA,EAAeE,UACfJ,EAAkBD,QAAU,SAE7B,CAACb,EAAkBC,EAAetD,EAAQsE,eACtC,CACLzF,MAAOsF,EAAkBD,QAAUC,EAAkBD,QAAQrF,MAAQ,KACrEM,OAAQN,EAAMM,OACdC,WAAYP,EAAMO,WAClBoF,OAAQL,EAAkBD,QAAUC,EAAkBD,QAAQM,OAAS,KACvEC,YAAaN,EAAkBD,QAAUC,EAAkBD,QAAQO,YAAc,MCrDjCC,CAAU5C,EAAM6C,OAAOT,QAASnC,EAAOmC,QAAS,CAChGlB,YACAU,UAAW,CACT,CACElF,KAAM,SACNwB,QAAS,CACPgB,OAAQc,EAAMI,SAASlB,YANxB7B,EAAP,EAAOA,OAAQC,EAAf,EAAeA,WAAYqF,EAA3B,EAA2BA,YAAaD,EAAxC,EAAwCA,OAyCxC,OA7BAI,gBAAU,WACL9C,EAAMW,cAAgBF,IACvBkC,IACc,IAAII,MAAM,SAAU,CAACC,SAAU,EAAMC,YAAa,KAC7DlC,iBAIDM,QAAQC,MAFRoB,KAQuC,IAAvC1F,OAAOC,KAAKoD,GAAgB6C,QAC1BC,KAAKC,UAAU/C,KAAoB8C,KAAKC,UAAUpD,EAAMI,SAASC,kBACnEC,EAAkBN,EAAMI,SAASC,gBACjCsC,MAIApC,GAAgBP,EAAM6C,OAAOT,UAC/Bf,QAAQC,IAAI,QACZd,GAAgB,MAIjB,CAACR,EAAMqD,SAAUnC,EAAWlB,EAAM6C,OAAQ7C,EAAMW,cAEhDX,EAAMsD,OACAC,eACLC,eAAmBxD,EAAMqD,SAAzB,GACEI,IAAKxD,EACL7C,MAAOC,EAAOW,QACXV,EAAWU,SAGhB4C,GAGG4C,eAAmBxD,EAAMqD,SAAzB,GACLI,IAAKxD,EACL7C,MAAOC,EAAOW,QACXV,EAAWU,S,eCqClB,Q,wcAlIE,WAAYgC,GAAO,6BACjB,cAAMA,IAEDjD,MAAQ,CACX2G,MAAM,EACN/C,iBAAagD,GAGf,EAAKD,KAAO,EAAKA,KAAKE,MAAV,WACZ,EAAKC,UAAY,EAAKA,UAAUD,MAAf,WACjB,EAAKE,UAAY,EAAKA,UAAUF,MAAf,WAEjB,EAAKP,SAAWG,cAZC,E,mCAenB,WAAO,WACFO,KAAK/D,MAAMI,SAAS4D,2BAA2BC,MAAQF,KAAK/D,MAAMI,SAAS8D,2BAA2BD,KACnGF,KAAKhH,MAAM2G,KAKbS,YAAW,WACT,EAAKrC,UAAS,SAAC/E,GAAD,MAAY,CAAE2G,MAAO3G,EAAM2G,WACxCK,KAAK/D,MAAMI,SAAS8D,2BAA2BD,MANlDE,YAAW,WACT,EAAKrC,UAAS,SAAC/E,GAAD,MAAY,CAAE2G,MAAO3G,EAAM2G,WACxCK,KAAK/D,MAAMI,SAAS4D,2BAA2BC,MAOpDF,KAAKjC,UAAS,SAAC/E,GAAD,MAAY,CAAE2G,MAAO3G,EAAM2G,W,uBAI7C,WAAY,WAEPK,KAAK/D,MAAMI,SAAS8D,2BAA2BD,KAChDE,YAAW,WACT,EAAKrC,SAAS,CAAE4B,MAAM,MACrBK,KAAK/D,MAAMI,SAAS8D,2BAA2BD,MAElDF,KAAKjC,SAAS,CAAE4B,MAAM,M,uBAI1B,SAAUU,GAAG,WACGA,EAAEC,cACbN,KAAK/D,MAAMsE,UAAUL,OAASF,KAAKhH,MAAM2G,KAC1CS,YAAW,WACT,EAAKrC,SAAS,CAAE4B,MAAM,MACrBK,KAAK/D,MAAMsE,UAAUL,MAExBF,KAAKjC,UAAS,SAAC/E,GAAD,MAAY,CAAE2G,MAAO3G,EAAM2G,W,gCAI7C,SAAmBa,EAAWC,EAAWC,GACpCV,KAAKhH,MAAM2G,KAASc,EAAUd,O,oBAInC,WAAS,WACDL,EAAWG,gBAAoBO,KAAK/D,MAAMqD,UAE5CqB,EAAY,iBACdX,KAAK/D,MAAM2E,UAETC,EAAOb,KAAK/D,MAAMI,SAASyE,sBAAwB,OACnDC,EAA0Bf,KAAK/D,MAAM+E,WAAW,2BACpD,OACE,uBAAKJ,UAAW,+BAAiCD,GAC/C,wBAAMC,UAAW,kCAAoCD,EAAY,WAC3DM,aAA2D,UAA7CjB,KAAK/D,MAAMI,SAAS6E,qBAAmClB,KAAKD,UAAY,KACtFoB,aAA2D,UAA7CnB,KAAK/D,MAAMI,SAAS6E,qBAAmClB,KAAKF,UAAY,MAGxFL,eAAmBH,EACjB,CACEI,IAAKM,KAAKV,SACV8B,QAAsD,UAA7CpB,KAAK/D,MAAMI,SAAS6E,qBAAmClB,KAAKL,KAAO,OAOlF,gBAAC3D,EAAD,CACE8C,OAAQkB,KAAKV,SACbC,QAAQ,EACR3C,YAAaoD,KAAKhH,MAAM4D,YACxBP,SAAU,CACRc,UAAW6C,KAAK/D,MAAMI,SAASgF,yBAC/BlG,OAAQ,CAAC,EAAG6E,KAAK/D,MAAMI,SAASiF,uBAAuBpB,MACvD5D,eAAgB,CACdiF,MAAOvB,KAAK/D,MAAMI,SAASmF,yBAI/B,uBACEZ,UAAW,sCACNZ,KAAK/D,MAAMwF,YADL,mBAEXd,EACA,eACCX,KAAKhH,MAAM2G,KAAO,gCAAkC,kCAG1C,SAATkB,EACEpB,gBAAoB,MAClB,CACEmB,UAAW,yBAA2BD,EAAY,WAClDe,wBAAyB,CACvBC,OAAQZ,GAA2B,MAKzC,gBAACa,EAAA,EAAD,CACEC,OAAQ,WACN,EAAK9D,SAAS,CAAEnB,YAAakF,KAAKC,YAEpCC,WAAYhC,KAAK/D,MAAMI,SAAS4F,yBAChCC,UAAWlC,KAAK/D,MAAMzC,QAAQ2I,4B,GAvH5BC","file":"6280.editor.js","sourcesContent":["import getNodeName from \"../dom-utils/getNodeName.js\";\nimport { isHTMLElement } from \"../dom-utils/instanceOf.js\"; // This modifier takes the styles prepared by the `computeStyles` modifier\n// and applies them to the HTMLElements such as popper and arrow\n\nfunction applyStyles(_ref) {\n  var state = _ref.state;\n  Object.keys(state.elements).forEach(function (name) {\n    var style = state.styles[name] || {};\n    var attributes = state.attributes[name] || {};\n    var element = state.elements[name]; // arrow is optional + virtual elements\n\n    if (!isHTMLElement(element) || !getNodeName(element)) {\n      return;\n    } // Flow doesn't support to extend this property, but it's the most\n    // effective way to apply styles to an HTMLElement\n    // $FlowFixMe[cannot-write]\n\n\n    Object.assign(element.style, style);\n    Object.keys(attributes).forEach(function (name) {\n      var value = attributes[name];\n\n      if (value === false) {\n        element.removeAttribute(name);\n      } else {\n        element.setAttribute(name, value === true ? '' : value);\n      }\n    });\n  });\n}\n\nfunction effect(_ref2) {\n  var state = _ref2.state;\n  var initialStyles = {\n    popper: {\n      position: state.options.strategy,\n      left: '0',\n      top: '0',\n      margin: '0'\n    },\n    arrow: {\n      position: 'absolute'\n    },\n    reference: {}\n  };\n  Object.assign(state.elements.popper.style, initialStyles.popper);\n  state.styles = initialStyles;\n\n  if (state.elements.arrow) {\n    Object.assign(state.elements.arrow.style, initialStyles.arrow);\n  }\n\n  return function () {\n    Object.keys(state.elements).forEach(function (name) {\n      var element = state.elements[name];\n      var attributes = state.attributes[name] || {};\n      var styleProperties = Object.keys(state.styles.hasOwnProperty(name) ? state.styles[name] : initialStyles[name]); // Set all values to an empty string to unset them\n\n      var style = styleProperties.reduce(function (style, property) {\n        style[property] = '';\n        return style;\n      }, {}); // arrow is optional + virtual elements\n\n      if (!isHTMLElement(element) || !getNodeName(element)) {\n        return;\n      }\n\n      Object.assign(element.style, style);\n      Object.keys(attributes).forEach(function (attribute) {\n        element.removeAttribute(attribute);\n      });\n    });\n  };\n} // eslint-disable-next-line import/no-unused-modules\n\n\nexport default {\n  name: 'applyStyles',\n  enabled: true,\n  phase: 'write',\n  fn: applyStyles,\n  effect: effect,\n  requires: ['computeStyles']\n};","import { popperGenerator, detectOverflow } from \"./createPopper.js\";\nimport eventListeners from \"./modifiers/eventListeners.js\";\nimport popperOffsets from \"./modifiers/popperOffsets.js\";\nimport computeStyles from \"./modifiers/computeStyles.js\";\nimport applyStyles from \"./modifiers/applyStyles.js\";\nimport offset from \"./modifiers/offset.js\";\nimport flip from \"./modifiers/flip.js\";\nimport preventOverflow from \"./modifiers/preventOverflow.js\";\nimport arrow from \"./modifiers/arrow.js\";\nimport hide from \"./modifiers/hide.js\";\nvar defaultModifiers = [eventListeners, popperOffsets, computeStyles, applyStyles, offset, flip, preventOverflow, arrow, hide];\nvar createPopper = /*#__PURE__*/popperGenerator({\n  defaultModifiers: defaultModifiers\n}); // eslint-disable-next-line import/no-unused-modules\n\nexport { createPopper, popperGenerator, defaultModifiers, detectOverflow }; // eslint-disable-next-line import/no-unused-modules\n\nexport { createPopper as createPopperLite } from \"./popper-lite.js\"; // eslint-disable-next-line import/no-unused-modules\n\nexport * from \"./modifiers/index.js\";","import * as React from 'react';\n\n/**\n * Takes an argument and if it's an array, returns the first item in the array,\n * otherwise returns the argument. Used for Preact compatibility.\n */\nexport var unwrapArray = function unwrapArray(arg) {\n  return Array.isArray(arg) ? arg[0] : arg;\n};\n/**\n * Takes a maybe-undefined function and arbitrary args and invokes the function\n * only if it is defined.\n */\n\nexport var safeInvoke = function safeInvoke(fn) {\n  if (typeof fn === 'function') {\n    for (var _len = arguments.length, args = new Array(_len > 1 ? _len - 1 : 0), _key = 1; _key < _len; _key++) {\n      args[_key - 1] = arguments[_key];\n    }\n\n    return fn.apply(void 0, args);\n  }\n};\n/**\n * Sets a ref using either a ref callback or a ref object\n */\n\nexport var setRef = function setRef(ref, node) {\n  // if its a function call it\n  if (typeof ref === 'function') {\n    return safeInvoke(ref, node);\n  } // otherwise we should treat it as a ref object\n  else if (ref != null) {\n      ref.current = node;\n    }\n};\n/**\n * Simple ponyfill for Object.fromEntries\n */\n\nexport var fromEntries = function fromEntries(entries) {\n  return entries.reduce(function (acc, _ref) {\n    var key = _ref[0],\n        value = _ref[1];\n    acc[key] = value;\n    return acc;\n  }, {});\n};\n/**\n * Small wrapper around `useLayoutEffect` to get rid of the warning on SSR envs\n */\n\nexport var useIsomorphicLayoutEffect = typeof window !== 'undefined' && window.document && window.document.createElement ? React.useLayoutEffect : React.useEffect;","import * as React from 'react';\nimport { createPopper as defaultCreatePopper } from '@popperjs/core';\nimport isEqual from 'react-fast-compare';\nimport { fromEntries, useIsomorphicLayoutEffect } from './utils';\nvar EMPTY_MODIFIERS = [];\nexport var usePopper = function usePopper(referenceElement, popperElement, options) {\n  if (options === void 0) {\n    options = {};\n  }\n\n  var prevOptions = React.useRef(null);\n  var optionsWithDefaults = {\n    onFirstUpdate: options.onFirstUpdate,\n    placement: options.placement || 'bottom',\n    strategy: options.strategy || 'absolute',\n    modifiers: options.modifiers || EMPTY_MODIFIERS\n  };\n\n  var _React$useState = React.useState({\n    styles: {\n      popper: {\n        position: optionsWithDefaults.strategy,\n        left: '0',\n        top: '0'\n      },\n      arrow: {\n        position: 'absolute'\n      }\n    },\n    attributes: {}\n  }),\n      state = _React$useState[0],\n      setState = _React$useState[1];\n\n  var updateStateModifier = React.useMemo(function () {\n    return {\n      name: 'updateState',\n      enabled: true,\n      phase: 'write',\n      fn: function fn(_ref) {\n        var state = _ref.state;\n        var elements = Object.keys(state.elements);\n        setState({\n          styles: fromEntries(elements.map(function (element) {\n            return [element, state.styles[element] || {}];\n          })),\n          attributes: fromEntries(elements.map(function (element) {\n            return [element, state.attributes[element]];\n          }))\n        });\n      },\n      requires: ['computeStyles']\n    };\n  }, []);\n  var popperOptions = React.useMemo(function () {\n    var newOptions = {\n      onFirstUpdate: optionsWithDefaults.onFirstUpdate,\n      placement: optionsWithDefaults.placement,\n      strategy: optionsWithDefaults.strategy,\n      modifiers: [].concat(optionsWithDefaults.modifiers, [updateStateModifier, {\n        name: 'applyStyles',\n        enabled: false\n      }])\n    };\n\n    if (isEqual(prevOptions.current, newOptions)) {\n      return prevOptions.current || newOptions;\n    } else {\n      prevOptions.current = newOptions;\n      return newOptions;\n    }\n  }, [optionsWithDefaults.onFirstUpdate, optionsWithDefaults.placement, optionsWithDefaults.strategy, optionsWithDefaults.modifiers, updateStateModifier]);\n  var popperInstanceRef = React.useRef();\n  useIsomorphicLayoutEffect(function () {\n    if (popperInstanceRef.current) {\n      popperInstanceRef.current.setOptions(popperOptions);\n    }\n  }, [popperOptions]);\n  useIsomorphicLayoutEffect(function () {\n    if (referenceElement == null || popperElement == null) {\n      return;\n    }\n\n    var createPopper = options.createPopper || defaultCreatePopper;\n    var popperInstance = createPopper(referenceElement, popperElement, popperOptions);\n    popperInstanceRef.current = popperInstance;\n    return function () {\n      popperInstance.destroy();\n      popperInstanceRef.current = null;\n    };\n  }, [referenceElement, popperElement, options.createPopper]);\n  return {\n    state: popperInstanceRef.current ? popperInstanceRef.current.state : null,\n    styles: state.styles,\n    attributes: state.attributes,\n    update: popperInstanceRef.current ? popperInstanceRef.current.update : null,\n    forceUpdate: popperInstanceRef.current ? popperInstanceRef.current.forceUpdate : null\n  };\n};","import React, {useEffect, useRef, useState, useMemo} from \"react\";\r\nimport ReactDOM from \"react-dom\";\r\nimport {usePopper} from \"react-popper\";\r\nimport {isEditor} from \"../../../../../front-app/src/js/helpers\";\r\nimport { usePrevious } from \"../../../../../front-app/src/js/helpers/react\";\r\n\r\nexport default function AltrpPopper(props) {\r\n  const object = useRef();\r\n  const [updateSettings, setUpdateSettings] = useState(props.settings.updateSettings || {});\r\n  const [getTargetRef, setGetTargetRef] = useState(false);\r\n  const prevUpdateToken = usePrevious(props.updateToken);\r\n\r\n  let body = document.body;\r\n\r\n  if(!props.editor) {\r\n    body = useMemo(() => {\r\n      return isEditor() ?\r\n        document.getElementById(\"editorContent\").contentWindow.document.body\r\n        :\r\n        document.body\r\n    });\r\n  }\r\n\r\n  let placement = props.settings.placement;\r\n  const variantPlace = [\r\n    \"bottom-start\",\r\n    \"bottom\",\r\n    \"bottom-end\",\r\n    \"top-start\",\r\n    \"top\",\r\n    \"top-end\",\r\n    \"left-start\",\r\n    \"left\",\r\n    \"left-end\",\r\n    \"right-start\",\r\n    \"right\",\r\n    \"right-end\"\r\n  ];\r\n\r\n  if(variantPlace.indexOf(placement) === -1) {\r\n    console.log(placement)\r\n    placement = variantPlace[0]\r\n  }\r\n  const {styles, attributes, forceUpdate, update} = usePopper(props.target.current, object.current, {\r\n    placement,\r\n    modifiers: [\r\n      {\r\n        name: \"offset\",\r\n        options: {\r\n          offset: props.settings.offset\r\n        }\r\n      },\r\n    ]\r\n  });\r\n\r\n  useEffect(() => {\r\n    if(props.updateToken !== prevUpdateToken) {\r\n      forceUpdate();\r\n      const event = new Event(\"resize\", {bubbles : true, cancelable : true});\r\n      if(isEditor()) {\r\n        // altrpEditorContent.editorWindow.current.dispatchEvent(event)\r\n        update();\r\n      } else {\r\n        console.log();\r\n        // window.dispatchEvent(event)\r\n        update();\r\n      }\r\n    }\r\n\r\n    if (Object.keys(updateSettings).length !== 0) {\r\n      if (JSON.stringify(updateSettings) !== JSON.stringify(props.settings.updateSettings)) {\r\n        setUpdateSettings(props.settings.updateSettings);\r\n        forceUpdate()\r\n      }\r\n    }\r\n\r\n    if(!getTargetRef && props.target.current) {\r\n      console.log('aann')\r\n      setGetTargetRef(true)\r\n    }\r\n\r\n\r\n  }, [props.children, placement, props.target, props.updateToken]);\r\n\r\n  if(props.portal) {\r\n    return ReactDOM.createPortal((\r\n      React.cloneElement(props.children, {\r\n        ref: object,\r\n        style: styles.popper,\r\n        ...attributes.popper,\r\n      })\r\n    ),\r\n      body\r\n    )\r\n  }\r\n  return React.cloneElement(props.children, {\r\n    ref: object,\r\n    style: styles.popper,\r\n    ...attributes.popper,\r\n  })\r\n}","import React, {Component} from \"react\";\r\nimport AltrpPopper from \"../altrp-popper/AltrpPopper\";\r\nimport TemplateLoader from \"../template-loader/TemplateLoader\";\r\n\r\nclass Dropbar extends Component {\r\n  constructor(props) {\r\n    super(props);\r\n\r\n    this.state = {\r\n      show: false,\r\n      updateToken: undefined\r\n    };\r\n\r\n    this.show = this.show.bind(this);\r\n    this.leaveHide = this.leaveHide.bind(this);\r\n    this.enterShow = this.enterShow.bind(this);\r\n\r\n    this.children = React.createRef();\r\n  };\r\n\r\n  show() {\r\n    if(this.props.settings.show_delay_dropbar_options.size || this.props.settings.hide_delay_dropbar_options.size) {\r\n      if(!this.state.show) {\r\n        setTimeout(() => {\r\n          this.setState((state) => ({ show: !state.show }));\r\n        }, this.props.settings.show_delay_dropbar_options.size);\r\n      } else {\r\n        setTimeout(() => {\r\n          this.setState((state) => ({ show: !state.show }));\r\n        }, this.props.settings.hide_delay_dropbar_options.size);\r\n      }\r\n    } else {\r\n      this.setState((state) => ({ show: !state.show }));\r\n    };\r\n  };\r\n\r\n  leaveHide() {\r\n\r\n    if(this.props.settings.hide_delay_dropbar_options.size) {\r\n      setTimeout(() => {\r\n        this.setState({ show: false });\r\n      }, this.props.settings.hide_delay_dropbar_options.size)\r\n    } else {\r\n      this.setState({ show: false });\r\n    };\r\n  };\r\n\r\n  enterShow(e) {\r\n    let current = e.currentTarget;\r\n    if(this.props.showDelay.size && !this.state.show) {\r\n      setTimeout(() => {\r\n        this.setState({ show: true });\r\n      }, this.props.showDelay.size);\r\n    } else {\r\n      this.setState((state) => ({ show: !state.show }));\r\n    };\r\n  };\r\n\r\n  componentDidUpdate(prevProps, prevState, snapshot) {\r\n    if(this.state.show !== prevState.show) {\r\n    }\r\n  }\r\n\r\n  render() {\r\n    const children = React.Children.only(this.props.children);\r\n\r\n    let mainClass = \"altrp-dropbar-\" +\r\n      this.props.className;\r\n\r\n    let type = this.props.settings.type_dropbar_section || \"text\";\r\n    let content_dropbar_section = this.props.getContent('content_dropbar_section');\r\n    return (\r\n      <div className={\"altrp-dropbar altrp-dropbar-\" + mainClass}>\r\n        <span className={\"altrp-dropbar-children-wrapper \" + mainClass + \"-wrapper\"}\r\n              onMouseEnter={this.props.settings.mode_dropbar_options === \"hover\" ? this.enterShow : null}\r\n              onMouseLeave={this.props.settings.mode_dropbar_options === \"hover\" ? this.leaveHide : null}\r\n        >\r\n          {\r\n            React.cloneElement(children,\r\n              {\r\n                ref: this.children,\r\n                onClick: this.props.settings.mode_dropbar_options === \"click\" ? this.show : null,\r\n                // onMouseEnter: this.props.settings.mode_dropbar_options === \"hover\" ? this.enterShow : null,\r\n                // onMouseLeave: this.props.settings.mode_dropbar_options === \"hover\" ? this.leaveHide : null\r\n              }\r\n              )\r\n          }\r\n\r\n          <AltrpPopper\r\n            target={this.children}\r\n            portal={true}\r\n            updateToken={this.state.updateToken}\r\n            settings={{\r\n              placement: this.props.settings.position_dropbar_options,\r\n              offset: [0, this.props.settings.offset_dropbar_options.size],\r\n              updateSettings: {\r\n                width: this.props.settings.width_dropbar_options\r\n              }\r\n            }}\r\n          >\r\n            <div\r\n              className={\"altrp-dropbar-container \" +\r\n              (` ${this.props.elemenentId}-altrp-dropbar `) +\r\n              mainClass +\r\n              \"-containter\" +\r\n              (this.state.show ? \" altrp-dropbar-container-show\" : \" altrp-dropbar-container-hide\")}\r\n            >\r\n              {\r\n                type === \"text\" ? (\r\n                  React.createElement(\"div\",\r\n                    {\r\n                      className: \"altrp-dropbar-content \" + mainClass + \"-content\",\r\n                      dangerouslySetInnerHTML: {\r\n                        __html: content_dropbar_section || ''\r\n                      },\r\n                    }\r\n                  )\r\n                ) : (\r\n                  <TemplateLoader\r\n                    onLoad={() => {\r\n                      this.setState({ updateToken: Math.random() })\r\n                    }}\r\n                    templateId={this.props.settings.template_dropbar_section}\r\n                    cardModel={this.props.element.getCurrentModel()}\r\n                  />\r\n                )\r\n              }\r\n            </div>\r\n          </AltrpPopper>\r\n        </span>\r\n      </div>\r\n    );\r\n  };\r\n}\r\n\r\nexport default Dropbar\r\n"],"sourceRoot":""}