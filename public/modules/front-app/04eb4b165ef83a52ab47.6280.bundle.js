(self.webpackChunk=self.webpackChunk||[]).push([[6280],{96280:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>I});var n=r(6610),o=r(5991),s=r(63349),a=r(10379),i=r(46070),c=r(77608),p=r(67294),u=r(96156),l=r(34699),f=r(73935),d=r(38240),h=r(82372),m=r(77421),y=r(36531),b=r(96333),v=r(62556);const w={name:"applyStyles",enabled:!0,phase:"write",fn:function(e){var t=e.state;Object.keys(t.elements).forEach((function(e){var r=t.styles[e]||{},n=t.attributes[e]||{},o=t.elements[e];(0,v.Re)(o)&&(0,b.Z)(o)&&(Object.assign(o.style,r),Object.keys(n).forEach((function(e){var t=n[e];!1===t?o.removeAttribute(e):o.setAttribute(e,!0===t?"":t)})))}))},effect:function(e){var t=e.state,r={popper:{position:t.options.strategy,left:"0",top:"0",margin:"0"},arrow:{position:"absolute"},reference:{}};return Object.assign(t.elements.popper.style,r.popper),t.styles=r,t.elements.arrow&&Object.assign(t.elements.arrow.style,r.arrow),function(){Object.keys(t.elements).forEach((function(e){var n=t.elements[e],o=t.attributes[e]||{},s=Object.keys(t.styles.hasOwnProperty(e)?t.styles[e]:r[e]).reduce((function(e,t){return e[t]="",e}),{});(0,v.Re)(n)&&(0,b.Z)(n)&&(Object.assign(n.style,s),Object.keys(o).forEach((function(e){n.removeAttribute(e)})))}))}},requires:["computeStyles"]};var g=r(82122),O=r(45228),_=r(43920),k=r(66896),Z=r(19892),E=[h.Z,m.Z,y.Z,w,g.Z,O.Z,_.Z,k.Z,Z.Z],j=(0,d.kZ)({defaultModifiers:E}),S=r(69590),P=r.n(S),R=function(e){return e.reduce((function(e,t){var r=t[0],n=t[1];return e[r]=n,e}),{})},T="undefined"!=typeof window&&window.document&&window.document.createElement?p.useLayoutEffect:p.useEffect,C=[],D=r(40747),M=r(76450);function x(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function z(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?x(Object(r),!0).forEach((function(t){(0,u.Z)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):x(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function U(e){var t=(0,p.useRef)(),r=(0,p.useState)(e.settings.updateSettings||{}),n=(0,l.Z)(r,2),o=n[0],s=n[1],a=(0,p.useState)(!1),i=(0,l.Z)(a,2),c=i[0],u=i[1],d=(0,M.D9)(e.updateToken),h=document.body;e.editor||(h=(0,p.useMemo)((function(){return(0,D.isEditor)()?document.getElementById("editorContent").contentWindow.document.body:document.body})));var m=e.settings.placement,y=["bottom-start","bottom","bottom-end","top-start","top","top-end","left-start","left","left-end","right-start","right","right-end"];-1===y.indexOf(m)&&(console.log(m),m=y[0]);var b=function(e,t,r){void 0===r&&(r={});var n=p.useRef(null),o={onFirstUpdate:r.onFirstUpdate,placement:r.placement||"bottom",strategy:r.strategy||"absolute",modifiers:r.modifiers||C},s=p.useState({styles:{popper:{position:o.strategy,left:"0",top:"0"},arrow:{position:"absolute"}},attributes:{}}),a=s[0],i=s[1],c=p.useMemo((function(){return{name:"updateState",enabled:!0,phase:"write",fn:function(e){var t=e.state,r=Object.keys(t.elements);i({styles:R(r.map((function(e){return[e,t.styles[e]||{}]}))),attributes:R(r.map((function(e){return[e,t.attributes[e]]})))})},requires:["computeStyles"]}}),[]),u=p.useMemo((function(){var e={onFirstUpdate:o.onFirstUpdate,placement:o.placement,strategy:o.strategy,modifiers:[].concat(o.modifiers,[c,{name:"applyStyles",enabled:!1}])};return P()(n.current,e)?n.current||e:(n.current=e,e)}),[o.onFirstUpdate,o.placement,o.strategy,o.modifiers,c]),l=p.useRef();return T((function(){l.current&&l.current.setOptions(u)}),[u]),T((function(){if(null!=e&&null!=t){var n=(r.createPopper||j)(e,t,u);return l.current=n,function(){n.destroy(),l.current=null}}}),[e,t,r.createPopper]),{state:l.current?l.current.state:null,styles:a.styles,attributes:a.attributes,update:l.current?l.current.update:null,forceUpdate:l.current?l.current.forceUpdate:null}}(e.target.current,t.current,{placement:m,modifiers:[{name:"offset",options:{offset:e.settings.offset}}]}),v=b.styles,w=b.attributes,g=b.forceUpdate,O=b.update;return(0,p.useEffect)((function(){e.updateToken!==d&&(g(),new Event("resize",{bubbles:!0,cancelable:!0}),(0,D.isEditor)()||console.log(),O()),0!==Object.keys(o).length&&JSON.stringify(o)!==JSON.stringify(e.settings.updateSettings)&&(s(e.settings.updateSettings),g()),!c&&e.target.current&&(console.log("aann"),u(!0))}),[e.children,m,e.target,e.updateToken]),e.portal?f.createPortal(p.cloneElement(e.children,z({ref:t,style:v.popper},w.popper)),h):p.cloneElement(e.children,z({ref:t,style:v.popper},w.popper))}var F=r(46251);const I=function(e){(0,a.Z)(l,e);var t,r,u=(t=l,r=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,n=(0,c.Z)(t);if(r){var o=(0,c.Z)(this).constructor;e=Reflect.construct(n,arguments,o)}else e=n.apply(this,arguments);return(0,i.Z)(this,e)});function l(e){var t;return(0,n.Z)(this,l),(t=u.call(this,e)).state={show:!1,updateToken:void 0},t.show=t.show.bind((0,s.Z)(t)),t.leaveHide=t.leaveHide.bind((0,s.Z)(t)),t.enterShow=t.enterShow.bind((0,s.Z)(t)),t.children=p.createRef(),t}return(0,o.Z)(l,[{key:"show",value:function(){var e=this;this.props.settings.show_delay_dropbar_options.size||this.props.settings.hide_delay_dropbar_options.size?this.state.show?setTimeout((function(){e.setState((function(e){return{show:!e.show}}))}),this.props.settings.hide_delay_dropbar_options.size):setTimeout((function(){e.setState((function(e){return{show:!e.show}}))}),this.props.settings.show_delay_dropbar_options.size):this.setState((function(e){return{show:!e.show}}))}},{key:"leaveHide",value:function(){var e=this;this.props.settings.hide_delay_dropbar_options.size?setTimeout((function(){e.setState({show:!1})}),this.props.settings.hide_delay_dropbar_options.size):this.setState({show:!1})}},{key:"enterShow",value:function(e){var t=this;e.currentTarget,this.props.showDelay.size&&!this.state.show?setTimeout((function(){t.setState({show:!0})}),this.props.showDelay.size):this.setState((function(e){return{show:!e.show}}))}},{key:"componentDidUpdate",value:function(e,t,r){this.state.show,t.show}},{key:"render",value:function(){var e=this,t=p.Children.only(this.props.children),r="altrp-dropbar-"+this.props.className,n=this.props.settings.type_dropbar_section||"text",o=this.props.getContent("content_dropbar_section");return p.createElement("div",{className:"altrp-dropbar altrp-dropbar-"+r},p.createElement("span",{className:"altrp-dropbar-children-wrapper "+r+"-wrapper",onMouseEnter:"hover"===this.props.settings.mode_dropbar_options?this.enterShow:null,onMouseLeave:"hover"===this.props.settings.mode_dropbar_options?this.leaveHide:null},p.cloneElement(t,{ref:this.children,onClick:"click"===this.props.settings.mode_dropbar_options?this.show:null}),p.createElement(U,{target:this.children,portal:!0,updateToken:this.state.updateToken,settings:{placement:this.props.settings.position_dropbar_options,offset:[0,this.props.settings.offset_dropbar_options.size],updateSettings:{width:this.props.settings.width_dropbar_options}}},p.createElement("div",{className:"altrp-dropbar-container "+" ".concat(this.props.elemenentId,"-altrp-dropbar ")+r+"-containter"+(this.state.show?" altrp-dropbar-container-show":" altrp-dropbar-container-hide")},"text"===n?p.createElement("div",{className:"altrp-dropbar-content "+r+"-content",dangerouslySetInnerHTML:{__html:o||""}}):p.createElement(F.Z,{onLoad:function(){e.setState({updateToken:Math.random()})},templateId:this.props.settings.template_dropbar_section,cardModel:this.props.element.getCurrentModel()})))))}}]),l}(p.Component)},46251:(e,t,r)=>{"use strict";r.d(t,{Z:()=>y});var n=r(96156),o=r(92137),s=r(6610),a=r(5991),i=r(10379),c=r(46070),p=r(77608),u=r(87757),l=r.n(u),f=r(67294),d=r(71743);function h(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function m(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?h(Object(r),!0).forEach((function(t){(0,n.Z)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):h(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}r(40747);const y=function(e){(0,i.Z)(b,e);var t,n,u,h,y=(u=b,h=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=(0,p.Z)(u);if(h){var r=(0,p.Z)(this).constructor;e=Reflect.construct(t,arguments,r)}else e=t.apply(this,arguments);return(0,c.Z)(this,e)});function b(e){var t;return(0,s.Z)(this,b),(t=y.call(this,e)).state={templateComponent:null},t}return(0,a.Z)(b,[{key:"componentDidMount",value:(n=(0,o.Z)(l().mark((function e(){var t,n,o;return l().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Promise.all([r.e(4338),r.e(1352)]).then(r.bind(r,81352));case 2:return t=e.sent.default,e.next=5,r.e(4338).then(r.bind(r,44338));case 5:return n=e.sent.default,e.next=8,Promise.all([r.e(1893),r.e(5977),r.e(2435),r.e(4627),r.e(2465)]).then(r.bind(r,14627));case 8:o=e.sent.default,this.setState((function(e){return m(m({},e),{},{templateLoader:t,frontElementsFabric:n,ElementWrapper:o})}),this.loadTemplate);case 10:case"end":return e.stop()}}),e,this)}))),function(){return n.apply(this,arguments)})},{key:"loadTemplate",value:(t=(0,o.Z)(l().mark((function e(){var t,r,n,s,a=this;return l().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=null,r=this.state,n=r.templateLoader,s=r.frontElementsFabric,!this.props.templateId){e.next=9;break}return e.next=5,n.loadParsedTemplate(this.props.templateId);case 5:t=e.sent,t=s.cloneElement(t),this.props.cardModel instanceof d.Z&&t.setCardModel(this.props.cardModel),t=f.createElement(t.componentClass,m(m({},this.props),{},{children:t.children,element:t,ElementWrapper:this.state.ElementWrapper}));case 9:this.setState((function(e){return m(m({},e),{},{templateComponent:t})}),(0,o.Z)(l().mark((function e(){return l().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:_.isFunction(a.props.onLoad)&&a.props.onLoad();case 2:case"end":return e.stop()}}),e)}))));case 10:case"end":return e.stop()}}),e,this)}))),function(){return t.apply(this,arguments)})},{key:"componentDidUpdate",value:function(e,t){this.props.templateId!==e.templateId&&this.loadTemplate()}},{key:"render",value:function(){return f.createElement("div",{className:"inner-template"},this.state.templateComponent)}}]),b}(f.Component)},76450:(e,t,r)=>{"use strict";r.d(t,{q1:()=>o,D9:()=>s});var n=r(67294);function o(e){return"function"==typeof e&&!!e.prototype.isReactComponent}function s(e){var t=(0,n.useRef)();return(0,n.useEffect)((function(){t.current=e}),[e]),t.current}}}]);