(self.webpackChunk=self.webpackChunk||[]).push([[7761],{89981:(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>v});var s=n(96156),r=n(92137),i=n(6610),o=n(5991),l=n(63349),a=n(10379),c=n(46070),p=n(77608),u=n(87757),g=n.n(u),d=n(67294),h=n(73727),m=n(40747);function f(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);t&&(s=s.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,s)}return n}function b(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?f(Object(n),!0).forEach((function(t){(0,s.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):f(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var k=d.lazy((function(){return Promise.all([n.e(1001),n.e(6280)]).then(n.bind(n,96280))}));const v=function(e){(0,a.Z)(y,e);var t,s,u,f,v=(u=y,f=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=(0,p.Z)(u);if(f){var n=(0,p.Z)(this).constructor;e=Reflect.construct(t,arguments,n)}else e=t.apply(this,arguments);return(0,c.Z)(this,e)});function y(e){var t;return(0,i.Z)(this,y),(t=v.call(this,e)).state={settings:e.element.getSettings(),pending:!1},e.element.component=(0,l.Z)(t),window.elementDecorator&&window.elementDecorator((0,l.Z)(t)),e.baseRender&&(t.render=e.baseRender((0,l.Z)(t))),t.onClick=t.onClick.bind((0,l.Z)(t)),t}return(0,o.Z)(y,[{key:"_componentWillUnmount",value:(s=(0,r.Z)(g().mark((function e(){return g().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,n.e(2167).then(n.bind(n,2167));case 2:e.sent.default.unregisterWidgetActions(this.props.element.getId());case 4:case"end":return e.stop()}}),e,this)}))),function(){return s.apply(this,arguments)})},{key:"onClick",value:(t=(0,r.Z)(g().mark((function e(t){var s,i,o,l,a,c=this;return g().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.persist(),!(0,m.isEditor)()){e.next=5;break}t.preventDefault(),e.next=13;break;case 5:if(!this.props.element.getResponsiveSetting("actions",null,[]).length){e.next=13;break}return t.preventDefault(),t.stopPropagation(),e.next=10,n.e(2167).then(n.bind(n,2167));case 10:return s=e.sent.default,e.next=13,s.callAllWidgetActions(this.props.element.getIdForAction(),"click",this.props.element.getSettings("actions",[]),this.props.element);case 13:this.props.element.getForms().length?(this.setState((function(e){return b(b({},e),{},{pending:!0})})),this.props.element.getForms().forEach(function(){var e=(0,r.Z)(g().mark((function e(t){var n,s,r,i;return g().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,t.submit(c.getModelId(),c.props.element.getResponsiveSetting("form_confirm"));case 3:if(!(n=e.sent).success){e.next=14;break}if(s=c.state.settings,r=s.redirect_to_prev_page,i=s.redirect_after,!r){e.next=8;break}return e.abrupt("return",history.back());case 8:if(!i){e.next=11;break}return i=(0,m.parseURLTemplate)(i,n.data),e.abrupt("return",c.props.history.push(i));case 11:c.props.element.getResponsiveSetting("text_after",null,"")&&alert(c.props.element.getResponsiveSetting("text_after",null,"")),e.next=15;break;case 14:n.message&&alert(n.message);case 15:c.setState((function(e){return b(b({},e),{},{pending:!1})})),e.next=22;break;case 18:e.prev=18,e.t0=e.catch(0),console.error(e.t0),c.setState((function(e){return b(b({},e),{},{pending:!1})}));case 22:case"end":return e.stop()}}),e,null,[[0,18]])})));return function(t){return e.apply(this,arguments)}}())):t.target.href&&0===t.target.href.replace(window.location.origin+window.location.pathname,"").indexOf("#")?(i=t.target.href.replace(window.location.origin+window.location.pathname,"").replace("#",""),(o=(0,m.getHTMLElementById)(i))&&(t.preventDefault(),(0,m.scrollToElement)(mainScrollbars,o))):this.props.element.getResponsiveSetting("hide_elements_trigger")?this.props.toggleTrigger(this.props.element.getResponsiveSetting("hide_elements_trigger")):this.props.element.getResponsiveSetting("other_action_type",null,[]).includes("print_elements")&&(l=(l=this.props.element.getResponsiveSetting("print_elements_ids",null,"")).split(","),a=[],l.forEach((function(e){var t;if(e&&e.trim()&&((0,m.getHTMLElementById)(e.trim())&&a.push((0,m.getHTMLElementById)(e)),null!==(t=(0,m.getComponentByElementId)(e.trim()))&&void 0!==t&&t.getStylesHTMLElement)){var n=(0,m.getComponentByElementId)(e.trim()).getStylesHTMLElement();n&&a.push(n)}})),_.get(window,"stylesModule.stylesContainer.current")&&a.push(_.get(window,"stylesModule.stylesContainer.current")),a.push(document.head),(0,m.printElements)(a));case 14:case"end":return e.stop()}}),e,this)}))),function(e){return t.apply(this,arguments)})},{key:"render",value:function(){var e,t=this.state.settings,n=t.link_link,s=void 0===n?{}:n,r=t.advanced_tooltip,i=history.back,o=this.props.element.getResponsiveSetting("background_image",null,{}),l=this.props.element.hasCardModel()?this.props.element.getCardModel().getData():this.props.currentModel.getData(),a="altrp-btn "+(this.state.settings.position_css_classes||"");o.url&&(a+=" altrp-background-image");var c=this.props.element.getContent("button_text"),p=b({},this.state.settings.button_icon);this.state.pending&&(a+=" altrp-disabled"),a+="dropbar"===this.state.settings.link_button_type?"altrp-btn-dropbar":"",p&&p.assetType&&(0,m.renderAssetIcon)(p);var u,g=s.url?s.url.replace(":id",this.getModelId()||""):"";_.isObject(this.props.currentModel)&&(g=(0,m.parseURLTemplate)(s.url||"",l)),a+=this.classStateDisabled();var f=d.createElement("button",{onClick:this.onClick,className:a,id:this.state.settings.position_css_id,title:r||null},c,!(0,m.isSSR)()&&d.createElement("span",{className:"altrp-btn-icon "},(0,m.renderAssetIcon)(p)," "));switch(this.props.element.getResponsiveSetting("link_button_type",null,"none")){case"dropbar":u=d.createElement(d.Suspense,{fallback:d.createElement("div",null,"Загрузка...")},d.createElement(k,{elemenentId:this.props.element.getId(),settings:this.props.element.getSettings(),className:"btn",element:this.props.element,getContent:this.getContent,showDelay:this.state.settings.show_delay_dropbar_options},f));break;default:u=f}var v=null;if(null!==(e=this.state.settings.link_link)&&void 0!==e&&e.url&&!this.state.settings.link_link.toPrevPage)if("a"===this.state.settings.link_link.tag||(0,m.isEditor)()){var y=_.get(this.state.settings,"link_link.openInNew")?"blank":"";v=d.createElement("a",{href:g,onClick:this.onClick,className:a,target:y,title:r||null}," ",c||"",!(0,m.isSSR)()&&d.createElement("span",{className:"altrp-btn-icon "},(0,m.renderAssetIcon)(p)," "))}else v=d.createElement(h.rU,{to:g,onClick:this.onClick,className:a,title:r||null}," ",c||"",!(0,m.isSSR)()&&d.createElement("span",{className:"altrp-btn-icon "},(0,m.renderAssetIcon)(p)," "));return _.get(this.state,"settings.link_link.toPrevPage")&&(v=d.createElement("button",{onClick:function(){return(0,m.isEditor)()?null:i()},className:a,id:this.state.settings.position_css_id,title:r||null},c,!(0,m.isSSR)()&&d.createElement("span",{className:"altrp-btn-icon "},(0,m.renderAssetIcon)(p)," "))),v||u||p}}]),y}(d.Component)}}]);