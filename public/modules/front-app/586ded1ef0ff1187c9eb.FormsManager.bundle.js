/*! For license information please see 586ded1ef0ff1187c9eb.FormsManager.bundle.js.LICENSE.txt */
(self.webpackChunk=self.webpackChunk||[]).push([[1720,3897,9198,9466,8270,955,2736,6156],{63349:(e,t,r)=>{"use strict";function n(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}r.d(t,{Z:()=>n})},6610:(e,t,r)=>{"use strict";function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}r.d(t,{Z:()=>n})},5991:(e,t,r)=>{"use strict";function n(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function o(e,t,r){return t&&n(e.prototype,t),r&&n(e,r),e}r.d(t,{Z:()=>o})},96156:(e,t,r)=>{"use strict";function n(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}r.d(t,{Z:()=>n})},77608:(e,t,r)=>{"use strict";function n(e){return(n=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}r.d(t,{Z:()=>n})},10379:(e,t,r)=>{"use strict";r.d(t,{Z:()=>o});var n=r(14665);function o(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&(0,n.Z)(e,t)}},46070:(e,t,r)=>{"use strict";r.d(t,{Z:()=>u});var n=r(90484),o=r(63349);function u(e,t){return!t||"object"!==(0,n.Z)(t)&&"function"!=typeof t?(0,o.Z)(e):t}},14665:(e,t,r)=>{"use strict";function n(e,t){return(n=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}r.d(t,{Z:()=>n})},90484:(e,t,r)=>{"use strict";function n(e){return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}r.d(t,{Z:()=>n})},80955:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>d});var n=r(6610),o=r(5991),u=r(92137),i=r(87757),s=r.n(i),a=r(38773),c=r(15272),l=r(40747);const f=function(){function e(t){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",o=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"POST",u=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};(0,n.Z)(this,e),this.formId=t,this.fields=[],this.submitButtons=[],this.method=o,this.options=u,this.modelName=r;var i="/ajax/models/".concat(r),s=this.options,c=s.dynamicURL,l=s.customRoute;switch(r){case"login":i="/login";break;case"logout":i="/logout";break;case"email":i="/ajax/feedback"}l&&(i=l),this.resource=new a.Z({route:i,dynamicURL:c})}var t;return(0,o.Z)(e,[{key:"setFields",value:function(e){this.fields=e}},{key:"addSubmitButton",value:function(e){this.submitButtons.push(e)}},{key:"addField",value:function(e){var t=!1;return this.fields=this.fields.map((function(r){return r.getId()===e.getId()?(t=!0,e.component?e:r):r})),t||this.fields.push(e),!0}},{key:"submit",value:(t=(0,u.Z)(s().mark((function e(){var t,n,o,u,i,a,c,f,p,d=this,h=arguments;return s().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=h.length>0&&void 0!==h[0]?h[0]:null,n=h.length>1&&void 0!==h[1]?h[1]:"",o=h.length>2&&void 0!==h[2]?h[2]:null,u=h.length>3&&void 0!==h[3]?h[3]:null,i=!0,!n){e.next=11;break}return e.next=8,confirm(n);case 8:if(e.sent){e.next=11;break}return e.abrupt("return",{success:!1});case 11:if(this.fields.forEach((function(e){e.fieldValidate()||(i=!1)})),!i){e.next=71;break}e.prev=13,e.t0=this.method,e.next="POST"===e.t0?17:"PUT"===e.t0?32:"GET"===e.t0?43:"DELETE"===e.t0?48:54;break;case 17:return e.next=19,this.resource.post(_.assign(this.getData(),o),u);case 19:if(a=e.sent,"login"!==this.modelName||!this.options.afterLoginRedirect){e.next=23;break}return document.location.replace(this.options.afterLoginRedirect),e.abrupt("return",a);case 23:if("logout"!==this.modelName||!this.options.afterLogoutRedirect){e.next=26;break}return document.location.replace(this.options.afterLogoutRedirect),e.abrupt("return",a);case 26:if(!a.reload){e.next=29;break}return document.location.reload(),e.abrupt("return");case 29:return this.clearInputs(),this.updateResponseStorage(a),e.abrupt("return",a);case 32:if(!t&&!this.options.customRoute){e.next=41;break}return console.log(_.assign(this.getData(),o)),e.next=36,this.resource.put(t,_.assign(this.getData(),o),u);case 36:return c=e.sent,console.log(c),r.e(5098).then(r.bind(r,75098)).then((function(e){e.default.updateModelWithData(d.modelName,t,d.getData())})),this.updateResponseStorage(c),e.abrupt("return",c);case 41:return console.error("Не удалось получить ИД модели для обновления или customRoute!"),e.abrupt("break",54);case 43:return e.next=45,this.resource.getQueried(_.assign(this.getData(),o),u);case 45:return f=e.sent,this.updateResponseStorage(f),e.abrupt("return",f);case 48:if(!t&&!this.options.customRoute){e.next=52;break}return e.next=51,this.resource.delete(t,_.assign(this.getData(),o),u);case 51:return e.abrupt("return",e.sent);case 52:return console.error("Не удалось получить ИД модели для удаления или customRoute!"),e.abrupt("break",54);case 54:e.next=69;break;case 56:if(e.prev=56,e.t1=e.catch(13),p=e.t1.status,e.t1.res instanceof Promise&&(e.t1=e.t1.res),!(e.t1 instanceof Promise)){e.next=68;break}return e.next=63,e.t1.then();case 63:e.t1=e.sent,e.t1=(0,l.mbParseJSON)(e.t1,e.t1),e.t1.data&&(e.t1=e.t1.data),p&&(e.t1.data?e.t1.data.__status=p:e.t1.__status=p),this.updateResponseStorage(e.t1);case 68:return e.abrupt("return",{success:!1,error:e.t1});case 69:e.next=74;break;case 71:return e.next=73,alert("Пожалуйста, заполните все обязательные поля");case 73:return e.abrupt("return",{success:!1});case 74:case"end":return e.stop()}}),e,this,[[13,56]])}))),function(){return t.apply(this,arguments)})},{key:"clearInputs",value:function(){this.fields.forEach((function(e){try{_.isFunction(_.get(e,"component.setState"))}catch(e){console.error(e)}}))}},{key:"getData",value:function(){var e={altrp_ajax:!0};if("email"===this.modelName){var t="",r="Altrp Email";this.submitButtons.forEach((function(e){e.getSettings("email_subject")&&(r=e.getSettings("email_subject"))})),this.fields.forEach((function(e){if(null!==e.getValue()){var r=e.getSettings("content_label")||e.getSettings("content_placeholder")||"",n=e.getValue();t+="".concat(r,": ").concat(n," <br/> ")}})),e.subject=r,e.user_message=t}else this.fields.forEach((function(t){e[t.getFieldId()]=t.getValue()}));return e}},{key:"updateResponseStorage",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};appStore.dispatch((0,c.Nb)(this.formId,e))}}]),e}();var p=function(){function e(){(0,n.Z)(this,e),this.forms=[],this.formIds=[],this.fieldsStorage={}}return(0,o.Z)(e,[{key:"registerForm",value:function(e,t,r){var n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},o=this.getForm(e);return o?_.isEmpty(n)||(o.options=n):(o=new f(e,t,r,n),this.fieldsStorage[e]&&this.fieldsStorage[e].length&&(o.setFields(this.fieldsStorage[e]),delete this.fieldsStorage[e]),this.forms.push(o)),o}},{key:"deleteFormById",value:function(e){this.forms=this.forms.filter((function(t){return t.formId!==e}))}},{key:"addField",value:function(e,t){var r=this.getForm(e);return r?r.addField(t):(this.fieldsStorage[e]=this.fieldsStorage[e]||[],this.fieldsStorage[e].push(t),!0)}},{key:"clearFieldsStorage",value:function(){this.fieldsStorage={}}},{key:"submitForm",value:function(e,t){return this.getForm(e)?this.getForm(e).submit(t):(console.error("Форма не найдена"),!1)}},{key:"getForm",value:function(e){var t=null;return this.forms.forEach((function(r){r.formId===e&&(t=r)})),t}},{key:"clearFormsStore",value:function(){this.forms=[]}}]),e}();window.formsManager=new p;const d=window.formsManager},27418:e=>{"use strict";var t=Object.getOwnPropertySymbols,r=Object.prototype.hasOwnProperty,n=Object.prototype.propertyIsEnumerable;function o(e){if(null==e)throw new TypeError("Object.assign cannot be called with null or undefined");return Object(e)}e.exports=function(){try{if(!Object.assign)return!1;var e=new String("abc");if(e[5]="de","5"===Object.getOwnPropertyNames(e)[0])return!1;for(var t={},r=0;r<10;r++)t["_"+String.fromCharCode(r)]=r;if("0123456789"!==Object.getOwnPropertyNames(t).map((function(e){return t[e]})).join(""))return!1;var n={};return"abcdefghijklmnopqrst".split("").forEach((function(e){n[e]=e})),"abcdefghijklmnopqrst"===Object.keys(Object.assign({},n)).join("")}catch(e){return!1}}()?Object.assign:function(e,u){for(var i,s,a=o(e),c=1;c<arguments.length;c++){for(var l in i=Object(arguments[c]))r.call(i,l)&&(a[l]=i[l]);if(t){s=t(i);for(var f=0;f<s.length;f++)n.call(i,s[f])&&(a[s[f]]=i[s[f]])}}return a}},72408:(e,t,r)=>{"use strict";var n=r(27418),o="function"==typeof Symbol&&Symbol.for,u=o?Symbol.for("react.element"):60103,i=o?Symbol.for("react.portal"):60106,s=o?Symbol.for("react.fragment"):60107,a=o?Symbol.for("react.strict_mode"):60108,c=o?Symbol.for("react.profiler"):60114,l=o?Symbol.for("react.provider"):60109,f=o?Symbol.for("react.context"):60110,p=o?Symbol.for("react.forward_ref"):60112,d=o?Symbol.for("react.suspense"):60113,h=o?Symbol.for("react.memo"):60115,y=o?Symbol.for("react.lazy"):60116,m="function"==typeof Symbol&&Symbol.iterator;function b(e){for(var t="https://reactjs.org/docs/error-decoder.html?invariant="+e,r=1;r<arguments.length;r++)t+="&args[]="+encodeURIComponent(arguments[r]);return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var g={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},v={};function S(e,t,r){this.props=e,this.context=t,this.refs=v,this.updater=r||g}function k(){}function _(e,t,r){this.props=e,this.context=t,this.refs=v,this.updater=r||g}S.prototype.isReactComponent={},S.prototype.setState=function(e,t){if("object"!=typeof e&&"function"!=typeof e&&null!=e)throw Error(b(85));this.updater.enqueueSetState(this,e,t,"setState")},S.prototype.forceUpdate=function(e){this.updater.enqueueForceUpdate(this,e,"forceUpdate")},k.prototype=S.prototype;var w=_.prototype=new k;w.constructor=_,n(w,S.prototype),w.isPureReactComponent=!0;var j={current:null},x=Object.prototype.hasOwnProperty,O={key:!0,ref:!0,__self:!0,__source:!0};function E(e,t,r){var n,o={},i=null,s=null;if(null!=t)for(n in void 0!==t.ref&&(s=t.ref),void 0!==t.key&&(i=""+t.key),t)x.call(t,n)&&!O.hasOwnProperty(n)&&(o[n]=t[n]);var a=arguments.length-2;if(1===a)o.children=r;else if(1<a){for(var c=Array(a),l=0;l<a;l++)c[l]=arguments[l+2];o.children=c}if(e&&e.defaultProps)for(n in a=e.defaultProps)void 0===o[n]&&(o[n]=a[n]);return{$$typeof:u,type:e,key:i,ref:s,props:o,_owner:j.current}}function R(e){return"object"==typeof e&&null!==e&&e.$$typeof===u}var P=/\/+/g,C=[];function $(e,t,r,n){if(C.length){var o=C.pop();return o.result=e,o.keyPrefix=t,o.func=r,o.context=n,o.count=0,o}return{result:e,keyPrefix:t,func:r,context:n,count:0}}function F(e){e.result=null,e.keyPrefix=null,e.func=null,e.context=null,e.count=0,10>C.length&&C.push(e)}function I(e,t,r,n){var o=typeof e;"undefined"!==o&&"boolean"!==o||(e=null);var s=!1;if(null===e)s=!0;else switch(o){case"string":case"number":s=!0;break;case"object":switch(e.$$typeof){case u:case i:s=!0}}if(s)return r(n,e,""===t?"."+D(e,0):t),1;if(s=0,t=""===t?".":t+":",Array.isArray(e))for(var a=0;a<e.length;a++){var c=t+D(o=e[a],a);s+=I(o,c,r,n)}else if("function"==typeof(c=null===e||"object"!=typeof e?null:"function"==typeof(c=m&&e[m]||e["@@iterator"])?c:null))for(e=c.call(e),a=0;!(o=e.next()).done;)s+=I(o=o.value,c=t+D(o,a++),r,n);else if("object"===o)throw r=""+e,Error(b(31,"[object Object]"===r?"object with keys {"+Object.keys(e).join(", ")+"}":r,""));return s}function Z(e,t,r){return null==e?0:I(e,"",t,r)}function D(e,t){return"object"==typeof e&&null!==e&&null!=e.key?function(e){var t={"=":"=0",":":"=2"};return"$"+(""+e).replace(/[=:]/g,(function(e){return t[e]}))}(e.key):t.toString(36)}function L(e,t){e.func.call(e.context,t,e.count++)}function N(e,t,r){var n=e.result,o=e.keyPrefix;e=e.func.call(e.context,t,e.count++),Array.isArray(e)?T(e,n,r,(function(e){return e})):null!=e&&(R(e)&&(e=function(e,t){return{$$typeof:u,type:e.type,key:t,ref:e.ref,props:e.props,_owner:e._owner}}(e,o+(!e.key||t&&t.key===e.key?"":(""+e.key).replace(P,"$&/")+"/")+r)),n.push(e))}function T(e,t,r,n,o){var u="";null!=r&&(u=(""+r).replace(P,"$&/")+"/"),Z(e,N,t=$(t,u,n,o)),F(t)}var A={current:null};function U(){var e=A.current;if(null===e)throw Error(b(321));return e}var B={ReactCurrentDispatcher:A,ReactCurrentBatchConfig:{suspense:null},ReactCurrentOwner:j,IsSomeRendererActing:{current:!1},assign:n};t.Children={map:function(e,t,r){if(null==e)return e;var n=[];return T(e,n,null,t,r),n},forEach:function(e,t,r){if(null==e)return e;Z(e,L,t=$(null,null,t,r)),F(t)},count:function(e){return Z(e,(function(){return null}),null)},toArray:function(e){var t=[];return T(e,t,null,(function(e){return e})),t},only:function(e){if(!R(e))throw Error(b(143));return e}},t.Component=S,t.Fragment=s,t.Profiler=c,t.PureComponent=_,t.StrictMode=a,t.Suspense=d,t.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=B,t.cloneElement=function(e,t,r){if(null==e)throw Error(b(267,e));var o=n({},e.props),i=e.key,s=e.ref,a=e._owner;if(null!=t){if(void 0!==t.ref&&(s=t.ref,a=j.current),void 0!==t.key&&(i=""+t.key),e.type&&e.type.defaultProps)var c=e.type.defaultProps;for(l in t)x.call(t,l)&&!O.hasOwnProperty(l)&&(o[l]=void 0===t[l]&&void 0!==c?c[l]:t[l])}var l=arguments.length-2;if(1===l)o.children=r;else if(1<l){c=Array(l);for(var f=0;f<l;f++)c[f]=arguments[f+2];o.children=c}return{$$typeof:u,type:e.type,key:i,ref:s,props:o,_owner:a}},t.createContext=function(e,t){return void 0===t&&(t=null),(e={$$typeof:f,_calculateChangedBits:t,_currentValue:e,_currentValue2:e,_threadCount:0,Provider:null,Consumer:null}).Provider={$$typeof:l,_context:e},e.Consumer=e},t.createElement=E,t.createFactory=function(e){var t=E.bind(null,e);return t.type=e,t},t.createRef=function(){return{current:null}},t.forwardRef=function(e){return{$$typeof:p,render:e}},t.isValidElement=R,t.lazy=function(e){return{$$typeof:y,_ctor:e,_status:-1,_result:null}},t.memo=function(e,t){return{$$typeof:h,type:e,compare:void 0===t?null:t}},t.useCallback=function(e,t){return U().useCallback(e,t)},t.useContext=function(e,t){return U().useContext(e,t)},t.useDebugValue=function(){},t.useEffect=function(e,t){return U().useEffect(e,t)},t.useImperativeHandle=function(e,t,r){return U().useImperativeHandle(e,t,r)},t.useLayoutEffect=function(e,t){return U().useLayoutEffect(e,t)},t.useMemo=function(e,t){return U().useMemo(e,t)},t.useReducer=function(e,t,r){return U().useReducer(e,t,r)},t.useRef=function(e){return U().useRef(e)},t.useState=function(e){return U().useState(e)},t.version="16.14.0"},67294:(e,t,r)=>{"use strict";e.exports=r(72408)}}]);