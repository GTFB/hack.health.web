(self.webpackChunk=self.webpackChunk||[]).push([[8430],{98430:(t,e,r)=>{"use strict";r.r(e),r.d(e,{default:()=>g});var n=r(96156),a=r(92137),o=r(34699),i=r(87757),u=r.n(i),c=r(67294),l=r(9669),s=r.n(l),f=r(79199);function p(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),r.push.apply(r,n)}return r}function d(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?p(Object(r),!0).forEach((function(e){(0,n.Z)(t,e,r[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):p(Object(r)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}))}return t}var v={fillColor:"#3388ff",fillOpacity:.5,color:"#3388ff"};const g=function(t){var e=t.settings,r=(0,c.useState)(!1),n=(0,o.Z)(r,2),i=n[0],l=n[1],p=(0,c.useState)({}),g=(0,o.Z)(p,2),y=g[0],m=g[1],b=e.query,O=e.handler,h=e.canvas,j=e.zoom,w=e.lat,P=e.lng,k=e.style_height,C=void 0===k?{}:k,S=e.style_margin,E=void 0===S?{}:S;console.log("settings :>> ",e);var D=(0,c.useCallback)(function(){var t=(0,a.Z)(u().mark((function t(e){var r,n,a;return u().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return l(!0),t.next=3,s()(e);case 3:r=t.sent,n=r.data,200===r.status&&n.data?(a={type:"FeatureCollection",features:n.data.map((function(t){return{id:t.id,type:"Feature",properties:d(d({tooltip:t.name},v),t.options),geometry:{type:"Polygon",coordinates:JSON.parse(t.polygon)}}}))},m(a),l(!1)):(l(!1),m({type:"FeatureCollection",features:[]}));case 7:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),[]);return(0,c.useEffect)((function(){var t;if(null!=b&&null!==(t=b.dataSource)&&void 0!==t&&t.value){var e,r=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";if(!t)return"";var e=t.split("\n").map((function(t){return t.replace("|","=")})).join("&");return"?".concat(e)}(null==b?void 0:b.defaultParams);D((null==b||null===(e=b.dataSource)||void 0===e?void 0:e.value)+r)}}),[b]),c.createElement(f.default,{isTransformLatLng:!0,data:y,onTap:function(t){var e=t.target.feature.id,r=O.params.replace("{{id}}",e);"goto"===O.evt?window.open(r,"_blank"):"load"===O.evt&&D(r)},isLoading:i,style:{height:C.size+C.unit,marginTop:E.top+E.unit,marginBottom:E.bottom+E.unit,marginLeft:E.left+E.unit,marginRight:E.right+E.unit},isEditable:!1,preferCanvas:h,zoom:+j,center:[w,P]})}}}]);