(self.webpackChunk=self.webpackChunk||[]).push([[8782,5098],{71614:(t,e,o)=>{"use strict";o.d(e,{Z:()=>h});var i=o(92137),r=o(96156),n=o(87329),a=o(6610),d=o(5991),l=o(87757),s=o.n(l),c=o(38773),g=o(75098),p=o(40747);function u(t,e){var o=Object.keys(t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);e&&(i=i.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),o.push.apply(o,i)}return o}function b(t){for(var e=1;e<arguments.length;e++){var o=null!=arguments[e]?arguments[e]:{};e%2?u(Object(o),!0).forEach((function(e){(0,r.Z)(t,e,o[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(o)):u(Object(o)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(o,e))}))}return t}const h=function(){function t(e,o){(0,a.Z)(this,t),this.component=o,this.modelName=e.modelName||"",this.dataSource=e.dataSource,e.dataSource&&"model_query"===e.dataSource.type&&(this.dataSourceName=e.dataSource.value||""),this.pageSize=e.pageSize||10,this.paginationType=e.paginationType||"pages",this.orderingField=e.orderingField||"name",this.order=e.order||"ASC",this.route="/ajax/models/".concat(this.modelName||(e.dataSource?e.dataSource.value:"")),e.dataSource&&"sql_datasource"===e.dataSource.type&&(this.route=e.dataSource.value,this.dataSourceName=e.dataSource.sql_name||"");var i=_.cloneDeep(o.props.currentModel);i.setProperty("altrpdata",o.props.currentDataStorage.getData()),this.setDefaultParams((0,p.parseParamsFromString)(e.defaultParams,i))}var e;return(0,d.Z)(t,[{key:"getResource",value:function(){return new c.Z({route:this.route})}},{key:"getFromModel",value:function(t){return t?_.isArray(t[this.dataSource.value])?(0,n.Z)(t[this.dataSource.value]):[b({},t[this.dataSource.value])]:[]}},{key:"getQueried",value:(e=(0,i.Z)(s().mark((function t(e){var o;return s().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!this.dataSource||"has_many_relation"!==this.dataSource.type){t.next=4;break}this.modelUpdater?console.log(this.modelUpdater):this.modelUpdater=g.default.subscribeToModelUpdates(this.dataSource.model_name,this.component.getModelId(),this.component),t.next=10;break;case 4:return t.next=6,this.getResource().getQueried(this.getParams(e));case 6:return this.lastQuery=t.sent,_.isArray(this.lastQuery)?o=(0,n.Z)(this.lastQuery):_.isArray(this.lastQuery.data)&&(o=this.lastQuery.data),o.hasMore=this.lastQuery.hasMore,t.abrupt("return",o);case 10:case"end":return t.stop()}}),t,this)}))),function(t){return e.apply(this,arguments)})},{key:"hasMore",value:function(){return!!this.lastQuery&&this.lastQuery.hasMore}},{key:"setDefaultParams",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};this.defaultParams=t}},{key:"getDefaultParams",value:function(){return this.defaultParams=this.defaultParams||{},this.defaultParams.pageSize=this.pageSize,this.defaultParams}},{key:"getParams",value:function(t){return(t=b({},_.assign(_.cloneDeep(this.getDefaultParams()),t))).page=t.page||1,_.has(t,"pageSize")&&t.pageSize<=0&&(delete t.pageSize,delete t.page),t}},{key:"getCounterStart",value:function(t){var e=1;return this.pageSize<1?e:(t=parseInt(t)||1,e=this.pageSize*(t-1)+1)}}]),t}()},75098:(t,e,o)=>{"use strict";o.r(e),o.d(e,{default:()=>p});var i=o(6610),r=o(5991),n=o(96156),a=o(92137),d=o(87757),l=o.n(d),s=o(38773);function c(t,e){var o=Object.keys(t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);e&&(i=i.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),o.push.apply(o,i)}return o}const g=function(){function t(e,o){(0,i.Z)(this,t),this.modelName=e,o||console.error("ид модели не указан!"),this.modelId=o,this.data=null,this.subscribers=[],this.resource=new s.Z({route:"/ajax/models/".concat(this.modelName)}),this.updating=!1}var e;return(0,r.Z)(t,[{key:"subscribeToUpdates",value:function(t){this.subscribers.push(t),this.updating||(this.data&&this.callSubscribers(),this.updateData())}},{key:"updateData",value:(e=(0,a.Z)(l().mark((function t(){return l().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return this.updating=!0,t.next=3,this.resource.get(this.modelId);case 3:this.data=t.sent,this.updating=!1,this.callSubscribers();case 6:case"end":return t.stop()}}),t,this)}))),function(){return e.apply(this,arguments)})},{key:"callSubscribers",value:function(){var t=this;this.subscribers.forEach((function(e){_.isFunction(e.updateModelData)&&e.updateModelData(t.getData()),_.isFunction(e)&&e(t.getData())}))}},{key:"unsubscribe",value:function(t){this.subscribers=this.subscribers.filter((function(e){return e!==t}))}},{key:"getData",value:function(){return this.data}},{key:"updateWithData",value:function(t){this.data=_.extend(this.data,function(t){for(var e=1;e<arguments.length;e++){var o=null!=arguments[e]?arguments[e]:{};e%2?c(Object(o),!0).forEach((function(e){(0,n.Z)(t,e,o[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(o)):c(Object(o)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(o,e))}))}return t}({},t)),this.callSubscribers()}}]),t}(),p=new(function(){function t(){(0,i.Z)(this,t),this.modelsStorage={}}return(0,r.Z)(t,[{key:"updateModel",value:function(t,e){this.modelsStorage["".concat(t,"::").concat(e)]||this.modelsStorage["".concat(t,"::").concat(e)].updateData()}},{key:"addModel",value:function(t){}},{key:"getModel",value:function(t,e){}},{key:"subscribeToModelUpdates",value:function(t,e,o){return e?(this.modelsStorage["".concat(t,"::").concat(e)]||(this.modelsStorage["".concat(t,"::").concat(e)]=new g(t,e)),(i=this.modelsStorage["".concat(t,"::").concat(e)]).subscribeToUpdates(o),i):null;var i}},{key:"unsubscribe",value:function(t,e,o){return e?this.modelsStorage["".concat(t,"::").concat(e)]?((i=this.modelsStorage["".concat(t,"::").concat(e)]).unsubscribe(o),i):void 0:null;var i}},{key:"updateModelWithData",value:function(t,e,o){this.modelsStorage["".concat(t,"::").concat(e)]&&this.modelsStorage["".concat(t,"::").concat(e)].updateWithData(o)}}]),t}())},74374:(t,e,o)=>{"use strict";o.d(e,{Z:()=>u});var i=o(96156),r=o(92137),n=o(34699),a=o(87757),d=o.n(a),l=o(67294),s=(o(71614),o(49981)),c=o(40747);function g(t,e){var o=Object.keys(t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);e&&(i=i.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),o.push.apply(o,i)}return o}function p(t){for(var e=1;e<arguments.length;e++){var o=null!=arguments[e]?arguments[e]:{};e%2?g(Object(o),!0).forEach((function(e){(0,i.Z)(t,e,o[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(o)):g(Object(o)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(o,e))}))}return t}const u=function(t){var e,o,i,a=[],g={forceFetchOnMount:!0,refetchOnWindowFocus:!0},u=t.children,b=void 0===u?[]:u,h=t.query,y=t.data,m=t.settings,f=t.updateToken,x={};m.tables_columns&&m.tables_columns.forEach((function(t){t.column_is_default_sorted&&!x.order_by&&(x.order_by=t.accessor,x.order=_.get(t,"column_is_default_sorted_direction","ASC"))}));var k=(0,l.useState)(1),w=(0,n.Z)(k,2),v=w[0],S=w[1],R=(0,l.useState)(x),P=(0,n.Z)(R,2),E=P[0],O=P[1],z=(0,l.useState)({}),T=(0,n.Z)(z,2),W=T[0],D=T[1],j=(0,l.useCallback)(function(){var t=(0,r.Z)(d().mark((function t(e){var o,i,r,n,a,l,s,c=arguments;return d().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(o=c.length>1&&void 0!==c[1]?c[1]:1,i=c.length>2?c[2]:void 0,r=c.length>3?c[3]:void 0,c.length>4&&c[4],n=c.length>5?c[5]:void 0,a=c.length>6?c[6]:void 0,"datasource"!==m.choose_datasource){t.next=8;break}return t.abrupt("return",y);case 8:return l={page:o},s=JSON.stringify(r),i&&(l=_.assign(i,l)),n&&(l.altrpUdateToken=n),a&&(l.order="ASC",l.order_by=a),s.length>2&&(l.filters=s),t.next=16,h.getQueried(l);case 16:return t.abrupt("return",t.sent);case 17:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}());if(h.pageSize){var H=(0,s.NE)([h.dataSourceName,v,E,W,h.getParams(),f],j,g),L=H.status,C=H.resolvedData,B=H.latestData;a=C||a,e=L,o=H.error,i=B,(0,l.useEffect)((function(){null!=B&&B.hasMore&&s.sJ.prefetchQuery([h.dataSourceName,v+1],j)}),[B,j,v,E,W,f])}else{var F=(0,s.aM)([h.dataSourceName,h.getParams(),f],(function(t){return h.getResource().getQueried(p(p({},E),{},{filters:filterSettingJSON,groupBy}))}),g),A=F.status;a=F.data,e=A,o=F.error}_.isObject(a)&&!_.isArray(a)&&(a=[a]),a.length||(a=y),_.isArray(b)||(b=[b]),_.isEmpty(y)&&(y=a),l.useEffect((function(){(0,c.setAltrpIndex)(y)}),[y]);var M=l.useMemo((function(){return _.isArray(y)?y:_.isObject(y)?[y]:[]}),[y]),Z=p(p({},t),{},{data:M,_status:e,setFilterSettings:D,setSortSettings:O,filterSetting:W,sortSetting:E,_latestData:i,setPage:S,page:v,_error:o});return b.map((function(t){return l.cloneElement(t,p(p({},Z),{},{key:t.key}))}))}},58782:(t,e,o)=>{"use strict";o.r(e),o.d(e,{baseEmailRender:()=>v});var i=o(40747);function r(){var t,e=this;t="table";var o={border:"0",cellPadding:"0",cellSpacing:"0",width:"100%",style:{margin:0,padding:0,width:"100%",fontFamily:"Arial, sans-serif"}};(0,i.isEditor)()&&(t="div",o.className="sections-wrapper");var r=this.props.ElementWrapper||window.ElementWrapper,n=this.props.children.map((function(t){return React.createElement(r,{ElementWrapper:r,key:t.getId(),component:t.componentClass,baseRender:e.props.baseRender,element:t})}));return(0,i.isEditor)()||(n=React.createElement("tbody",null,n)),React.createElement(t,o,n)}function n(){var t,e=this,o=this.props.element.getSettings();t="tr";var r={style:{paddingLeft:_.get(o,"position_style_position_padding.left","10")+_.get(o,"position_style_position_padding.unit","px"),paddingRight:_.get(o,"position_style_position_padding.right","10")+_.get(o,"position_style_position_padding.unit","px"),paddingTop:_.get(o,"position_style_position_padding.top","10")+_.get(o,"position_style_position_padding.unit","px"),paddingBottom:_.get(o,"position_style_position_padding.bottom","10")+_.get(o,"position_style_position_padding.unit","px"),backgroundColor:_.get(o,"section_style_background_color.colorPickedHex","")}};(0,i.isEditor)()&&(t="div",r.className="altrp-section");var n=this.props.ElementWrapper||window.ElementWrapper,a=this.state.children.map((function(t){return React.createElement(n,{ElementWrapper:n,key:t.getId(),component:t.componentClass,baseRender:e.props.baseRender,element:t})}));return(0,i.isEditor)()||(a=React.createElement("td",{style:r.style},React.createElement("table",{width:"100%"},React.createElement("tbody",null,React.createElement("tr",null,a))))),React.createElement(t,r,a)}var a=o(22122);function d(){var t=this.props.element.getSettings(),e=this.getContent("button_text")||"",o={paddingTop:"20px",paddingRight:"25px",paddingBottom:"20px",paddingLeft:"25px",fontSize:"16px",fontFamily:"Open Sans",lineHeight:"1",letterSpacing:"0",fontWeight:"normal",color:"white",borderColor:"#32a852",borderRadius:"6px",boxShadow:"0 0 0 0 black",backgroundColor:"#343b4c",backgroundPosition:"top left",backgroundAttachment:"scroll",backgroundRepeat:"repeat",width:"auto",display:"inline-block",textDecoration:"none"};if(t.position_margin&&(o.marginTop=t.position_margin.top?t.position_margin.top+t.position_margin.unit:o.marginTop,o.marginRight=t.position_margin.right?t.position_margin.right+t.position_margin.unit:o.marginRight,o.marginBottom=t.position_margin.bottom?t.position_margin.bottom+t.position_margin.unit:o.marginBottom,o.marginLeft=t.position_margin.left?t.position_margin.left+t.position_margin.unit:o.marginLeft),t.position_padding&&(o.paddingTop=t.position_padding.top?t.position_padding.top+t.position_padding.unit:o.paddingTop,o.paddingRight=t.position_padding.right?t.position_padding.right+t.position_padding.unit:o.paddingRight,o.paddingBottom=t.position_padding.bottom?t.position_padding.bottom+t.position_padding.unit:o.paddingBottom,o.paddingLeft=t.position_padding.left?t.position_padding.left+t.position_padding.unit:o.paddingLeft),t.background_color&&(o.backgroundColor=t.background_color.colorPickedHex),t.gradient&&t.gradient.isWithGradient&&(o.backgroundImage=t.gradient.value.slice(0,-1)),_.get(t,"background_image.url")&&(o.backgroundImage="url(".concat((0,i.prepareURLForEmail)(t.background_image.url),")")),t.background_position&&(o.backgroundPosition=t.background_position),t.background_attachment&&(o.backgroundAttachment=t.background_attachment),t.background_repeat&&(o.backgroundRepeat=t.background_repeat),t.background_size&&(o.backgroundSize=t.background_size),t.border_type&&"none"!==t.border_type&&(o.borderTopWidth=t.border_width.top+t.border_width.unit,o.borderRightWidth=t.border_width.right+t.border_width.unit,o.borderBottomWidth=t.border_width.bottom+t.border_width.unit,o.borderLeftWidth=t.border_width.left+t.border_width.unit,o.borderStyle=t.border_type,t.border_color&&t.border_color.colorPickedHex&&(o.borderColor=t.border_color.colorPickedHex)),t.border_radius.top||t.border_radius.right||t.border_radius.bottom||t.border_radius.left){var r=(t.border_radius.top?t.border_radius.top:"0")+t.border_radius.unit,n=(t.border_radius.right?t.border_radius.right:"0")+t.border_radius.unit,d=(t.border_radius.bottom?t.border_radius.bottom:"0")+t.border_radius.unit,l=(t.border_radius.left?t.border_radius.left:"0")+t.border_radius.unit;o.borderRadius="".concat(r," ").concat(n," ").concat(d," ").concat(l)}if(t.style_background_shadow){var s=t.style_background_shadow.type,c=t.style_background_shadow.horizontal,g=t.style_background_shadow.vertical,p=t.style_background_shadow.blur,u=t.style_background_shadow.spread,b=t.style_background_shadow.colorPickedHex;o.boxShadow="".concat(s," ").concat(c,"px ").concat(g,"px ").concat(p,"px ").concat(u," ").concat(b)}t.font_typographic&&(o.textDecoration=t.font_typographic.decoration||o.textDecoration,o.fontFamily=t.font_typographic.family||o.fontFamily,o.lineHeight=t.font_typographic.lineHeight||o.lineHeight,o.fontSize=t.font_typographic.size?t.font_typographic.size+"px":o.fontSize,o.letterSpacing=t.font_typographic.spacing+"px"||0,o.fontStyle=t.font_typographic.style||o.style,o.fontWeight=t.font_typographic.weight||o.fontWeight,o.textTransform=t.font_typographic.transform||o.textTransform),t.font_color&&(o.color=t.font_color.colorPickedHex);var h=_.get(t,"link_link.url",location.origin)||"",y={style:o,href:h=(0,i.prepareURLForEmail)(h),dangerouslySetInnerHTML:{__html:e}},m={display:"block",textAlign:"center"};t.button_alignment&&(m.justifyContent=t.button_alignment,m.display="flex");var f={style:m};return React.createElement("div",(0,a.Z)({},f,{children:React.createElement("a",y)}))}function l(){var t,e=this,o=this.props.element.getSettings();t="td";var r={width:(o.layout_column_width||"100")+"%",style:{paddingLeft:_.get(o,"positioning_padding.left","10")+_.get(o,"positioning_padding.unit","px"),paddingRight:_.get(o,"positioning_padding.right","10")+_.get(o,"positioning_padding.unit","px"),paddingTop:_.get(o,"positioning_padding.top","10")+_.get(o,"positioning_padding.unit","px"),paddingBottom:_.get(o,"positioning_padding.bottom","10")+_.get(o,"positioning_padding.unit","px"),backgroundColor:_.get(o,"column_style_background_color.colorPickedHex","")}};(0,i.isEditor)()&&(t="div",delete r.width,r.className="altrp-column");var n=this.props.ElementWrapper||window.ElementWrapper;return React.createElement(t,r,this.state.children.map((function(t){return React.createElement(n,{ElementWrapper:n,key:t.getId(),component:t.componentClass,baseRender:e.props.baseRender,element:t})})))}var s=o(96486),c=o.n(s);function g(){var t=this.props.element.getSettings(),e={display:"block",fontSize:"24px",fontWeight:"700",textDecoration:"none",color:"#242424"};if(t.heading_style_typographic&&(e.textDecoration=t.heading_style_typographic.decoration||e.textDecoration,e.fontFamily=t.heading_style_typographic.family||e.fontFamily,e.lineHeight=t.heading_style_typographic.lineHeight||e.lineHeight,e.fontSize=t.heading_style_typographic.size?t.heading_style_typographic.size+"px":e.fontSize,e.letterSpacing=t.heading_style_typographic.spacing+"px"||0,e.fontStyle=t.heading_style_typographic.style||e.style,e.fontWeight=t.heading_style_typographic.weight||e.fontWeight,e.textTransform=t.heading_style_typographic.transform||e.textTransform),t.heading_style_color&&(e.color=t.heading_style_color.colorPickedHex),t.heading_style_text_shadow){var o=t.heading_style_text_shadow.type,r=t.heading_style_text_shadow.horizontal,n=t.heading_style_text_shadow.vertical,d=t.heading_style_text_shadow.blur,_=t.heading_style_text_shadow.spread,l=t.heading_style_text_shadow.colorPickedHex;e.boxShadow="".concat(o," ").concat(r,"px ").concat(n,"px ").concat(d,"px ").concat(_," ").concat(l)}t.style_position_margin&&(e.marginTop=t.style_position_margin.top?t.style_position_margin.top+t.style_position_margin.unit:e.marginTop,e.marginRight=t.style_position_margin.right?t.style_position_margin.right+t.style_position_margin.unit:e.marginRight,e.marginBottom=t.style_position_margin.bottom?t.style_position_margin.bottom+t.style_position_margin.unit:e.marginBottom,e.marginLeft=t.style_position_margin.left?t.style_position_margin.left+t.style_position_margin.unit:e.marginLeft),t.style_position_padding&&(e.paddingTop=t.style_position_padding.top?t.style_position_padding.top+t.style_position_padding.unit:e.paddingTop,e.paddingRight=t.style_position_padding.right?t.style_position_padding.right+t.style_position_padding.unit:e.paddingRight,e.paddingBottom=t.style_position_padding.bottom?t.style_position_padding.bottom+t.style_position_padding.unit:e.paddingBottom,e.paddingLeft=t.style_position_padding.left?t.style_position_padding.left+t.style_position_padding.unit:e.paddingLeft),t.style_background_color&&(e.backgroundColor=t.style_background_color.colorPickedHex),t.gradient&&t.gradient.isWithGradient&&(e.backgroundImage=t.gradient.value.slice(0,-1)),c().get(t,"background_image.url")&&(e.backgroundImage="url(".concat((0,i.prepareURLForEmail)(t.background_image.url),")")),t.background_position&&(e.backgroundPosition=t.background_position),t.background_attachment&&(e.backgroundAttachment=t.background_attachment),t.background_repeat&&(e.backgroundRepeat=t.background_repeat),t.background_size&&(e.backgroundSize=t.background_size),t.style_background_opacity&&(e.opacity=t.style_background_opacity.size),t.style_border_type&&"none"!==t.style_border_type&&(e.borderTopWidth=t.style_border_width.top+t.style_border_width.unit,e.borderRightWidth=t.style_border_width.right+t.style_border_width.unit,e.borderBottomWidth=t.style_border_width.bottom+t.style_border_width.unit,e.borderLeftWidth=t.style_border_width.left+t.style_border_width.unit,"%"===t.style_border_width.unit&&(e.borderTopWidth=t.style_border_width.top+"vw",e.borderRightWidth=t.style_border_width.right+"vw",e.borderBottomWidth=t.style_border_width.bottom+"vw",e.borderLeftWidth=t.style_border_width.left+"vw"),e.borderStyle=t.style_border_type,t.style_border_color&&t.style_border_color.colorPickedHex&&(e.borderColor=t.style_border_color.colorPickedHex)),t.style_border_radius&&(e.borderRadius=t.style_border_radius.size+t.style_border_radius.unit),e.textDecoration=t.style_border_text_decoration||e.textDecoration,t.transform_style&&(e.transform="".concat(t.transform_style.function,"(").concat(t.transform_style.size).concat(t.transform_style.unit,")")),t.heading_settings_alignment&&(e.justifyContent=t.heading_settings_alignment,e.display="flex");var s=c().get(t,"link_link.url",location.origin)||"";s=(0,i.prepareURLForEmail)(s);var g={dangerouslySetInnerHTML:{__html:this.getContent("text")||""},href:s,style:e},p=s?"a":"div";return React.createElement("div",(0,a.Z)({},{style:{display:"block",textAlign:"center"}},{children:React.createElement(p,g)}))}function p(){var t=this.props.element.getSettings(),e={display:"block"};t.text_style_position_margin&&(e.marginTop=t.text_style_position_margin.top?t.text_style_position_margin.top+t.text_style_position_margin.unit:e.marginTop,e.marginRight=t.text_style_position_margin.right?t.text_style_position_margin.right+t.text_style_position_margin.unit:e.marginRight,e.marginBottom=t.text_style_position_margin.bottom?t.text_style_position_margin.bottom+t.text_style_position_margin.unit:e.marginBottom,e.marginLeft=t.text_style_position_margin.left?t.text_style_position_margin.left+t.text_style_position_margin.unit:e.marginLeft),t.text_style_position_padding&&(e.paddingTop=t.text_style_position_padding.top?t.text_style_position_padding.top+t.text_style_position_padding.unit:e.paddingTop,e.paddingRight=t.text_style_position_padding.right?t.text_style_position_padding.right+t.text_style_position_padding.unit:e.paddingRight,e.paddingBottom=t.text_style_position_padding.bottom?t.text_style_position_padding.bottom+t.text_style_position_padding.unit:e.paddingBottom,e.paddingLeft=t.text_style_position_padding.left?t.text_style_position_padding.left+t.text_style_position_padding.unit:e.paddingLeft),t.text_style_background_color&&(e.backgroundColor=t.text_style_background_color.colorPickedHex),t.text_style_background_opacity&&(e.opacity=t.text_style_background_opacity.size),t.text_style_font_typographic&&(e.textDecoration=t.text_style_font_typographic.decoration||e.textDecoration,e.fontFamily=t.text_style_font_typographic.family||e.fontFamily,e.lineHeight=t.text_style_font_typographic.lineHeight||e.lineHeight,e.fontSize=t.text_style_font_typographic.size?t.text_style_font_typographic.size+"px":e.fontSize,e.letterSpacing=t.text_style_font_typographic.spacing+"px"||0,e.fontStyle=t.text_style_font_typographic.style||e.style,e.fontWeight=t.text_style_font_typographic.weight||e.fontWeight,e.textTransform=t.text_style_font_typographic.transform||e.textTransform),t.text_style_font_color&&(e.color=t.text_style_font_color.colorPickedHex),t.text_style_border_type&&"none"!==t.text_style_border_type&&(e.borderTopWidth=t.text_style_border_width.top+t.text_style_border_width.unit,e.borderRightWidth=t.text_style_border_width.right+t.text_style_border_width.unit,e.borderBottomWidth=t.text_style_border_width.bottom+t.text_style_border_width.unit,e.borderLeftWidth=t.text_style_border_width.left+t.text_style_border_width.unit,e.borderStyle=t.text_style_border_type,t.text_style_border_color&&t.text_style_border_color.colorPickedHex&&(e.borderColor=t.text_style_border_color.colorPickedHex)),t.text_style_border_radius&&(e.borderRadius=t.text_style_border_radius.size+t.text_style_border_radius.unit),t["text_style_column-count"]&&1!==t["text_style_column-count"]&&(e.columns="".concat(t["text_style_column-count"]," ").concat(t["text_style_column-gap"].size).concat(t["text_style_column-gap"].unit));var o=this.getContent("text"),r={style:e,dangerouslySetInnerHTML:{__html:o}};return this.props.CKEditor?React.createElement("div",{style:e},React.createElement(this.props.CKEditor,{changeText:this.changeText,text:o,readOnly:(0,i.isEditor)(),textWidget:!0})):React.createElement("div",r)}function u(){var t=this.props.element,e=this.props.element.getSettings(),o=e.content_media,r={display:"block",textAlign:"center"};e.position_margin&&(r.marginTop=e.position_margin.top?e.position_margin.top+e.position_margin.unit:r.marginTop,r.marginRight=e.position_margin.right?e.position_margin.right+e.position_margin.unit:r.marginRight,r.marginBottom=e.position_margin.bottom?e.position_margin.bottom+e.position_margin.unit:r.marginBottom,r.marginLeft=e.position_margin.left?e.position_margin.left+e.position_margin.unit:r.marginLeft),e.position_padding&&(r.paddingTop=e.position_padding.top?e.position_padding.top+e.position_padding.unit:r.paddingTop,r.paddingRight=e.position_padding.right?e.position_padding.right+e.position_padding.unit:r.paddingRight,r.paddingBottom=e.position_padding.bottom?e.position_padding.bottom+e.position_padding.unit:r.paddingBottom,r.paddingLeft=e.position_padding.left?e.position_padding.left+e.position_padding.unit:r.paddingLeft),e.opacity_overlay&&(r.opacity=e.opacity_overlay.size),e.image_fit_size&&(r.objectFit=e.image_fit_size),e.aspect_ratio_off?r.position="relative":r.position="static",e.height_size&&(r.height=e.height_size.size+e.height_size.unit),e.width_size&&(r.width=e.width_size.size+e.width_size.unit),e.image_style_alignment&&(r.alignContent=e.image_style_alignment),e.background_color&&(r.backgroundColor=e.background_color.colorPickedHex),e.gradient&&e.gradient.isWithGradient&&(r.backgroundImage=e.gradient.value.slice(0,-1)),_.get(e,"background_image.url")&&(r.backgroundImage="url(".concat((0,i.prepareURLForEmail)(e.background_image.url),")")),e.background_position&&(r.backgroundPosition=e.background_position),e.background_attachment&&(r.backgroundAttachment=e.background_attachment),e.background_repeat&&(r.backgroundRepeat=e.background_repeat),e.background_size&&(r.backgroundSize=e.background_size),e.border_type&&"none"!==e.border_type&&(r.borderTopWidth=e.border_width.top+e.border_width.unit,r.borderRightWidth=e.border_width.right+e.border_width.unit,r.borderBottomWidth=e.border_width.bottom+e.border_width.unit,r.borderLeftWidth=e.border_width.left+e.border_width.unit,r.borderStyle=e.border_type,e.border_color&&e.border_color.colorPickedHex&&(r.borderColor=e.border_color.colorPickedHex)),e.border_radius&&(r.borderRadius=e.border_radius.size+e.border_radius.unit),e.image_style_alignment&&(r.justifyContent=e.image_style_alignment,r.display="flex");var n={style:r};e.aspect_ratio_size&&(r.paddingTop=e.aspect_ratio_size+"%");var a=t.hasCardModel()?t.getCardModel():this.props.currentModel;e.content_path&&_.isObject((0,i.getDataByPath)(e.content_path,null,a))?(o=(0,i.getDataByPath)(e.content_path,null,a),_.get(o,"0")instanceof File?o=_.get(o,"0"):o.assetType="media"):e.content_path&&_.isString((0,i.getDataByPath)(e.content_path,null,a))&&(o={assetType:"media",url:o=(0,i.getDataByPath)(e.content_path,null,a),name:"null"});var d={src:(0,i.prepareURLForEmail)(o?o.url:"")},l="div";return _.get(e,"image_link.url")&&(l="a",n.href=(0,i.prepareURLForEmail)(_.get(e,"image_link.url"))),React.createElement(l,n,React.createElement("img",d))}var b=o(71614),h=o(96156),y=o(74374);function m(t,e){var o=Object.keys(t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);e&&(i=i.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),o.push.apply(o,i)}return o}function f(t){for(var e=1;e<arguments.length;e++){var o=null!=arguments[e]?arguments[e]:{};e%2?m(Object(o),!0).forEach((function(e){(0,h.Z)(t,e,o[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(o)):m(Object(o)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(o,e))}))}return t}function x(t){var e=t.data,o=t.settings,r=o.tables_columns,n=void 0===r?[]:r,d=o.table_style_table_border_type,l={borderCollapse:"collapse",border:"".concat(d," ").concat(_.get(o,"table_style_table_border_width.size")+_.get(o,"table_style_table_border_width.unit")," ").concat(_.get(o,"table_style_table_border_color.color"))},s={textAlign:o.table_table_header_alignment||"center",verticalAlign:o.table_table_header_alignment||"center"};return o.table_style_table_border_type&&"none"!==o.table_style_table_border_type&&(s.border="".concat(o.table_style_table_border_type," ").concat(_.get(o,"table_style_table_border_color.color")),s.borderLeftWidth="".concat(_.get(o,"table_style_table_border_width.left")).concat(_.get(o,"table_style_table_border_width.unit")||"px"),s.borderTopWidth="".concat(_.get(o,"table_style_table_border_width.top")).concat(_.get(o,"table_style_table_border_width.unit")||"px"),s.borderRightWidth="".concat(_.get(o,"table_style_table_border_width.right")).concat(_.get(o,"table_style_table_border_width.unit")||"px"),s.borderBottomWidth="".concat(_.get(o,"table_style_table_border_width.bottom")).concat(_.get(o,"table_style_table_border_width.unit")||"px")),React.createElement("table",{width:"100%",style:l},React.createElement("thead",null,React.createElement("tr",null,n.map((function(t){var e=f({},s);_.get(o,"table_style_header_text_color.colorPickedHex")&&(e.color=_.get(o,"table_style_header_text_color.colorPickedHex")),t.column_header_alignment&&(e.textAlign=t.column_header_alignment),e.paddingLeft="".concat(_.get(o,"table_style_header_padding.left")).concat(_.get(o,"table_style_header_padding.unit")||"px"),e.paddingTop="".concat(_.get(o,"table_style_header_padding.top")).concat(_.get(o,"table_style_header_padding.unit")||"px"),e.paddingRight="".concat(_.get(o,"table_style_header_padding.right")).concat(_.get(o,"table_style_header_padding.unit")||"px"),e.paddingBottom="".concat(_.get(o,"table_style_header_padding.bottom")).concat(_.get(o,"table_style_header_padding.unit")||"px"),e.fontFamily=_.get(o,"table_style_header_font.family")||"Arial",e.lineHeight=_.get(o,"table_style_header_font.lineHeight")||"1.5",e.fontSize=(_.get(o,"table_style_header_font.size")||"16")+(_.get(o,"table_style_header_font.sizeUnit")||"px"),e.letterSpacing=_.get(o,"table_style_header_font.spacing"),e.fontStyle=_.get(o,"table_style_header_font.style")||"",e.textTransform=_.get(o,"table_style_header_font.transform")||"",o.table_style_header_border_type&&"none"!==o.table_style_header_border_type&&(e.border="".concat(o.table_style_header_border_type," ").concat(_.get(o,"table_style_header_border_color.color")),e.borderLeftWidth="".concat(_.get(o,"table_style_header_border_width.left")).concat(_.get(o,"table_style_header_border_width.unit")||"px"),e.borderTopWidth="".concat(_.get(o,"table_style_header_border_width.top")).concat(_.get(o,"table_style_header_border_width.unit")||"px"),e.borderRightWidth="".concat(_.get(o,"table_style_header_border_width.right")).concat(_.get(o,"table_style_header_border_width.unit")||"px"),e.borderBottomWidth="".concat(_.get(o,"table_style_header_border_width.bottom")).concat(_.get(o,"table_style_header_border_width.unit")||"px"));var i={style:e};return _.get(o,"table_style_header_background.colorPickedHex")&&(e.backgroundColor=_.get(o,"table_style_header_background.colorPickedHex")),t.column_width&&(i.width=t.column_width+"%"),React.createElement("th",(0,a.Z)({key:t.id},i),t.column_name||"")})))),React.createElement("tbody",null,e.map((function(t,e){return React.createElement("tr",{key:e},n.map((function(r){var n="Test data";if((0,i.isEditor)())r.column_link&&(n=React.createElement("span",{style:{fontFamily:_.get(o,"table_link_font.family")||"Arial",fontSize:_.get(o,"table_link_font.size")||"inherit",fontStyle:_.get(o,"table_link_font.style")||"inherit",lineHeight:_.get(o,"table_link_font.lineHeight")||"inherit",color:_.get(o,"table_link_color.colorPickedHex")||"inherit",textDecoration:_.get(o,"table_link_font.decoration")||"inherit",textTransform:_.get(o,"table_link_font.transform")||"inherit"}},n));else if(n=_.get(t,r.accessor)||"",r.column_link){var d=(0,i.prepareURLForEmail)(r.column_link,t);n=React.createElement("a",{href:d,style:{fontFamily:_.get(o,"table_link_font.family")||"Arial",fontSize:_.get(o,"table_link_font.size")||"inherit",fontStyle:_.get(o,"table_link_font.style")||"inherit",lineHeight:_.get(o,"table_link_font.lineHeight")||"inherit",color:_.get(o,"table_link_color.colorPickedHex")||"inherit",textDecoration:_.get(o,"table_link_font.decoration")||"inherit",textTransform:_.get(o,"table_link_font.transform")||"inherit"}},n)}var l=f({},s);l.textAlign=r.column_body_alignment||o.table_table_body_alignment,l.verticalAlign=r.column_cell_vertical_alignment||o.cell_vertical_alignment,o.table_style_body_border_type&&"none"!==o.table_style_body_border_type&&(l.border="".concat(o.table_style_header_border_type," ").concat(_.get(o,"table_style_body_border_color_.color")),l.borderLeftWidth="".concat(_.get(o,"table_style_body_border_width.left")).concat(_.get(o,"table_style_body_border_width.unit")||"px"),l.borderTopWidth="".concat(_.get(o,"table_style_body_border_width.top")).concat(_.get(o,"table_style_body_border_width.unit")||"px"),l.borderRightWidth="".concat(_.get(o,"table_style_body_border_width.right")).concat(_.get(o,"table_style_body_border_width.unit")||"px"),l.borderBottomWidth="".concat(_.get(o,"table_style_body_border_width.bottom")).concat(_.get(o,"table_style_body_border_width.unit")||"px")),l.paddingLeft="".concat(_.get(o,"table_style_body_cell_padding.left")).concat(_.get(o,"table_style_body_cell_padding.unit")||"px"),l.paddingTop="".concat(_.get(o,"table_style_body_cell_padding.top")).concat(_.get(o,"table_style_body_cell_padding.unit")||"px"),l.paddingRight="".concat(_.get(o,"table_style_body_cell_padding.right")).concat(_.get(o,"table_style_body_cell_padding.unit")||"px"),l.paddingBottom="".concat(_.get(o,"table_style_body_cell_padding.bottom")).concat(_.get(o,"table_style_body_cell_padding.unit")||"px"),l.fontFamily=_.get(o,"table_style_body_font.family")||"Arial",l.lineHeight=_.get(o,"table_style_body_font.lineHeight")||"1.5",l.fontSize=(_.get(o,"table_style_body_font.size")||"16")+(_.get(o,"table_style_body_font.sizeUnit")||"px"),l.letterSpacing=_.get(o,"table_style_body_font.spacing"),l.fontStyle=_.get(o,"table_style_body_font.style")||"",l.textTransform=_.get(o,"table_style_body_font.transform")||"",_.get(o,"table_style_body_border_text_color.colorPickedHex")&&(l.color=_.get(o,"table_style_body_border_text_color.colorPickedHex"));var c={style:l};return _.get(o,"table_style_body_border_background.colorPickedHex")&&(l.backgroundColor=_.get(o,"table_style_body_border_background.colorPickedHex")),React.createElement("td",(0,a.Z)({key:r.id+e},c),n)})))}))))}const k=function(t){return(0,i.isEditor)()?((t=f({},t)).data=Array.from({length:10},(function(){return{}})),React.createElement(x,t)):React.createElement(y.Z,t,React.createElement(x,null))};function w(){var t=this.props.element.getSettings();if(!this.props.currentModel.getProperty("altrpModelUpdated"))return"";var e=[];if(this.props.element.getSettings("table_datasource")&&"datasource"===this.props.element.getSettings("choose_datasource")){var o=this.props.element.getSettings("table_datasource").replace(/{{/g,"").replace(/}}/g,"");e=(0,i.getDataByPath)(o)}var r=new b.Z(this.props.element.getSettings().table_query||{},this);return this.showTable(r)?_.get(t,"tables_columns.length")?React.createElement(k,{query:r,updateToken:this.props.updateToken,widgetId:this.props.element.getId(),currentModel:this.props.currentModel,data:e||r.getFromModel(this.state.modelData),settings:this.props.element.getSettings()}):React.createElement("div",{children:"Please Add Column"}):React.createElement("div",{children:"Please Choose Source"})}function v(t){switch(t.props.element.getName()){case"root-element":return r.bind(t);case"section":return n.bind(t);case"column":return l.bind(t);case"button":return d.bind(t);case"heading":return g.bind(t);case"text":return p.bind(t);case"image":return u.bind(t);case"table":return w.bind(t)}return function(){return(0,i.isEditor)()?React.createElement("div",{className:"tba-placeholder"},"TBA"):null}}}}]);