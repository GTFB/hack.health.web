(self.webpackChunk=self.webpackChunk||[]).push([[1241],{81253:(t,e,n)=>{"use strict";n.d(e,{Z:()=>s});var r=n(19756);function s(t,e){if(null==t)return{};var n,s,a=(0,r.Z)(t,e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(t);for(s=0;s<o.length;s++)n=o[s],e.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(t,n)&&(a[n]=t[n])}return a}},99822:(t,e,n)=>{"use strict";n.r(e),n.d(e,{default:()=>w});var r,s=n(96156),a=n(92137),o=n(6610),i=n(5991),u=n(10379),p=n(46070),c=n(77608),l=n(87757),d=n.n(l),f=n(67294),g=n(74374),m=n(81352),h=n(44338),v=n(71743),y=n(14627),O=n(40747),b=n(32465);const P=n(71893).ZP.div(r||(r=(0,b.Z)(["{\n  grid-template-columns: repeat(",", 1fr);\n  display: grid;    \n  ","\n"])),(function(t){return t.columnsCount}),(function(t){var e=t.posts_columns_gap,n=t.posts_rows_gap,r="";return e&&!Number(e)?r+="grid-column-gap:".concat(e,";"):Number(e)&&(r+="grid-column-gap:".concat(e,"px;")),n&&!Number(n)?r+="grid-row-gap:".concat(n,";"):Number(n)&&(r+="grid-row-gap:".concat(n,"px;")),r}));var E=n(49825);function S(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)}return n}function k(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?S(Object(n),!0).forEach((function(e){(0,s.Z)(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):S(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}n.e(350).then(n.bind(n,90350)),n.e(8102).then(n.bind(n,48102));var x=function(t){(0,u.Z)(g,t);var e,n,r,s,l=(r=g,s=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}(),function(){var t,e=(0,c.Z)(r);if(s){var n=(0,c.Z)(this).constructor;t=Reflect.construct(e,arguments,n)}else t=e.apply(this,arguments);return(0,p.Z)(this,t)});function g(t){var e;return(0,o.Z)(this,g),(e=l.call(this,t)).renderPost=function(t){var n=_.get(e.props.settings,"posts_card_hover_template",null),r=_.get(e.props.settings,"posts_transition_type",null),s=_.cloneDeep(e.props.data[t]||e.props.data),a=s.component||"";if(e.state.simpleTemplate){var o=h.default.cloneElement(e.state.simpleTemplate);o.setCardModel(new v.Z(s),t),a=f.createElement(o.componentClass,{element:o,ElementWrapper:y.default,children:o.children})}return f.createElement(f.Fragment,{key:(s.id||s.altrpIndex)+Math.random()},f.createElement("div",{className:"altrp-post"},a,n&&f.createElement("div",{className:"altrp-post altrp-post--hover altrp-post--hover--".concat(r)},a)))},e.state={simpleTemplate:"",simpleTemplateId:null,currentPage:1},e}return(0,i.Z)(g,[{key:"componentDidMount",value:(n=(0,a.Z)(d().mark((function t(){var e,n,r=this;return d().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(e=this.props.settings,!(n=_.get(e,"posts_card_template"))){t.next=6;break}if(n){t.next=5;break}return t.abrupt("return");case 5:this.setState((function(t){return k(k({},t),{},{simpleTemplateId:n})}),(0,a.Z)(d().mark((function t(){var e;return d().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,m.default.loadParsedTemplate(n);case 2:e=t.sent,r.setState((function(t){return k(k({},t),{},{simpleTemplate:e})}));case 4:case"end":return t.stop()}}),t)}))));case 6:case"end":return t.stop()}}),t,this)}))),function(){return n.apply(this,arguments)})},{key:"shouldComponentUpdate",value:function(t,e){return!((0,O.isEditor)()&&this.props.settings===t.settings&&_.isEqual(this.state.simpleTemplate,e.simpleTemplate)&&_.isEqual(this.state.simpleTemplateId,e.simpleTemplateId)&&_.isEqual(this.props.data,t.data)&&this.state.currentPage===e.currentPage)}},{key:"componentDidUpdate",value:(e=(0,a.Z)(d().mark((function t(e){var n,r,s,o=this;return d().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(n=this.props.settings,r=this.state.simpleTemplateId,s=_.get(n,"posts_card_template",r),_.isEqual(e.data,this.props.data)||this.setState((function(t){return k(k({},t),{},{posts:o.props.data})})),s===r){t.next=8;break}if(s){t.next=7;break}return t.abrupt("return");case 7:this.setState((function(t){return k(k({},t),{},{simpleTemplateId:s})}),(0,a.Z)(d().mark((function t(){var e;return d().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,m.default.loadParsedTemplate(s);case 2:e=t.sent,o.setState((function(t){return k(k({},t),{},{simpleTemplate:e})}));case 4:case"end":return t.stop()}}),t)}))));case 8:case"end":return t.stop()}}),t,this)}))),function(t){return e.apply(this,arguments)})},{key:"getPageCount",value:function(){var t=this.props.data,e=Number((0,O.getResponsiveSetting)(this.props.settings,"posts_per_page"))||12;return e&&_.get(t,"length")?Math.ceil(t.length/e):1}},{key:"setPage",value:function(t){(t=Number(t))||(t=1),t<0&&(t=0),t>this.getPageCount()&&(t=this.getPageCount()),this.state.currentPage!==t&&this.setState((function(e){return k(k({},e),{},{currentPage:t})}))}},{key:"renderPagination",value:function(){var t=this,e=k({},this.props.settings);if(!this.props.data.length&&!(0,O.isEditor)())return null;var n=(0,O.getResponsiveSetting)(this.props.settings,"posts_pagination_type")||"";if(n){var r=this.state.currentPage,s=this.getPageCount();if("pages"===n){e.hide_pagination_select=!0,e.hide_page_input=!0;var a={settings:e,pageCount:s,pageIndex:this.state.currentPage-1,nextPage:function(){t.setPage(t.state.currentPage+1)},previousPage:function(){t.setPage(t.state.currentPage-1)},gotoPage:function(e){t.setPage(e+1)},pageSize:this.props.element.getResponsiveSetting("posts_per_page"),widgetId:this.props.element.getId()};return f.createElement(E.Z,a)}return"prev_next"===n?f.createElement("div",{className:"altrp-pagination-pages"},f.createElement("button",{className:"altrp-pagination__previous "+(r<=1?"state-disabled":""),disabled:r<=1,onClick:function(){t.setPage(r-1)}},f.createElement("span",null,e.posts_prev_text||""),(0,O.renderAssetIcon)(e.prev_icon)),f.createElement("button",{className:"altrp-pagination__next "+(r===s?"state-disabled":""),disabled:r===s,onClick:function(){t.setPage(r+1)}},f.createElement("span",null,e.posts_next_text||""),(0,O.renderAssetIcon)(e.next_icon))):f.createElement("div",{className:"altrp-pagination"},!e.hide_pre_page_button&&f.createElement("button",{className:"altrp-pagination__previous",onClick:function(){return t.setPage(r-1)},disabled:r<=1},f.createElement("span",{dangerouslySetInnerHTML:{__html:e.prev_text||"Previous Page"}}),(0,O.renderAssetIcon)(e.prev_icon)),!e.hide_pages_buttons_button&&f.createElement("div",{className:"altrp-pagination__count"},e.pageText),!e.hide_next_page_button&&f.createElement("button",{className:"altrp-pagination__next",onClick:function(){return t.setPage(r+1)},disabled:r===s},f.createElement("span",{dangerouslySetInnerHTML:{__html:e.next_text||"Next Page"}}),(0,O.renderAssetIcon)(e.next_icon)))}return null}},{key:"render",value:function(){var t=this,e=this.state.currentPage,n=Number((0,O.getResponsiveSetting)(this.props.settings,"posts_per_page"))||12,r=this.props.data;!_.isArray(r)&&_.isObject(r)&&(r=[r]),_.isArray(r)||(r=[]);var s=0;n&&Number(n)&&(e>1&&(s=(e-1)*n),r=r.slice(s,s+n));var a=Number((0,O.getResponsiveSetting)(this.props.settings,"posts_columns"))||1,o=(0,O.getResponsiveSetting)(this.props.settings,"posts_columns_gap")||"",i=(0,O.getResponsiveSetting)(this.props.settings,"posts_rows_gap")||"";return f.createElement(f.Fragment,null,f.createElement(P,{columnsCount:a,posts_columns_gap:o,posts_rows_gap:i,className:"altrp-posts"},r.map((function(e,n){return t.renderPost(s+n)}))),this.renderPagination())}}]),g}(f.Component);const w=function(t){return"datasource"===t.settings.choose_datasource?((0,O.isEditor)()&&((t=k({},t)).settings=k({},t.settings),t.data=Array.from({length:100},(function(){return{}})),(0,O.setAltrpIndex)(t.data)),f.createElement(x,t)):f.createElement(g.Z,t,f.createElement(x,null))}},74374:(t,e,n)=>{"use strict";n.d(e,{Z:()=>f});var r=n(96156),s=n(92137),a=n(34699),o=n(87757),i=n.n(o),u=n(67294),p=(n(71614),n(49981)),c=n(40747);function l(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)}return n}function d(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?l(Object(n),!0).forEach((function(e){(0,r.Z)(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):l(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}const f=function(t){var e,n,r,o=[],l={forceFetchOnMount:!0,refetchOnWindowFocus:!0},f=t.children,g=void 0===f?[]:f,m=t.query,h=t.data,v=t.settings,y=t.updateToken,O={};v.tables_columns&&v.tables_columns.forEach((function(t){t.column_is_default_sorted&&!O.order_by&&(O.order_by=t.accessor,O.order=_.get(t,"column_is_default_sorted_direction","ASC"))}));var b=(0,u.useState)(1),P=(0,a.Z)(b,2),E=P[0],S=P[1],k=(0,u.useState)(O),x=(0,a.Z)(k,2),w=x[0],Z=x[1],C=(0,u.useState)({}),j=(0,a.Z)(C,2),I=j[0],N=j[1],R=(0,u.useCallback)(function(){var t=(0,s.Z)(i().mark((function t(e){var n,r,s,a,o,u,p,c=arguments;return i().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(n=c.length>1&&void 0!==c[1]?c[1]:1,r=c.length>2?c[2]:void 0,s=c.length>3?c[3]:void 0,c.length>4&&c[4],a=c.length>5?c[5]:void 0,o=c.length>6?c[6]:void 0,"datasource"!==v.choose_datasource){t.next=8;break}return t.abrupt("return",h);case 8:return u={page:n},p=JSON.stringify(s),r&&(u=_.assign(r,u)),a&&(u.altrpUdateToken=a),o&&(u.order="ASC",u.order_by=o),p.length>2&&(u.filters=p),t.next=16,m.getQueried(u);case 16:return t.abrupt("return",t.sent);case 17:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}());if(m.pageSize){var T=(0,p.NE)([m.dataSourceName,E,w,I,m.getParams(),y],R,l),A=T.status,D=T.resolvedData,L=T.latestData;o=D||o,e=A,n=T.error,r=L,(0,u.useEffect)((function(){null!=L&&L.hasMore&&p.sJ.prefetchQuery([m.dataSourceName,E+1],R)}),[L,R,E,w,I,y])}else{var V=(0,p.aM)([m.dataSourceName,m.getParams(),y],(function(t){return m.getResource().getQueried(d(d({},w),{},{filters:filterSettingJSON,groupBy}))}),l),q=V.status;o=V.data,e=q,n=V.error}_.isObject(o)&&!_.isArray(o)&&(o=[o]),o.length||(o=h),_.isArray(g)||(g=[g]),_.isEmpty(h)&&(h=o),u.useEffect((function(){(0,c.setAltrpIndex)(h)}),[h]);var M=u.useMemo((function(){return _.isArray(h)?h:_.isObject(h)?[h]:[]}),[h]),F=d(d({},t),{},{data:M,_status:e,setFilterSettings:N,setSortSettings:Z,filterSetting:I,sortSetting:w,_latestData:r,setPage:S,page:E,_error:n});return g.map((function(t){return u.cloneElement(t,d(d({},F),{},{key:t.key}))}))}},75429:(t,e,n)=>{"use strict";n.d(e,{ZP:()=>v});var r=n(81253),s=n(22122),a=n(6610),o=n(5991),i=n(10379),u=n(46070),p=n(77608),c=n(67294),l=(n(22368),n(73935),n(53569)),d=n(75912);var f,g,m,h=(0,(n(81144),n(35639),n(61085)).m)(d.S);const v=(f=h,m=g=function(t){(0,i.Z)(g,t);var e,n,d=(e=g,n=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}(),function(){var t,r=(0,p.Z)(e);if(n){var s=(0,p.Z)(this).constructor;t=Reflect.construct(r,arguments,s)}else t=r.apply(this,arguments);return(0,u.Z)(this,t)});function g(t){var e;return(0,a.Z)(this,g),(e=d.call(this)).select=void 0,e.lastRequest=void 0,e.mounted=!1,e.optionsCache={},e.handleInputChange=function(t,n){var r=e.props,s=r.cacheOptions,a=r.onInputChange,o=(0,l.G)(t,n,a);if(!o)return delete e.lastRequest,void e.setState({inputValue:"",loadedInputValue:"",loadedOptions:[],isLoading:!1,passEmptyOptions:!1});if(s&&e.optionsCache[o])e.setState({inputValue:o,loadedInputValue:o,loadedOptions:e.optionsCache[o],isLoading:!1,passEmptyOptions:!1});else{var i=e.lastRequest={};e.setState({inputValue:o,isLoading:!0,passEmptyOptions:!e.state.loadedInputValue},(function(){e.loadOptions(o,(function(t){e.mounted&&(t&&(e.optionsCache[o]=t),i===e.lastRequest&&(delete e.lastRequest,e.setState({isLoading:!1,loadedInputValue:o,loadedOptions:t||[],passEmptyOptions:!1})))}))}))}return o},e.state={defaultOptions:Array.isArray(t.defaultOptions)?t.defaultOptions:void 0,inputValue:void 0!==t.inputValue?t.inputValue:"",isLoading:!0===t.defaultOptions,loadedOptions:[],passEmptyOptions:!1},e}return(0,o.Z)(g,[{key:"componentDidMount",value:function(){var t=this;this.mounted=!0;var e=this.props.defaultOptions,n=this.state.inputValue;!0===e&&this.loadOptions(n,(function(e){if(t.mounted){var n=!!t.lastRequest;t.setState({defaultOptions:e||[],isLoading:n})}}))}},{key:"UNSAFE_componentWillReceiveProps",value:function(t){t.cacheOptions!==this.props.cacheOptions&&(this.optionsCache={}),t.defaultOptions!==this.props.defaultOptions&&this.setState({defaultOptions:Array.isArray(t.defaultOptions)?t.defaultOptions:void 0})}},{key:"componentWillUnmount",value:function(){this.mounted=!1}},{key:"focus",value:function(){this.select.focus()}},{key:"blur",value:function(){this.select.blur()}},{key:"loadOptions",value:function(t,e){var n=this.props.loadOptions;if(!n)return e();var r=n(t,e);r&&"function"==typeof r.then&&r.then(e,(function(){return e()}))}},{key:"render",value:function(){var t=this,e=this.props,n=(e.loadOptions,e.isLoading),a=(0,r.Z)(e,["loadOptions","isLoading"]),o=this.state,i=o.defaultOptions,u=o.inputValue,p=o.isLoading,l=o.loadedInputValue,d=o.loadedOptions,g=o.passEmptyOptions?[]:u&&l?d:i||[];return c.createElement(f,(0,s.Z)({},a,{ref:function(e){t.select=e},options:g,isLoading:p||n,onInputChange:this.handleInputChange}))}}]),g}(c.Component),g.defaultProps={cacheOptions:!1,defaultOptions:!1,filterOption:null,isLoading:!1},m)}}]);